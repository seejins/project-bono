{"version":3,"file":"DriverSeasonStats-fDHJX5hE.js","sources":["../../src/components/DriverSeasonStats.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport {\n  Trophy,\n  Award,\n  Star,\n  Flag,\n  Zap,\n  Target,\n  ChevronRight,\n  Loader2,\n} from 'lucide-react';\nimport type { TooltipProps } from 'recharts';\n\nimport { useSeason } from '../contexts/SeasonContext';\nimport {\n  useSeasonAnalysis,\n  type DriverSeasonSummary,\n  type SeasonAnalysisHighlight,\n  type SeasonEventSummary,\n} from '../hooks/useSeasonAnalysis';\nimport { F123DataService } from '../services/F123DataService';\nimport { BaseLineChart, type LineConfig } from './charts/BaseLineChart';\nimport { BRAND_COLORS } from '../theme/colors';\nimport { getResultStatus } from '../utils/f123DataMapping';\nimport { apiGet } from '../utils/api';\nimport { formatDate, formatFullDate } from '../utils/dateUtils';\nimport { DashboardTable, type DashboardTableColumn } from './layout/DashboardTable';\n\ninterface DriverSeasonStatsProps {\n  driverId: string;\n  onRaceSelect?: (raceId: string) => void;\n}\n\ninterface DriverRaceHistoryEntry {\n  raceId: string;\n  trackName: string | null;\n  raceDate: string | null;\n  position: number | null;\n  gridPosition: number | null;\n  points: number | null;\n  fastestLap: boolean;\n  polePosition: boolean;\n  resultStatus: number | null;\n  raceStatus: string | null;\n  sessionName: string | null;\n}\n\ninterface TrendPoint extends Record<string, unknown> {\n  raceId: string;\n  order: number;\n  label: string;\n  shortLabel: string;\n  date: string | null;\n  racePosition: number | null;\n  qualifyingPosition: number | null;\n  comparisonRacePosition: number | null;\n  comparisonQualifyingPosition: number | null;\n}\n\ninterface ComparisonOption {\n  id: string;\n  name: string;\n  team: string | null;\n}\n\ninterface RaceRow {\n  raceId: string;\n  eventName: string;\n  trackName: string;\n  date: string | null;\n  points: number | null;\n  position: number | null;\n  gridPosition: number | null;\n  fastestLap: boolean;\n  polePosition: boolean;\n  resultStatus: number | null;\n  raceStatus: string | null;\n  sessionTypes: string[];\n}\n\nconst HighlightBadge: React.FC<{ label: string }> = ({ label }) => (\n  <span className=\"inline-flex items-center gap-1 rounded-full bg-slate-900/80 px-3 py-1 text-xs font-semibold text-slate-100\">\n    <Star className=\"h-3 w-3 text-amber-400\" />\n    {label}\n  </span>\n);\n\n\nconst createShortLabel = (event: SeasonEventSummary | null, index: number): string => {\n  if (!event) {\n    return `R${index + 1}`;\n  }\n  if (event.shortEventName) {\n    return event.shortEventName;\n  }\n  if (event.eventName) {\n    const lower = event.eventName.toLowerCase();\n    const gpIndex = lower.indexOf(' grand prix');\n    if (gpIndex > 0) {\n      return `${event.eventName.slice(0, gpIndex)} GP`;\n    }\n    return event.eventName;\n  }\n  if (event.trackName) {\n    return event.trackName;\n  }\n  return `R${index + 1}`;\n};\n\nconst mapRaceHistoryEntry = (entry: any): DriverRaceHistoryEntry => ({\n  raceId: entry?.raceId ?? entry?.race_id ?? '',\n  trackName: entry?.trackName ?? entry?.track_name ?? null,\n  raceDate: entry?.raceDate ?? entry?.race_date ?? null,\n  position:\n    entry?.position !== undefined && entry?.position !== null\n      ? Number(entry.position)\n      : null,\n  gridPosition:\n    entry?.gridPosition !== undefined && entry?.gridPosition !== null\n      ? Number(entry.gridPosition)\n      : null,\n  points:\n    entry?.points !== undefined && entry?.points !== null\n      ? Number(entry.points)\n      : null,\n  fastestLap: Boolean(entry?.fastestLap),\n  polePosition: Boolean(entry?.polePosition),\n  resultStatus:\n    entry?.resultStatus !== undefined && entry?.resultStatus !== null\n      ? Number(entry.resultStatus)\n      : null,\n  raceStatus: entry?.raceStatus ?? null,\n  sessionName: entry?.sessionName ?? null,\n});\n\nconst getPositionBadgeClass = (position: number | null | undefined): string => {\n  if (position === 1) return 'text-yellow-400 bg-yellow-500/15';\n  if (position === 2) return 'text-gray-200 bg-gray-400/20';\n  if (position === 3) return 'text-amber-500 bg-amber-500/20';\n  if (position && position > 0 && position <= 10) return 'text-emerald-400 bg-emerald-500/15';\n  return 'text-slate-300 bg-slate-700/30';\n};\n\nconst buildSessionTypeList = (sessionTypes?: string | null): string[] => {\n  if (!sessionTypes) {\n    return [];\n  }\n  return sessionTypes\n    .split(',')\n    .map((token) => token.trim())\n    .filter(Boolean);\n};\n\nexport const DriverSeasonStats: React.FC<DriverSeasonStatsProps> = ({ driverId, onRaceSelect }) => {\n  const { currentSeason } = useSeason();\n  const { analysis, loading, error } = useSeasonAnalysis(currentSeason?.id);\n\n  const [seasonRaceHistory, setSeasonRaceHistory] = useState<DriverRaceHistoryEntry[]>([]);\n  const [historyLoading, setHistoryLoading] = useState(false);\n  const [historyError, setHistoryError] = useState<string | null>(null);\n  const [comparisonDriverId, setComparisonDriverId] = useState<string>('');\n  const [comparisonHistoryCache, setComparisonHistoryCache] = useState<Record<string, DriverRaceHistoryEntry[]>>({});\n  const [comparisonLoading, setComparisonLoading] = useState(false);\n  const [comparisonError, setComparisonError] = useState<string | null>(null);\n\n  const driverSummary: DriverSeasonSummary | null = useMemo(() => {\n    if (!analysis) {\n      return null;\n    }\n    return analysis.drivers.find((driver) => driver.id === driverId) ?? null;\n  }, [analysis, driverId]);\n\n  const highlightBadges: string[] = useMemo(() => {\n    if (!analysis || !driverSummary) {\n      return [];\n    }\n\n    const labels: string[] = [];\n    const { highlights } = analysis.summary;\n\n    const pushIfMatch = (highlight: SeasonAnalysisHighlight | null | undefined, label: string) => {\n      if (highlight?.id === driverSummary.id) {\n        labels.push(label);\n      }\n    };\n\n    pushIfMatch(highlights.mostWins, 'Season wins leader');\n    pushIfMatch(highlights.mostPodiums, 'Podium leader');\n    pushIfMatch(highlights.mostPoles, 'Pole position leader');\n    pushIfMatch(highlights.mostFastestLaps, 'Fastest lap leader');\n    pushIfMatch(highlights.bestAverageFinish, 'Best average finish');\n    pushIfMatch(highlights.bestConsistency, 'Most consistent');\n\n    return labels;\n  }, [analysis, driverSummary]);\n\n  const driverTeamDisplay = driverSummary\n    ? F123DataService.getTeamDisplayName(driverSummary.team ?? undefined)\n    : 'Unknown Team';\n  const teamColorHex = driverSummary?.team ? F123DataService.getTeamColorHex(driverSummary.team) : '';\n\n  const cleanFinishes = useMemo(\n    () => Math.max((driverSummary?.totalRaces ?? 0) - (driverSummary?.dnfs ?? 0), 0),\n    [driverSummary?.dnfs, driverSummary?.totalRaces]\n  );\n\n  const overviewCards = useMemo<\n    Array<{\n      id: string;\n      title: string;\n      icon: React.ComponentType<{ className?: string }>;\n      iconClasses: string;\n      metrics: Array<{ label: string; value: string }>;\n    }>\n  >(() => {\n    if (!driverSummary) {\n      return [];\n    }\n\n    const averagePoints =\n      driverSummary.totalRaces > 0\n        ? (driverSummary.points / driverSummary.totalRaces).toFixed(1)\n        : '0.0';\n\n    return [\n      {\n        id: 'championship',\n        title: 'Championship',\n        icon: Target,\n        iconClasses: 'bg-red-500/15 text-red-400',\n        metrics: [\n          { label: 'Points', value: driverSummary.points.toLocaleString() },\n          { label: 'Position', value: driverSummary.position ? `P${driverSummary.position}` : '—' },\n          { label: 'Wins', value: driverSummary.wins.toString() },\n        ],\n      },\n      {\n        id: 'podiums',\n        title: 'Podium Pace',\n        icon: Trophy,\n        iconClasses: 'bg-yellow-500/15 text-yellow-400',\n        metrics: [\n          { label: 'Podiums', value: driverSummary.podiums.toString() },\n          { label: 'Poles', value: driverSummary.polePositions.toString() },\n          { label: 'Fastest Laps', value: driverSummary.fastestLaps.toString() },\n        ],\n      },\n      {\n        id: 'consistency',\n        title: 'Consistency',\n        icon: Flag,\n        iconClasses: 'bg-purple-500/15 text-purple-400',\n        metrics: [\n          {\n            label: 'Avg Finish',\n            value: driverSummary.averageFinish ? `P${driverSummary.averageFinish.toFixed(1)}` : '—',\n          },\n          { label: 'Consistency', value: `${driverSummary.consistency.toFixed(1)}%` },\n          { label: 'Points Finishes', value: driverSummary.pointsFinishes.toString() },\n        ],\n      },\n      {\n        id: 'reliability',\n        title: 'Season Reliability',\n        icon: Award,\n        iconClasses: 'bg-emerald-500/15 text-emerald-400',\n        metrics: [\n          { label: 'DNFs', value: driverSummary.dnfs.toString() },\n          { label: 'Clean Finishes', value: cleanFinishes.toString() },\n          { label: 'Pts / Race', value: averagePoints },\n        ],\n      },\n    ];\n  }, [cleanFinishes, driverSummary]);\n\n  const fetchSeasonRaceHistory = useCallback(\n    async (targetDriverId: string): Promise<DriverRaceHistoryEntry[]> => {\n      if (!currentSeason?.id) {\n        return [];\n      }\n\n      const response = await apiGet(`/api/drivers/${targetDriverId}/race-history?seasonId=${currentSeason.id}`);\n      if (!response.ok) {\n        throw new Error('Failed to fetch race history');\n      }\n\n      const payload = await response.json();\n      const entries = Array.isArray(payload?.raceHistory) ? payload.raceHistory : [];\n      return entries.map(mapRaceHistoryEntry);\n    },\n    [currentSeason?.id]\n  );\n\n  useEffect(() => {\n    let cancelled = false;\n\n    if (!driverId || !currentSeason?.id) {\n      setSeasonRaceHistory([]);\n      setHistoryError(null);\n      return;\n    }\n\n    const load = async () => {\n      try {\n        setHistoryLoading(true);\n        setHistoryError(null);\n        const results = await fetchSeasonRaceHistory(driverId);\n        if (!cancelled) {\n          setSeasonRaceHistory(results);\n        }\n      } catch (err) {\n        if (!cancelled) {\n          setHistoryError(err instanceof Error ? err.message : 'Unable to load race history');\n          setSeasonRaceHistory([]);\n        }\n      } finally {\n        if (!cancelled) {\n          setHistoryLoading(false);\n        }\n      }\n    };\n\n    load();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [driverId, currentSeason?.id, fetchSeasonRaceHistory]);\n\n  useEffect(() => {\n    setComparisonDriverId('');\n    setComparisonError(null);\n    setComparisonLoading(false);\n  }, [driverId]);\n\n  useEffect(() => {\n    let cancelled = false;\n\n    if (!comparisonDriverId || !currentSeason?.id) {\n      return;\n    }\n\n    if (comparisonHistoryCache[comparisonDriverId]) {\n      return;\n    }\n\n    const loadComparison = async () => {\n      try {\n        setComparisonLoading(true);\n        setComparisonError(null);\n\n        const results = await fetchSeasonRaceHistory(comparisonDriverId);\n        if (!cancelled) {\n          setComparisonHistoryCache((prev) => ({\n            ...prev,\n            [comparisonDriverId]: results,\n          }));\n        }\n      } catch (err) {\n        if (!cancelled) {\n          setComparisonError(err instanceof Error ? err.message : 'Unable to load comparison data');\n        }\n      } finally {\n        if (!cancelled) {\n          setComparisonLoading(false);\n        }\n      }\n    };\n\n    loadComparison();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [comparisonDriverId, currentSeason?.id, comparisonHistoryCache, fetchSeasonRaceHistory]);\n\n  const completedEvents = useMemo<SeasonEventSummary[]>(() => {\n    if (!analysis?.events?.completed) {\n      return [];\n    }\n    return [...analysis.events.completed].sort((a, b) => {\n      const dateA = a?.raceDate ? new Date(a.raceDate).getTime() : Number.POSITIVE_INFINITY;\n      const dateB = b?.raceDate ? new Date(b.raceDate).getTime() : Number.POSITIVE_INFINITY;\n      return dateA - dateB;\n    });\n  }, [analysis]);\n\n  const eventMap = useMemo(() => {\n    const map = new Map<string, SeasonEventSummary>();\n    analysis?.events?.all?.forEach((event) => {\n      if (event?.id) {\n        map.set(event.id, event);\n      }\n    });\n    return map;\n  }, [analysis]);\n\n  const driverHistoryMap = useMemo(() => {\n    const map = new Map<string, DriverRaceHistoryEntry>();\n    for (const entry of seasonRaceHistory) {\n      if (entry.raceId) {\n        map.set(entry.raceId, entry);\n      }\n    }\n    return map;\n  }, [seasonRaceHistory]);\n\n  const comparisonHistory = comparisonDriverId ? comparisonHistoryCache[comparisonDriverId] ?? [] : [];\n\n  const comparisonHistoryMap = useMemo(() => {\n    const map = new Map<string, DriverRaceHistoryEntry>();\n    for (const entry of comparisonHistory) {\n      if (entry.raceId) {\n        map.set(entry.raceId, entry);\n      }\n    }\n    return map;\n  }, [comparisonHistory]);\n\n  const raceRows = useMemo<RaceRow[]>(() => {\n    return completedEvents.map((event) => {\n      const driverResult = driverHistoryMap.get(event.id ?? '') ?? null;\n      const raceDate = driverResult?.raceDate ?? event.raceDate ?? null;\n      const sessionTypes = buildSessionTypeList(event.sessionTypes);\n\n      return {\n        raceId: event.id ?? driverResult?.raceId ?? '',\n        eventName: event.eventName ?? event.shortEventName ?? driverResult?.trackName ?? event.trackName ?? 'Race',\n        trackName: event.track?.name ?? event.trackName ?? driverResult?.trackName ?? 'Track',\n        date: raceDate,\n        points: driverResult?.points ?? null,\n        position: driverResult?.position ?? null,\n        gridPosition: driverResult?.gridPosition ?? null,\n        fastestLap: driverResult?.fastestLap ?? false,\n        polePosition: driverResult?.polePosition ?? false,\n        resultStatus: driverResult?.resultStatus ?? null,\n        raceStatus: driverResult?.raceStatus ?? event.status ?? null,\n        sessionTypes,\n      };\n    });\n  }, [completedEvents, driverHistoryMap]);\n\n  const raceTableColumns = useMemo<DashboardTableColumn<RaceRow>[]>(() => [\n    {\n      key: 'eventName',\n      label: 'Event',\n      align: 'left',\n      render: (value: string) => (\n        <span className=\"font-medium text-slate-900 dark:text-slate-100\">{value}</span>\n      ),\n    },\n    {\n      key: 'trackName',\n      label: 'Track',\n      align: 'left',\n      render: (value: string) => <span className=\"text-slate-500 dark:text-slate-400\">{value}</span>,\n    },\n    {\n      key: 'date',\n      label: 'Date',\n      align: 'left',\n      render: (_value: string | null, row) => (\n        <span className=\"text-slate-500 dark:text-slate-400\">{formatDate(row.date)}</span>\n      ),\n    },\n    {\n      key: 'position',\n      label: 'Result',\n      align: 'left',\n      render: (_value: number | null, row) => {\n        const positionClass = getPositionBadgeClass(row.position);\n        const positionDisplay =\n          row.position != null\n            ? `P${row.position}`\n            : row.resultStatus != null\n              ? getResultStatus(row.resultStatus)\n              : '—';\n        return (\n          <div className=\"flex items-center gap-2\">\n            <span\n              className={`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${positionClass}`}\n            >\n              {positionDisplay}\n            </span>\n            {row.fastestLap && (\n              <span className=\"inline-flex items-center rounded-full bg-purple-500/15 px-2 py-0.5 text-[10px] font-semibold uppercase text-purple-300\">\n                FL\n              </span>\n            )}\n            {row.polePosition && (\n              <span className=\"inline-flex items-center rounded-full bg-blue-500/15 px-2 py-0.5 text-[10px] font-semibold uppercase text-blue-300\">\n                Pole\n              </span>\n            )}\n          </div>\n        );\n      },\n    },\n    {\n      key: 'gridPosition',\n      label: 'Grid',\n      align: 'left',\n      render: (_value: number | null, row) => (\n        <span className=\"text-slate-500 dark:text-slate-400\">\n          {row.gridPosition != null ? `P${row.gridPosition}` : '—'}\n        </span>\n      ),\n    },\n    {\n      key: 'raceStatus',\n      label: 'Status',\n      align: 'left',\n      render: (_value: string | null, row) => (\n        <span className=\"text-slate-500 dark:text-slate-400\">{row.raceStatus ?? '—'}</span>\n      ),\n    },\n    {\n      key: 'sessionTypes',\n      label: 'Sessions',\n      align: 'left',\n      render: (_value: string[], row) => (\n        <div className=\"flex flex-wrap gap-2\">\n          {row.sessionTypes.length > 0 ? (\n            row.sessionTypes.map((session) => (\n              <span\n                key={`${row.raceId}-${session}`}\n                className=\"rounded-full bg-slate-800 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide text-slate-300\"\n              >\n                {session}\n              </span>\n            ))\n          ) : (\n            <span className=\"text-xs text-slate-500\">—</span>\n          )}\n        </div>\n      ),\n    },\n    {\n      key: 'points',\n      label: 'Points',\n      align: 'right',\n      render: (_value: number | null, row) => (\n        <span className=\"font-semibold text-slate-900 dark:text-slate-100\">\n          {row.points != null ? Number(row.points).toLocaleString() : '—'}\n        </span>\n      ),\n    },\n  ], []);\n\n  const trendData = useMemo<TrendPoint[]>(() => {\n    return completedEvents.map((event, index) => {\n      const driverEntry = driverHistoryMap.get(event.id ?? '') ?? null;\n      const comparisonEntry = comparisonHistoryMap.get(event.id ?? '') ?? null;\n      const label =\n        event.eventName ??\n        event.shortEventName ??\n        driverEntry?.trackName ??\n        event.trackName ??\n        `Race ${index + 1}`;\n\n      return {\n        raceId: event.id ?? driverEntry?.raceId ?? `race-${index}`,\n        order: index + 1,\n        label,\n        shortLabel: createShortLabel(event, index),\n        date: driverEntry?.raceDate ?? event.raceDate ?? null,\n        racePosition: driverEntry?.position ?? null,\n        qualifyingPosition: driverEntry?.gridPosition ?? null,\n        comparisonRacePosition: comparisonEntry?.position ?? null,\n        comparisonQualifyingPosition: comparisonEntry?.gridPosition ?? null,\n      };\n    });\n  }, [completedEvents, driverHistoryMap, comparisonHistoryMap]);\n\n  const averageRacePosition = useMemo(() => {\n    // Single pass: filter valid values and sum in one iteration\n    let total = 0;\n    let count = 0;\n    for (const point of trendData) {\n      const value = point.racePosition;\n      if (value !== null && Number.isFinite(value)) {\n        total += value;\n        count++;\n      }\n    }\n    if (count === 0) {\n      return null;\n    }\n    return Math.round((total / count) * 10) / 10;\n  }, [trendData]);\n\n  const averageQualifyingPosition = useMemo(() => {\n    // Single pass: filter valid values and sum in one iteration\n    let total = 0;\n    let count = 0;\n    for (const point of trendData) {\n      const value = point.qualifyingPosition;\n      if (value !== null && Number.isFinite(value)) {\n        total += value;\n        count++;\n      }\n    }\n    if (count === 0) {\n      return null;\n    }\n    return Math.round((total / count) * 10) / 10;\n  }, [trendData]);\n\n  const comparisonOptions: ComparisonOption[] = useMemo(() => {\n    if (!analysis) {\n      return [];\n    }\n    // Single pass: filter, map, and prepare for sort in one iteration\n    const options: ComparisonOption[] = [];\n    for (const driver of analysis.drivers) {\n      if (driver.id !== driverId) {\n        options.push({\n          id: driver.id,\n          name: driver.name,\n          team: driver.team ?? null,\n        });\n      }\n    }\n    // Sort after single-pass filtering/mapping\n    return options.sort((a, b) => a.name.localeCompare(b.name));\n  }, [analysis, driverId]);\n\n  const comparisonDriverSummary = useMemo(() => {\n    if (!analysis || !comparisonDriverId) {\n      return null;\n    }\n    return analysis.drivers.find((driver) => driver.id === comparisonDriverId) ?? null;\n  }, [analysis, comparisonDriverId]);\n\n  const buildTrendTooltip = useCallback(\n    (chartType: 'race' | 'qualifying') =>\n      ({ active, payload }: TooltipProps<number, string>) => {\n        if (!active || !payload || payload.length === 0) {\n          return null;\n        }\n\n        const datum = payload[0].payload as TrendPoint;\n        const primary =\n          chartType === 'race' ? datum.racePosition : datum.qualifyingPosition;\n        const comparison =\n          chartType === 'race'\n            ? datum.comparisonRacePosition\n            : datum.comparisonQualifyingPosition;\n\n        return (\n          <div className=\"rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-xs text-slate-200 shadow-lg\">\n            <div className=\"font-semibold text-slate-100\">{datum.label}</div>\n            {datum.date && <div className=\"text-slate-400\">{formatFullDate(datum.date)}</div>}\n            <div className=\"mt-2 space-y-1\">\n              <div>\n                {(driverSummary?.name ?? 'Driver')}: {primary != null ? `P${primary}` : '—'}\n              </div>\n              {comparisonDriverId && (\n                <div>\n                  {(comparisonDriverSummary?.name ?? 'Comparison')}:{' '}\n                  {comparison != null ? `P${comparison}` : '—'}\n                </div>\n              )}\n            </div>\n          </div>\n        );\n      },\n    [comparisonDriverId, comparisonDriverSummary?.name, driverSummary?.name]\n  );\n\n  const comparisonTeamColorHex = comparisonDriverSummary?.team ? F123DataService.getTeamColorHex(comparisonDriverSummary.team) : '';\n  const fallbackGlow = 'rgba(255,255,255,0.28)';\n  const glowGradient = teamColorHex\n    ? teamColorHex.trim().startsWith('#')\n      ? `radial-gradient(circle at top, ${teamColorHex}55, transparent 68%)`\n      : `radial-gradient(circle at top, ${teamColorHex}, transparent 68%)`\n    : `radial-gradient(circle at top, ${fallbackGlow}, transparent 72%)`;\n\n  const raceLineColor = teamColorHex || BRAND_COLORS.primary;\n  const qualLineColor = teamColorHex || BRAND_COLORS.electric;\n  const comparisonRaceLineColor = comparisonTeamColorHex || BRAND_COLORS.purple;\n  const comparisonQualLineColor = comparisonTeamColorHex || BRAND_COLORS.accent;\n\n  const isLoading = loading || historyLoading;\n\n  const latestRaceId = seasonRaceHistory.length > 0 ? seasonRaceHistory[0].raceId : null;\n  const raceTableRows = historyLoading || historyError ? [] : raceRows;\n  const raceTableEmptyMessage = historyLoading\n    ? (\n      <div className=\"flex items-center justify-center gap-2 text-slate-500 dark:text-slate-400\">\n        <Loader2 className=\"h-5 w-5 animate-spin\" />\n        <span>Loading race results…</span>\n      </div>\n    )\n    : historyError\n      ? <div className=\"text-sm text-rose-400\">{historyError}</div>\n      : 'No completed races recorded for this season yet.';\n\n  const renderTrendChart = (chartType: 'race' | 'qualifying') => {\n    const primaryKey =\n      chartType === 'race' ? ('racePosition' as const) : ('qualifyingPosition' as const);\n    const comparisonKey =\n      chartType === 'race'\n        ? ('comparisonRacePosition' as const)\n        : ('comparisonQualifyingPosition' as const);\n\n    const chartPositions: number[] = [];\n    trendData.forEach((point) => {\n      const primaryValue = point[primaryKey];\n      const comparisonValue = point[comparisonKey];\n      if (primaryValue != null) chartPositions.push(primaryValue);\n      if (comparisonValue != null) chartPositions.push(comparisonValue);\n    });\n    const maxDomainValue = chartPositions.length ? Math.max(...chartPositions, 10) : 10;\n\n    const hasPrimaryData = chartType === 'race'\n      ? trendData.some((point) => point.racePosition != null)\n      : trendData.some((point) => point.qualifyingPosition != null);\n    const hasComparisonData = chartType === 'race'\n      ? trendData.some((point) => point.comparisonRacePosition != null)\n      : trendData.some((point) => point.comparisonQualifyingPosition != null);\n\n    const lines: LineConfig<TrendPoint>[] = [\n      {\n        dataKey: primaryKey,\n        name: driverSummary?.name ?? 'Driver',\n        stroke: chartType === 'race' ? raceLineColor : qualLineColor,\n        dot: true,\n        strokeWidth: 2,\n      },\n    ];\n\n    if (comparisonDriverId && hasComparisonData) {\n      lines.push({\n        dataKey: comparisonKey,\n        name: comparisonDriverSummary?.name ?? 'Comparison',\n        stroke: chartType === 'race' ? comparisonRaceLineColor : comparisonQualLineColor,\n        strokeDasharray: '6 3',\n        dot: true,\n        strokeWidth: 2,\n      });\n    }\n\n    const average = chartType === 'race' ? averageRacePosition : averageQualifyingPosition;\n\n    return (\n      <div className=\"rounded-2xl border border-slate-800 bg-slate-950/70 p-6\">\n        <div className=\"mb-4 flex items-center justify-between\">\n          <div>\n            <h3 className=\"text-lg font-semibold text-slate-100\">\n              {chartType === 'race' ? 'Race Finish Trend' : 'Qualifying Trend'}\n            </h3>\n            <p className=\"text-xs uppercase tracking-[0.28em] text-slate-500\">\n              {trendData.length > 0 ? `${trendData.length} events` : 'Awaiting data'}\n            </p>\n          </div>\n          {average !== null && (\n            <div className=\"rounded-full border border-slate-700 px-3 py-1 text-xs font-semibold text-slate-300\">\n              Avg: P{average.toFixed(1)}\n            </div>\n          )}\n        </div>\n        {hasPrimaryData || (comparisonDriverId && hasComparisonData) ? (\n          <div className=\"h-64 w-full\">\n            <BaseLineChart<TrendPoint>\n              data={trendData}\n              xKey=\"order\"\n              lines={lines}\n              legend={Boolean(comparisonDriverId)}\n              yAxisProps={{\n                domain: [Math.max(maxDomainValue, 1) + 0.5, 0.5],\n                reversed: true,\n                allowDecimals: false,\n              }}\n              xTickFormatter={(_, index) => trendData[index]?.shortLabel ?? ''}\n              yTickFormatter={(value) => `P${Number(value).toFixed(0)}`}\n              tooltipContent={buildTrendTooltip(chartType)}\n              height=\"100%\"\n              cartesianGrid\n              referenceLines={\n                average !== null\n                  ? [\n                      {\n                        y: average,\n                        stroke: 'white',\n                        strokeDasharray: '4 4',\n                        label: {\n                          position: 'right',\n                          value: `Avg P${average.toFixed(1)}`,\n                          fill: 'white',\n                        },\n                      },\n                    ]\n                  : undefined\n              }\n            />\n          </div>\n        ) : (\n          <div className=\"flex h-64 items-center justify-center text-sm text-slate-500\">\n            No {chartType === 'race' ? 'race' : 'qualifying'} data yet.\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex h-64 items-center justify-center\">\n        <div className=\"h-12 w-12 animate-spin rounded-full border-b-2 border-red-600\" />\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"flex h-64 flex-col items-center justify-center text-sm text-red-500\">\n        <p>Unable to load driver analysis.</p>\n        <p className=\"mt-1 text-xs text-red-400\">{error}</p>\n      </div>\n    );\n  }\n\n  if (!analysis || !driverSummary) {\n    return (\n      <div className=\"flex h-64 items-center justify-center text-sm text-slate-500 dark:text-slate-400\">\n        Driver analysis unavailable.\n      </div>\n    );\n  }\n\n  const easing: [number, number, number, number] = [0.22, 1, 0.36, 1];\n\n  return (\n    <div className=\"relative -mt-24 -ml-[calc(50vw-50%)] -mr-[calc(50vw-50%)] w-screen overflow-hidden\">\n      <div className=\"pointer-events-none absolute inset-0\">\n        <div\n          className=\"absolute inset-x-0 top-0 h-[520px] blur-[160px]\"\n          style={{ background: glowGradient }}\n        />\n      </div>\n      <motion.div\n        className=\"relative z-10 mx-auto max-w-[1600px] space-y-8 px-6 pt-40 pb-16 text-slate-900 dark:text-slate-100 lg:px-10\"\n        initial={{ opacity: 0, y: 32 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.6, ease: easing }}\n      >\n        <motion.header\n          className=\"flex flex-col items-center justify-center space-y-3 text-center\"\n          initial={{ opacity: 0, y: 16 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5, ease: easing, delay: 0.1 }}\n        >\n          <p className=\"text-xs font-semibold uppercase tracking-[0.45em] text-slate-500 dark:text-slate-400\">\n            Season Overview\n          </p>\n          <h1 className=\"text-4xl font-black uppercase tracking-[0.18em] text-slate-900 dark:text-white sm:text-5xl\">\n            {driverSummary.name}\n          </h1>\n          <span className=\"text-sm font-medium uppercase tracking-[0.3em] text-slate-500 dark:text-slate-400\">\n            {driverTeamDisplay}\n          </span>\n          {highlightBadges.length > 0 && (\n            <div className=\"mt-2 flex flex-wrap items-center justify-center gap-2\">\n              {highlightBadges.map((label) => (\n                <HighlightBadge key={label} label={label} />\n              ))}\n            </div>\n          )}\n        </motion.header>\n\n        <motion.section\n          className=\"space-y-8\"\n          initial={{ opacity: 0, y: 24 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5, ease: easing, delay: 0.18 }}\n        >\n          <div className=\"space-y-6\">\n            <div className=\"flex flex-col gap-3 md:flex-row md:items-center md:justify-between\">\n              <h2 className=\"text-xl font-semibold text-slate-900 dark:text-slate-100\">\n                Season Statistics\n              </h2>\n              {comparisonOptions.length > 0 && (\n                <div className=\"flex items-center gap-3\">\n                  <label className=\"text-xs font-semibold uppercase tracking-[0.28em] text-slate-500\">\n                    Compare\n                  </label>\n                  <select\n                    value={comparisonDriverId}\n                    onChange={(event) => setComparisonDriverId(event.target.value)}\n                    className=\"min-w-[200px] rounded-xl border border-slate-700 bg-slate-900 px-3 py-2 text-sm font-medium text-slate-200 shadow-sm focus:border-slate-500 focus:outline-none focus:ring-2 focus:ring-slate-500/30\"\n                  >\n                    <option value=\"\">Driver only</option>\n                    {comparisonOptions.map((option) => (\n                      <option key={option.id} value={option.id}>\n                        {option.name}\n                        {option.team ? ` • ${option.team}` : ''}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n              )}\n            </div>\n\n            {comparisonLoading && (\n              <div className=\"flex items-center gap-2 text-xs text-slate-400\">\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\n                <span>Loading comparison data…</span>\n              </div>\n            )}\n\n            {comparisonError && (\n              <div className=\"rounded-xl border border-rose-500/40 bg-rose-500/10 px-3 py-2 text-xs text-rose-200\">\n                {comparisonError}\n              </div>\n            )}\n\n            {overviewCards.length > 0 && (\n              <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4\">\n                {overviewCards.map((card) => {\n                  const Icon = card.icon;\n                  return (\n                    <div\n                      key={card.id}\n                      className=\"rounded-3xl border border-slate-200/40 bg-white/5 p-6 shadow-md backdrop-blur-lg dark:border-slate-800 dark:bg-slate-950/60\"\n                    >\n                      <div className=\"mb-4 flex items-center gap-3\">\n                        <div className={`flex h-10 w-10 items-center justify-center rounded-2xl ${card.iconClasses}`}>\n                          <Icon className=\"h-5 w-5\" />\n                        </div>\n                        <h3 className=\"text-base font-semibold text-slate-900 dark:text-slate-100\">\n                          {card.title}\n                        </h3>\n                      </div>\n                      <div className=\"space-y-3\">\n                        {card.metrics.map((metric) => (\n                          <div key={`${card.id}-${metric.label}`} className=\"flex items-center justify-between\">\n                            <span className=\"text-sm text-slate-500 dark:text-slate-400\">\n                              {metric.label}\n                            </span>\n                            <span className=\"text-base font-semibold text-slate-900 dark:text-slate-100\">\n                              {metric.value}\n                            </span>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n\n            <div className=\"grid grid-cols-1 gap-6 lg:grid-cols-2\">\n              {renderTrendChart('race')}\n              {renderTrendChart('qualifying')}\n            </div>\n          </div>\n\n          <DashboardTable<RaceRow>\n            title=\"Season Race Results\"\n            subtitle=\"Completed events for the current season\"\n            columns={raceTableColumns}\n            rows={raceTableRows}\n            rowKey={(row) => row.raceId || row.eventName}\n            onRowClick={\n              onRaceSelect\n                ? (row) => {\n                    if (row.raceId) {\n                      onRaceSelect(row.raceId);\n                    }\n                  }\n                : undefined\n            }\n            emptyMessage={raceTableEmptyMessage}\n            headerActions={\n              latestRaceId && onRaceSelect ? (\n                  <button\n                  onClick={() => onRaceSelect(latestRaceId)}\n                  className=\"inline-flex items-center gap-2 rounded-full border border-slate-700 px-3 py-1 text-xs font-semibold text-slate-300 transition hover:border-slate-500 hover:text-slate-100\"\n                  >\n                  View latest race\n                    <ChevronRight className=\"h-3 w-3\" />\n                  </button>\n              ) : undefined\n            }\n          />\n        </motion.section>\n      </motion.div>\n    </div>\n  );\n};\n"],"names":["HighlightBadge","label","jsxs","jsx","Star","createShortLabel","event","index","gpIndex","mapRaceHistoryEntry","entry","getPositionBadgeClass","position","buildSessionTypeList","sessionTypes","token","DriverSeasonStats","driverId","onRaceSelect","currentSeason","useSeason","analysis","loading","error","useSeasonAnalysis","seasonRaceHistory","setSeasonRaceHistory","useState","historyLoading","setHistoryLoading","historyError","setHistoryError","comparisonDriverId","setComparisonDriverId","comparisonHistoryCache","setComparisonHistoryCache","comparisonLoading","setComparisonLoading","comparisonError","setComparisonError","driverSummary","useMemo","driver","highlightBadges","labels","highlights","pushIfMatch","highlight","driverTeamDisplay","F123DataService","teamColorHex","cleanFinishes","overviewCards","averagePoints","Target","Trophy","Flag","Award","fetchSeasonRaceHistory","useCallback","targetDriverId","response","apiGet","payload","useEffect","cancelled","results","err","prev","completedEvents","_a","a","b","dateA","dateB","map","_b","driverHistoryMap","comparisonHistory","comparisonHistoryMap","raceRows","driverResult","raceDate","raceTableColumns","value","_value","row","formatDate","positionClass","positionDisplay","getResultStatus","session","trendData","driverEntry","comparisonEntry","averageRacePosition","total","count","point","averageQualifyingPosition","comparisonOptions","options","comparisonDriverSummary","buildTrendTooltip","chartType","active","datum","primary","comparison","formatFullDate","comparisonTeamColorHex","glowGradient","raceLineColor","BRAND_COLORS","qualLineColor","comparisonRaceLineColor","comparisonQualLineColor","isLoading","latestRaceId","raceTableRows","raceTableEmptyMessage","Loader2","renderTrendChart","primaryKey","comparisonKey","chartPositions","primaryValue","comparisonValue","maxDomainValue","hasPrimaryData","hasComparisonData","lines","average","BaseLineChart","_","easing","motion","option","card","Icon","metric","DashboardTable","ChevronRight"],"mappings":"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"}