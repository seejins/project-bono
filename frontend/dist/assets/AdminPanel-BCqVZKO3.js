import{e as bt,r as y,c as Ae,l as Ve,j as a,x as st,y as Dt,X as mr,U as fr,z as Ct,E as $e,G as at,t as Na,H as Sr,R as q,I as Sa,n as ka,J as ja,d as Et,b as Wn,T as Da,u as Ca,L as Ea,g as Ia,K as Kr}from"./index-446XYAQp.js";import{r as Aa,i as Pa}from"./tiny-invariant-CH88cG8v.js";import{P as _a}from"./pen-square-DHzjR_mT.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=bt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=bt("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=bt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=bt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=bt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pe.apply(null,arguments)}function Hn(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}const Oa=()=>{const[e,t]=y.useState([]),[r,n]=y.useState(!0),[s,o]=y.useState(!1),[i,l]=y.useState(!1),[c,d]=y.useState(null),[g,u]=y.useState({firstName:"",lastName:"",steam_id:""}),[p,m]=y.useState("idle"),[v,x]=y.useState(""),[b,j]=y.useState({}),[w,A]=y.useState({});y.useEffect(()=>{D()},[]);const D=async()=>{try{n(!0);const C=await Ae("/api/drivers");if(C.ok){const I=await C.json();t(I.drivers||[])}else throw new Error("Failed to load members")}catch(C){Ve.error("Error loading members:",C),m("error"),x("Failed to load members")}finally{n(!1)}},O=C=>C?/^\d{17}$/.test(C):!0,R=C=>C.replace(/\D/g,"").slice(0,17),L=C=>{const I=[C.firstName,C.lastName].filter(W=>!!W&&W.trim().length>0);return I.length>0?I.join(" "):C.name},B=C=>{if(C.firstName||C.lastName)return{firstName:C.firstName||"",lastName:C.lastName||""};const I=(C.name||"").trim();if(!I)return{firstName:"",lastName:""};const W=I.split(/\s+/),J=W.shift()||"",K=W.join(" ");return{firstName:J,lastName:K}},X=async()=>{const C={},I=g.firstName.trim(),W=g.lastName.trim();if(I||(C.firstName="First name is required"),W||(C.lastName="Last name is required"),g.steam_id&&!O(g.steam_id)&&(C.steam_id="Steam ID must be 17 digits"),Object.keys(C).length>0){j(C);return}j({});try{m("loading"),x("Adding member...");const J=await $e("/api/drivers",{firstName:I,lastName:W,name:`${I} ${W}`.trim(),steam_id:g.steam_id?R(g.steam_id):void 0});if(J.ok)m("success"),x("Member added successfully"),u({firstName:"",lastName:"",steam_id:""}),j({}),o(!1),D();else{const K=await J.json();throw new Error(K.message||"Failed to add member")}}catch(J){m("error"),x(J instanceof Error?J.message:"Failed to add member")}},_=C=>{const{firstName:I,lastName:W}=B(C);d({...C,firstName:I,lastName:W}),l(!0)},F=async()=>{var J,K;if(!c)return;const C={},I=((J=c.firstName)==null?void 0:J.trim())||"",W=((K=c.lastName)==null?void 0:K.trim())||"";if(I||(C.firstName="First name is required"),W||(C.lastName="Last name is required"),c.steam_id&&!O(c.steam_id)&&(C.steam_id="Steam ID must be 17 digits"),Object.keys(C).length>0){A(C);return}A({});try{m("loading"),x("Updating member...");const ue=await at(`/api/drivers/${c.id}`,{firstName:I,lastName:W,name:`${I} ${W}`.trim(),steam_id:c.steam_id?R(c.steam_id):void 0});if(ue.ok)m("success"),x("Member updated successfully"),A({}),l(!1),d(null),D();else{const ee=await ue.json();throw new Error(ee.message||"Failed to update member")}}catch(ue){m("error"),x(ue instanceof Error?ue.message:"Failed to update member")}},T=async C=>{if(confirm("Are you sure you want to delete this member? This action cannot be undone."))try{m("loading"),x("Deleting member...");const I=await Ct(`/api/drivers/${C}`);if(I.ok)m("success"),x("Member deleted successfully"),D();else{const W=await I.json();throw new Error(W.message||"Failed to delete member")}}catch(I){m("error"),x(I instanceof Error?I.message:"Failed to delete member")}},M=()=>{m("idle"),x("")};return r?a.jsxs("div",{className:"flex items-center justify-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"}),a.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"Loading members..."})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"League Members"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage your league participants"})]}),a.jsxs("button",{onClick:()=>o(!0),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[a.jsx(lt,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Member"})]})]}),p!=="idle"&&a.jsxs("div",{className:`p-4 rounded-lg flex items-center justify-between ${p==="success"?"bg-green-500/20 text-green-400":p==="error"?"bg-red-500/20 text-red-400":"bg-blue-500/20 text-blue-400"}`,children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[p==="success"&&a.jsx(st,{className:"w-5 h-5"}),p==="error"&&a.jsx(Dt,{className:"w-5 h-5"}),p==="loading"&&a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-400"}),a.jsx("span",{children:v})]}),a.jsx("button",{onClick:M,className:"text-gray-400 hover:text-gray-600",children:a.jsx(mr,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 shadow-sm",children:e.length>0?a.jsx("div",{className:"flex flex-col gap-3",children:e.map(C=>a.jsxs("div",{className:"relative flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors cursor-pointer z-10",onClick:()=>_(C),children:[a.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[a.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center text-white font-bold",children:L(C).charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:L(C)}),a.jsx("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:C.steam_id&&a.jsxs("span",{children:["Steam ID: ",C.steam_id]})})]})]}),a.jsx("div",{className:"flex items-center space-x-2",onClick:I=>I.stopPropagation(),children:a.jsxs("button",{onClick:()=>T(C.id),className:"text-gray-400 hover:text-red-500 transition-colors px-2 py-1 rounded text-sm flex items-center space-x-1",children:[a.jsx(ct,{className:"w-3 h-3"}),a.jsx("span",{children:"Delete"})]})})]},C.id))}):a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx(fr,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"No members added yet"}),a.jsx("p",{className:"text-sm",children:"Add your first member to get started"})]})}),s&&a.jsx("div",{className:"modal-overlay",onClick:()=>o(!1),children:a.jsxs("div",{className:"modal-panel max-w-md p-6",onClick:C=>C.stopPropagation(),children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Add Member"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"First Name *"}),a.jsx("input",{type:"text",value:g.firstName,onChange:C=>{u({...g,firstName:C.target.value}),b.firstName&&j({...b,firstName:void 0})},className:`w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 ${b.firstName?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-red-500"}`,placeholder:"e.g., Lewis"}),b.firstName&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:b.firstName})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last Name *"}),a.jsx("input",{type:"text",value:g.lastName,onChange:C=>{u({...g,lastName:C.target.value}),b.lastName&&j({...b,lastName:void 0})},className:`w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 ${b.lastName?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-red-500"}`,placeholder:"e.g., Hamilton"}),b.lastName&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:b.lastName})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Steam ID (Optional)"}),a.jsx("input",{type:"text",value:g.steam_id,onChange:C=>{u({...g,steam_id:R(C.target.value)}),b.steam_id&&j({...b,steam_id:void 0})},className:`w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 ${b.steam_id?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-red-500"}`,placeholder:"e.g., 76561198000000000",maxLength:17}),b.steam_id?a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:b.steam_id}):a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"17-digit Steam ID for F1 23 UDP mapping"})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsx("button",{onClick:()=>{o(!1),u({firstName:"",lastName:"",steam_id:""}),M()},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:X,disabled:p==="loading",className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white rounded-lg transition-colors",children:p==="loading"?"Adding...":"Add Member"})]})]})}),i&&c&&a.jsx("div",{className:"modal-overlay",onClick:()=>l(!1),children:a.jsxs("div",{className:"modal-panel max-w-md p-6",onClick:C=>C.stopPropagation(),children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Edit Member"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"First Name *"}),a.jsx("input",{type:"text",value:c.firstName||"",onChange:C=>{d({...c,firstName:C.target.value}),w.firstName&&A({...w,firstName:void 0})},className:`w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 ${w.firstName?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-red-500"}`,placeholder:"e.g., Lewis"}),w.firstName&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:w.firstName})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last Name *"}),a.jsx("input",{type:"text",value:c.lastName||"",onChange:C=>{d({...c,lastName:C.target.value}),w.lastName&&A({...w,lastName:void 0})},className:`w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 ${w.lastName?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-red-500"}`,placeholder:"e.g., Hamilton"}),w.lastName&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:w.lastName})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Steam ID (Optional)"}),a.jsx("input",{type:"text",value:c.steam_id||"",onChange:C=>{d({...c,steam_id:R(C.target.value)}),w.steam_id&&A({...w,steam_id:void 0})},className:`w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 ${w.steam_id?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-red-500"}`,placeholder:"e.g., 76561198000000000",maxLength:17}),w.steam_id?a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:w.steam_id}):a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"17-digit Steam ID for F1 23 UDP mapping"})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsx("button",{onClick:()=>{l(!1),d(null),M()},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:F,disabled:p==="loading",className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white rounded-lg transition-colors",children:p==="loading"?"Updating...":"Update Member"})]})]})})]})};function dt(e){"@babel/helpers - typeof";return dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(e)}function Ta(e,t){if(dt(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ba(e){var t=Ta(e,"string");return dt(t)=="symbol"?t:t+""}function Ma(e,t,r){return(t=Ba(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function en(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zr(Object(r),!0).forEach(function(n){Ma(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zr(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function de(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var tn=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),rn=function(){return Math.random().toString(36).substring(7).split("").join(".")},nn={INIT:"@@redux/INIT"+rn(),REPLACE:"@@redux/REPLACE"+rn()};function Fa(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function qn(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(de(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(de(1));return r(qn)(e,t)}if(typeof e!="function")throw new Error(de(2));var s=e,o=t,i=[],l=i,c=!1;function d(){l===i&&(l=i.slice())}function g(){if(c)throw new Error(de(3));return o}function u(x){if(typeof x!="function")throw new Error(de(4));if(c)throw new Error(de(5));var b=!0;return d(),l.push(x),function(){if(b){if(c)throw new Error(de(6));b=!1,d();var w=l.indexOf(x);l.splice(w,1),i=null}}}function p(x){if(!Fa(x))throw new Error(de(7));if(typeof x.type>"u")throw new Error(de(8));if(c)throw new Error(de(9));try{c=!0,o=s(o,x)}finally{c=!1}for(var b=i=l,j=0;j<b.length;j++){var w=b[j];w()}return x}function m(x){if(typeof x!="function")throw new Error(de(10));s=x,p({type:nn.REPLACE})}function v(){var x,b=u;return x={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(de(11));function A(){w.next&&w.next(g())}A();var D=b(A);return{unsubscribe:D}}},x[tn]=function(){return this},x}return p({type:nn.INIT}),n={dispatch:p,subscribe:u,getState:g,replaceReducer:m},n[tn]=v,n}function sn(e,t){return function(){return t(e.apply(this,arguments))}}function an(e,t){if(typeof e=="function")return sn(e,t);if(typeof e!="object"||e===null)throw new Error(de(16));var r={};for(var n in e){var s=e[n];typeof s=="function"&&(r[n]=sn(s,t))}return r}function zn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,s){return function(){return n(s.apply(void 0,arguments))}})}function La(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var s=n.apply(void 0,arguments),o=function(){throw new Error(de(15))},i={getState:s.getState,dispatch:function(){return o.apply(void 0,arguments)}},l=t.map(function(c){return c(i)});return o=zn.apply(void 0,l)(s.dispatch),en(en({},s),{},{dispatch:o})}}}var Yn={exports:{}},Qn={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var He=y;function $a(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ga=typeof Object.is=="function"?Object.is:$a,Ua=He.useState,Wa=He.useEffect,Va=He.useLayoutEffect,Ha=He.useDebugValue;function qa(e,t){var r=t(),n=Ua({inst:{value:r,getSnapshot:t}}),s=n[0].inst,o=n[1];return Va(function(){s.value=r,s.getSnapshot=t,nr(s)&&o({inst:s})},[e,r,t]),Wa(function(){return nr(s)&&o({inst:s}),e(function(){nr(s)&&o({inst:s})})},[e]),Ha(r),r}function nr(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ga(e,r)}catch{return!0}}function za(e,t){return t()}var Ya=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?za:qa;Qn.useSyncExternalStore=He.useSyncExternalStore!==void 0?He.useSyncExternalStore:Ya;Yn.exports=Qn;var Jn=Yn.exports,Qa={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mt=y,Ja=Jn;function Ka(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xa=typeof Object.is=="function"?Object.is:Ka,Za=Ja.useSyncExternalStore,eo=Mt.useRef,to=Mt.useEffect,ro=Mt.useMemo,no=Mt.useDebugValue;Qa.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var o=eo(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=ro(function(){function c(m){if(!d){if(d=!0,g=m,m=n(m),s!==void 0&&i.hasValue){var v=i.value;if(s(v,m))return u=v}return u=m}if(v=u,Xa(g,m))return v;var x=n(m);return s!==void 0&&s(v,x)?(g=m,v):(g=m,u=x)}var d=!1,g,u,p=r===void 0?null:r;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,r,n,s]);var l=Za(e,o[0],o[1]);return to(function(){i.hasValue=!0,i.value=l},[l]),no(l),l};function so(e){e()}let Kn=so;const ao=e=>Kn=e,oo=()=>Kn,on=Symbol.for("react-redux-context"),ln=typeof globalThis<"u"?globalThis:{};function io(){var e;if(!y.createContext)return{};const t=(e=ln[on])!=null?e:ln[on]=new Map;let r=t.get(y.createContext);return r||(r=y.createContext(null),t.set(y.createContext,r)),r}const Xn=io(),lo=()=>{throw new Error("uSES not initialized!")};var Zn={exports:{}},z={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ne=typeof Symbol=="function"&&Symbol.for,kr=ne?Symbol.for("react.element"):60103,jr=ne?Symbol.for("react.portal"):60106,Ft=ne?Symbol.for("react.fragment"):60107,Lt=ne?Symbol.for("react.strict_mode"):60108,$t=ne?Symbol.for("react.profiler"):60114,Gt=ne?Symbol.for("react.provider"):60109,Ut=ne?Symbol.for("react.context"):60110,Dr=ne?Symbol.for("react.async_mode"):60111,Wt=ne?Symbol.for("react.concurrent_mode"):60111,Vt=ne?Symbol.for("react.forward_ref"):60112,Ht=ne?Symbol.for("react.suspense"):60113,co=ne?Symbol.for("react.suspense_list"):60120,qt=ne?Symbol.for("react.memo"):60115,zt=ne?Symbol.for("react.lazy"):60116,uo=ne?Symbol.for("react.block"):60121,po=ne?Symbol.for("react.fundamental"):60117,go=ne?Symbol.for("react.responder"):60118,mo=ne?Symbol.for("react.scope"):60119;function fe(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case kr:switch(e=e.type,e){case Dr:case Wt:case Ft:case $t:case Lt:case Ht:return e;default:switch(e=e&&e.$$typeof,e){case Ut:case Vt:case zt:case qt:case Gt:return e;default:return t}}case jr:return t}}}function es(e){return fe(e)===Wt}z.AsyncMode=Dr;z.ConcurrentMode=Wt;z.ContextConsumer=Ut;z.ContextProvider=Gt;z.Element=kr;z.ForwardRef=Vt;z.Fragment=Ft;z.Lazy=zt;z.Memo=qt;z.Portal=jr;z.Profiler=$t;z.StrictMode=Lt;z.Suspense=Ht;z.isAsyncMode=function(e){return es(e)||fe(e)===Dr};z.isConcurrentMode=es;z.isContextConsumer=function(e){return fe(e)===Ut};z.isContextProvider=function(e){return fe(e)===Gt};z.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===kr};z.isForwardRef=function(e){return fe(e)===Vt};z.isFragment=function(e){return fe(e)===Ft};z.isLazy=function(e){return fe(e)===zt};z.isMemo=function(e){return fe(e)===qt};z.isPortal=function(e){return fe(e)===jr};z.isProfiler=function(e){return fe(e)===$t};z.isStrictMode=function(e){return fe(e)===Lt};z.isSuspense=function(e){return fe(e)===Ht};z.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ft||e===Wt||e===$t||e===Lt||e===Ht||e===co||typeof e=="object"&&e!==null&&(e.$$typeof===zt||e.$$typeof===qt||e.$$typeof===Gt||e.$$typeof===Ut||e.$$typeof===Vt||e.$$typeof===po||e.$$typeof===go||e.$$typeof===mo||e.$$typeof===uo)};z.typeOf=fe;Zn.exports=z;var fo=Zn.exports,Cr=fo,ho={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},xo={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},bo={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ts={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Er={};Er[Cr.ForwardRef]=bo;Er[Cr.Memo]=ts;function cn(e){return Cr.isMemo(e)?ts:Er[e.$$typeof]||ho}var yo=Object.defineProperty,vo=Object.getOwnPropertyNames,dn=Object.getOwnPropertySymbols,wo=Object.getOwnPropertyDescriptor,No=Object.getPrototypeOf,un=Object.prototype;function rs(e,t,r){if(typeof t!="string"){if(un){var n=No(t);n&&n!==un&&rs(e,n,r)}var s=vo(t);dn&&(s=s.concat(dn(t)));for(var o=cn(e),i=cn(t),l=0;l<s.length;++l){var c=s[l];if(!xo[c]&&!(r&&r[c])&&!(i&&i[c])&&!(o&&o[c])){var d=wo(t,c);try{yo(e,c,d)}catch{}}}}return e}var So=rs;const pn=Na(So),ko=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function jo(e,t,r,n,{areStatesEqual:s,areOwnPropsEqual:o,areStatePropsEqual:i}){let l=!1,c,d,g,u,p;function m(w,A){return c=w,d=A,g=e(c,d),u=t(n,d),p=r(g,u,d),l=!0,p}function v(){return g=e(c,d),t.dependsOnOwnProps&&(u=t(n,d)),p=r(g,u,d),p}function x(){return e.dependsOnOwnProps&&(g=e(c,d)),t.dependsOnOwnProps&&(u=t(n,d)),p=r(g,u,d),p}function b(){const w=e(c,d),A=!i(w,g);return g=w,A&&(p=r(g,u,d)),p}function j(w,A){const D=!o(A,d),O=!s(w,c,A,d);return c=w,d=A,D&&O?v():D?x():O?b():p}return function(A,D){return l?j(A,D):m(A,D)}}function Do(e,t){let{initMapStateToProps:r,initMapDispatchToProps:n,initMergeProps:s}=t,o=Hn(t,ko);const i=r(e,o),l=n(e,o),c=s(e,o);return jo(i,l,c,e,o)}function Co(e,t){const r={};for(const n in e){const s=e[n];typeof s=="function"&&(r[n]=(...o)=>t(s(...o)))}return r}function hr(e){return function(r){const n=e(r);function s(){return n}return s.dependsOnOwnProps=!1,s}}function gn(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function ns(e,t){return function(n,{displayName:s}){const o=function(l,c){return o.dependsOnOwnProps?o.mapToProps(l,c):o.mapToProps(l,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(l,c){o.mapToProps=e,o.dependsOnOwnProps=gn(e);let d=o(l,c);return typeof d=="function"&&(o.mapToProps=d,o.dependsOnOwnProps=gn(d),d=o(l,c)),d},o}}function Ir(e,t){return(r,n)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${n.wrappedComponentName}.`)}}function Eo(e){return e&&typeof e=="object"?hr(t=>Co(e,t)):e?typeof e=="function"?ns(e):Ir(e,"mapDispatchToProps"):hr(t=>({dispatch:t}))}function Io(e){return e?typeof e=="function"?ns(e):Ir(e,"mapStateToProps"):hr(()=>({}))}function Ao(e,t,r){return Pe({},r,e,t)}function Po(e){return function(r,{displayName:n,areMergedPropsEqual:s}){let o=!1,i;return function(c,d,g){const u=e(c,d,g);return o?s(u,i)||(i=u):(o=!0,i=u),i}}}function _o(e){return e?typeof e=="function"?Po(e):Ir(e,"mergeProps"):()=>Ao}function Ro(){const e=oo();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){let n=[],s=t;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0,o=r={callback:n,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){!s||t===null||(s=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}const mn={notify(){},get:()=>[]};function ss(e,t){let r,n=mn,s=0,o=!1;function i(x){g();const b=n.subscribe(x);let j=!1;return()=>{j||(j=!0,b(),u())}}function l(){n.notify()}function c(){v.onStateChange&&v.onStateChange()}function d(){return o}function g(){s++,r||(r=t?t.addNestedSub(c):e.subscribe(c),n=Ro())}function u(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=mn)}function p(){o||(o=!0,g())}function m(){o&&(o=!1,u())}const v={addNestedSub:i,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:p,tryUnsubscribe:m,getListeners:()=>n};return v}const Oo=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",It=Oo?y.useLayoutEffect:y.useEffect;function fn(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function sr(e,t){if(fn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(t,r[s])||!fn(e[r[s]],t[r[s]]))return!1;return!0}const To=["reactReduxForwardedRef"];let as=lo;const Bo=e=>{as=e},Mo=[null,null];function Fo(e,t,r){It(()=>e(...t),r)}function Lo(e,t,r,n,s,o){e.current=n,r.current=!1,s.current&&(s.current=null,o())}function $o(e,t,r,n,s,o,i,l,c,d,g){if(!e)return()=>{};let u=!1,p=null;const m=()=>{if(u||!l.current)return;const x=t.getState();let b,j;try{b=n(x,s.current)}catch(w){j=w,p=w}j||(p=null),b===o.current?i.current||d():(o.current=b,c.current=b,i.current=!0,g())};return r.onStateChange=m,r.trySubscribe(),m(),()=>{if(u=!0,r.tryUnsubscribe(),r.onStateChange=null,p)throw p}}function Go(e,t){return e===t}function os(e,t,r,{pure:n,areStatesEqual:s=Go,areOwnPropsEqual:o=sr,areStatePropsEqual:i=sr,areMergedPropsEqual:l=sr,forwardRef:c=!1,context:d=Xn}={}){const g=d,u=Io(e),p=Eo(t),m=_o(r),v=!!e;return b=>{const j=b.displayName||b.name||"Component",w=`Connect(${j})`,A={shouldHandleStateChanges:v,displayName:w,wrappedComponentName:j,WrappedComponent:b,initMapStateToProps:u,initMapDispatchToProps:p,initMergeProps:m,areStatesEqual:s,areStatePropsEqual:i,areOwnPropsEqual:o,areMergedPropsEqual:l};function D(L){const[B,X,_]=y.useMemo(()=>{const{reactReduxForwardedRef:Z}=L,De=Hn(L,To);return[L.context,Z,De]},[L]),F=y.useMemo(()=>B&&B.Consumer&&Aa.isContextConsumer(y.createElement(B.Consumer,null))?B:g,[B,g]),T=y.useContext(F),M=!!L.store&&!!L.store.getState&&!!L.store.dispatch,C=!!T&&!!T.store,I=M?L.store:T.store,W=C?T.getServerState:I.getState,J=y.useMemo(()=>Do(I.dispatch,A),[I]),[K,ue]=y.useMemo(()=>{if(!v)return Mo;const Z=ss(I,M?void 0:T.subscription),De=Z.notifyNestedSubs.bind(Z);return[Z,De]},[I,M,T]),ee=y.useMemo(()=>M?T:Pe({},T,{subscription:K}),[M,T,K]),ce=y.useRef(),ke=y.useRef(_),we=y.useRef(),ie=y.useRef(!1);y.useRef(!1);const U=y.useRef(!1),Ee=y.useRef();It(()=>(U.current=!0,()=>{U.current=!1}),[]);const V=y.useMemo(()=>()=>we.current&&_===ke.current?we.current:J(I.getState(),_),[I,_]),Xe=y.useMemo(()=>De=>K?$o(v,I,K,J,ke,ce,ie,U,we,ue,De):()=>{},[K]);Fo(Lo,[ke,ce,ie,_,we,ue]);let Se;try{Se=as(Xe,V,W?()=>J(W(),_):V)}catch(Z){throw Ee.current&&(Z.message+=`
The error may be correlated with this previous error:
${Ee.current.stack}

`),Z}It(()=>{Ee.current=void 0,we.current=void 0,ce.current=Se});const je=y.useMemo(()=>y.createElement(b,Pe({},Se,{ref:X})),[X,b,Se]);return y.useMemo(()=>v?y.createElement(F.Provider,{value:ee},je):je,[F,je,ee])}const R=y.memo(D);if(R.WrappedComponent=b,R.displayName=D.displayName=w,c){const B=y.forwardRef(function(_,F){return y.createElement(R,Pe({},_,{reactReduxForwardedRef:F}))});return B.displayName=w,B.WrappedComponent=b,pn(B,b)}return pn(R,b)}}function Uo({store:e,context:t,children:r,serverState:n,stabilityCheck:s="once",noopCheck:o="once"}){const i=y.useMemo(()=>{const d=ss(e);return{store:e,subscription:d,getServerState:n?()=>n:void 0,stabilityCheck:s,noopCheck:o}},[e,n,s,o]),l=y.useMemo(()=>e.getState(),[e]);It(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==e.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,l]);const c=t||Xn;return y.createElement(c.Provider,{value:i},r)}Bo(Jn.useSyncExternalStore);ao(Sr.unstable_batchedUpdates);function Wo(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function is(e,t){var r=y.useState(function(){return{inputs:t,result:e()}})[0],n=y.useRef(!0),s=y.useRef(r),o=n.current||!!(t&&s.current.inputs&&Wo(t,s.current.inputs)),i=o?s.current:{inputs:t,result:e()};return y.useEffect(function(){n.current=!1,s.current=i},[i]),i.result}function Vo(e,t){return is(function(){return e},t)}var G=is,P=Vo,Ne=function(t){var r=t.top,n=t.right,s=t.bottom,o=t.left,i=n-o,l=s-r,c={top:r,right:n,bottom:s,left:o,width:i,height:l,x:o,y:r,center:{x:(n+o)/2,y:(s+r)/2}};return c},Ar=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},hn=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},Ho=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},ar={top:0,right:0,bottom:0,left:0},Pr=function(t){var r=t.borderBox,n=t.margin,s=n===void 0?ar:n,o=t.border,i=o===void 0?ar:o,l=t.padding,c=l===void 0?ar:l,d=Ne(Ar(r,s)),g=Ne(hn(r,i)),u=Ne(hn(g,c));return{marginBox:d,borderBox:Ne(r),paddingBox:g,contentBox:u,margin:s,border:i,padding:c}},be=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var s=Number(r);return isNaN(s)&&Pa(),s},qo=function(){return{x:window.pageXOffset,y:window.pageYOffset}},At=function(t,r){var n=t.borderBox,s=t.border,o=t.margin,i=t.padding,l=Ho(n,r);return Pr({borderBox:l,border:s,margin:o,padding:i})},Pt=function(t,r){return r===void 0&&(r=qo()),At(t,r)},ls=function(t,r){var n={top:be(r.marginTop),right:be(r.marginRight),bottom:be(r.marginBottom),left:be(r.marginLeft)},s={top:be(r.paddingTop),right:be(r.paddingRight),bottom:be(r.paddingBottom),left:be(r.paddingLeft)},o={top:be(r.borderTopWidth),right:be(r.borderRightWidth),bottom:be(r.borderBottomWidth),left:be(r.borderLeftWidth)};return Pr({borderBox:t,margin:n,padding:s,border:o})},cs=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return ls(r,n)},xn=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function zo(e,t){return!!(e===t||xn(e)&&xn(t))}function Yo(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!zo(e[r],t[r]))return!1;return!0}function te(e,t){t===void 0&&(t=Yo);var r=null;function n(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;var i=e.apply(this,s);return r={lastResult:i,lastArgs:s,lastThis:this},i}return n.clear=function(){r=null},n}var ut=function(t){var r=[],n=null,s=function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];r=l,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return s.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},s};function ds(e,t){}ds.bind(null,"warn");ds.bind(null,"error");function _e(){}function Qo(e,t){return{...e,...t}}function ye(e,t,r){const n=t.map(s=>{const o=Qo(r,s.options);return e.addEventListener(s.eventName,s.fn,o),function(){e.removeEventListener(s.eventName,s.fn,o)}});return function(){n.forEach(o=>{o()})}}const Jo="Invariant failed";class _t extends Error{}_t.prototype.toString=function(){return this.message};function S(e,t){throw new _t(Jo)}class Ko extends q.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=_e,this.onWindowError=r=>{const n=this.getCallbacks();n.isDragging()&&n.tryAbort(),r.error instanceof _t&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=ye(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof _t){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const Xo=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Rt=e=>e+1,Zo=e=>`
  You have lifted an item in position ${Rt(e.source.index)}
`,us=(e,t)=>{const r=e.droppableId===t.droppableId,n=Rt(e.index),s=Rt(t.index);return r?`
      You have moved the item from position ${n}
      to position ${s}
    `:`
    You have moved the item from position ${n}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${s}
  `},ps=(e,t,r)=>t.droppableId===r.droppableId?`
      The item ${e}
      has been combined with ${r.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,ei=e=>{const t=e.destination;if(t)return us(e.source,t);const r=e.combine;return r?ps(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},bn=e=>`
  The item has returned to its starting position
  of ${Rt(e.index)}
`,ti=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${bn(e.source)}
    `;const t=e.destination,r=e.combine;return t?`
      You have dropped the item.
      ${us(e.source,t)}
    `:r?`
      You have dropped the item.
      ${ps(e.draggableId,e.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${bn(e.source)}
  `},ri={dragHandleUsageInstructions:Xo,onDragStart:Zo,onDragUpdate:ei,onDragEnd:ti};var jt=ri;const re={x:0,y:0},se=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),pe=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Re=(e,t)=>e.x===t.x&&e.y===t.y,Qe=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),Ge=(e,t,r=0)=>e==="x"?{x:t,y:r}:{x:r,y:t},pt=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),yn=(e,t)=>Math.min(...t.map(r=>pt(e,r))),gs=e=>t=>({x:e(t.x),y:e(t.y)});var ni=(e,t)=>{const r=Ne({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r};const yt=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),vn=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],si={top:0,right:0,bottom:0,left:0},ai=(e,t)=>t?yt(e,t.scroll.diff.displacement):e,oi=(e,t,r)=>r&&r.increasedBy?{...e,[t.end]:e[t.end]+r.increasedBy[t.line]}:e,ii=(e,t)=>t&&t.shouldClipSubject?ni(t.pageMarginBox,e):Ne(e);var qe=({page:e,withPlaceholder:t,axis:r,frame:n})=>{const s=ai(e.marginBox,n),o=oi(s,r,t),i=ii(o,n);return{page:e,withPlaceholder:t,active:i}},_r=(e,t)=>{e.frame||S();const r=e.frame,n=pe(t,r.scroll.initial),s=Qe(n),o={...r,scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:s},max:r.scroll.max}},i=qe({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o});return{...e,frame:o,subject:i}};const ms=te(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),fs=te(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),Yt=te(e=>Object.values(e)),li=te(e=>Object.values(e));var Je=te((e,t)=>li(t).filter(n=>e===n.descriptor.droppableId).sort((n,s)=>n.descriptor.index-s.descriptor.index));function Rr(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Qt(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Jt=te((e,t)=>t.filter(r=>r.descriptor.id!==e.descriptor.id)),ci=({isMovingForward:e,draggable:t,destination:r,insideDestination:n,previousImpact:s})=>{if(!r.isCombineEnabled||!Rr(s))return null;function i(m){const v={type:"COMBINE",combine:{draggableId:m,droppableId:r.descriptor.id}};return{...s,at:v}}const l=s.displaced.all,c=l.length?l[0]:null;if(e)return c?i(c):null;const d=Jt(t,n);if(!c){if(!d.length)return null;const m=d[d.length-1];return i(m.descriptor.id)}const g=d.findIndex(m=>m.descriptor.id===c);g===-1&&S();const u=g-1;if(u<0)return null;const p=d[u];return i(p.descriptor.id)},Ke=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const hs={point:re,value:0},gt={invisible:{},visible:{},all:[]},di={displaced:gt,displacedBy:hs,at:null};var ui=di,ve=(e,t)=>r=>e<=r&&r<=t,xs=e=>{const t=ve(e.top,e.bottom),r=ve(e.left,e.right);return n=>{if(t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right))return!0;const o=t(n.top)||t(n.bottom),i=r(n.left)||r(n.right);if(o&&i)return!0;const c=n.top<e.top&&n.bottom>e.bottom,d=n.left<e.left&&n.right>e.right;return c&&d?!0:c&&i||d&&o}},pi=e=>{const t=ve(e.top,e.bottom),r=ve(e.left,e.right);return n=>t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right)};const Or={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},bs={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var gi=e=>t=>{const r=ve(t.top,t.bottom),n=ve(t.left,t.right);return s=>e===Or?r(s.top)&&r(s.bottom):n(s.left)&&n(s.right)};const mi=(e,t)=>{const r=t.frame?t.frame.scroll.diff.displacement:re;return yt(e,r)},fi=(e,t,r)=>t.subject.active?r(t.subject.active)(e):!1,hi=(e,t,r)=>r(t)(e),Tr=({target:e,destination:t,viewport:r,withDroppableDisplacement:n,isVisibleThroughFrameFn:s})=>{const o=n?mi(e,t):e;return fi(o,t,s)&&hi(o,r,s)},xi=e=>Tr({...e,isVisibleThroughFrameFn:xs}),ys=e=>Tr({...e,isVisibleThroughFrameFn:pi}),bi=e=>Tr({...e,isVisibleThroughFrameFn:gi(e.destination.axis)}),yi=(e,t,r)=>{if(typeof r=="boolean")return r;if(!t)return!0;const{invisible:n,visible:s}=t;if(n[e])return!1;const o=s[e];return o?o.shouldAnimate:!0};function vi(e,t){const r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return Ne(Ar(r,n))}function mt({afterDragging:e,destination:t,displacedBy:r,viewport:n,forceShouldAnimate:s,last:o}){return e.reduce(function(l,c){const d=vi(c,r),g=c.descriptor.id;if(l.all.push(g),!xi({target:d,destination:t,viewport:n,withDroppableDisplacement:!0}))return l.invisible[c.descriptor.id]=!0,l;const p=yi(g,o,s),m={draggableId:g,shouldAnimate:p};return l.visible[g]=m,l},{all:[],visible:{},invisible:{}})}function wi(e,t){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function wn({insideDestination:e,inHomeList:t,displacedBy:r,destination:n}){const s=wi(e,{inHomeList:t});return{displaced:gt,displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:s}}}}function Ot({draggable:e,insideDestination:t,destination:r,viewport:n,displacedBy:s,last:o,index:i,forceShouldAnimate:l}){const c=Ke(e,r);if(i==null)return wn({insideDestination:t,inHomeList:c,displacedBy:s,destination:r});const d=t.find(v=>v.descriptor.index===i);if(!d)return wn({insideDestination:t,inHomeList:c,displacedBy:s,destination:r});const g=Jt(e,t),u=t.indexOf(d),p=g.slice(u);return{displaced:mt({afterDragging:p,destination:r,displacedBy:s,last:o,viewport:n.frame,forceShouldAnimate:l}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function Oe(e,t){return!!t.effected[e]}var Ni=({isMovingForward:e,destination:t,draggables:r,combine:n,afterCritical:s})=>{if(!t.isCombineEnabled)return null;const o=n.draggableId,l=r[o].descriptor.index;return Oe(o,s)?e?l:l-1:e?l+1:l},Si=({isMovingForward:e,isInHomeList:t,insideDestination:r,location:n})=>{if(!r.length)return null;const s=n.index,o=e?s+1:s-1,i=r[0].descriptor.index,l=r[r.length-1].descriptor.index,c=t?l:l+1;return o<i||o>c?null:o},ki=({isMovingForward:e,isInHomeList:t,draggable:r,draggables:n,destination:s,insideDestination:o,previousImpact:i,viewport:l,afterCritical:c})=>{const d=i.at;if(d||S(),d.type==="REORDER"){const u=Si({isMovingForward:e,isInHomeList:t,location:d.destination,insideDestination:o});return u==null?null:Ot({draggable:r,insideDestination:o,destination:s,viewport:l,last:i.displaced,displacedBy:i.displacedBy,index:u})}const g=Ni({isMovingForward:e,destination:s,displaced:i.displaced,draggables:n,combine:d.combine,afterCritical:c});return g==null?null:Ot({draggable:r,insideDestination:o,destination:s,viewport:l,last:i.displaced,displacedBy:i.displacedBy,index:g})},ji=({displaced:e,afterCritical:t,combineWith:r,displacedBy:n})=>{const s=!!(e.visible[r]||e.invisible[r]);return Oe(r,t)?s?re:Qe(n.point):s?n.point:re},Di=({afterCritical:e,impact:t,draggables:r})=>{const n=Qt(t);n||S();const s=n.draggableId,o=r[s].page.borderBox.center,i=ji({displaced:t.displaced,afterCritical:e,combineWith:s,displacedBy:t.displacedBy});return se(o,i)};const vs=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,Ci=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,Br=(e,t,r)=>t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,Nn=({axis:e,moveRelativeTo:t,isMoving:r})=>Ge(e.line,t.marginBox[e.end]+vs(e,r),Br(e,t.marginBox,r)),Sn=({axis:e,moveRelativeTo:t,isMoving:r})=>Ge(e.line,t.marginBox[e.start]-Ci(e,r),Br(e,t.marginBox,r)),Ei=({axis:e,moveInto:t,isMoving:r})=>Ge(e.line,t.contentBox[e.start]+vs(e,r),Br(e,t.contentBox,r));var Ii=({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:s})=>{const o=Je(n.descriptor.id,r),i=t.page,l=n.axis;if(!o.length)return Ei({axis:l,moveInto:n.page,isMoving:i});const{displaced:c,displacedBy:d}=e,g=c.all[0];if(g){const p=r[g];if(Oe(g,s))return Sn({axis:l,moveRelativeTo:p.page,isMoving:i});const m=At(p.page,d.point);return Sn({axis:l,moveRelativeTo:m,isMoving:i})}const u=o[o.length-1];if(u.descriptor.id===t.descriptor.id)return i.borderBox.center;if(Oe(u.descriptor.id,s)){const p=At(u.page,Qe(s.displacedBy.point));return Nn({axis:l,moveRelativeTo:p,isMoving:i})}return Nn({axis:l,moveRelativeTo:u.page,isMoving:i})},xr=(e,t)=>{const r=e.frame;return r?se(t,r.scroll.diff.displacement):t};const Ai=({impact:e,draggable:t,droppable:r,draggables:n,afterCritical:s})=>{const o=t.page.borderBox.center,i=e.at;return!r||!i?o:i.type==="REORDER"?Ii({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:s}):Di({impact:e,draggables:n,afterCritical:s})};var Kt=e=>{const t=Ai(e),r=e.droppable;return r?xr(r,t):t},ws=(e,t)=>{const r=pe(t,e.scroll.initial),n=Qe(r);return{frame:Ne({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}}};function kn(e,t){return e.map(r=>t[r])}function Pi(e,t){for(let r=0;r<t.length;r++){const n=t[r].visible[e];if(n)return n}return null}var _i=({impact:e,viewport:t,destination:r,draggables:n,maxScrollChange:s})=>{const o=ws(t,se(t.scroll.current,s)),i=r.frame?_r(r,se(r.frame.scroll.current,s)):r,l=e.displaced,c=mt({afterDragging:kn(l.all,n),destination:r,displacedBy:e.displacedBy,viewport:o.frame,last:l,forceShouldAnimate:!1}),d=mt({afterDragging:kn(l.all,n),destination:i,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),g={},u={},p=[l,c,d];return l.all.forEach(v=>{const x=Pi(v,p);if(x){u[v]=x;return}g[v]=!0}),{...e,displaced:{all:l.all,invisible:g,visible:u}}},Ri=(e,t)=>se(e.scroll.diff.displacement,t),Mr=({pageBorderBoxCenter:e,draggable:t,viewport:r})=>{const n=Ri(r,e),s=pe(n,t.page.borderBox.center);return se(t.client.borderBox.center,s)},Ns=({draggable:e,destination:t,newPageBorderBoxCenter:r,viewport:n,withDroppableDisplacement:s,onlyOnMainAxis:o=!1})=>{const i=pe(r,e.page.borderBox.center),c={target:yt(e.page.borderBox,i),destination:t,withDroppableDisplacement:s,viewport:n};return o?bi(c):ys(c)},Oi=({isMovingForward:e,draggable:t,destination:r,draggables:n,previousImpact:s,viewport:o,previousPageBorderBoxCenter:i,previousClientSelection:l,afterCritical:c})=>{if(!r.isEnabled)return null;const d=Je(r.descriptor.id,n),g=Ke(t,r),u=ci({isMovingForward:e,draggable:t,destination:r,insideDestination:d,previousImpact:s})||ki({isMovingForward:e,isInHomeList:g,draggable:t,draggables:n,destination:r,insideDestination:d,previousImpact:s,viewport:o,afterCritical:c});if(!u)return null;const p=Kt({impact:u,draggable:t,droppable:r,draggables:n,afterCritical:c});if(Ns({draggable:t,destination:r,newPageBorderBoxCenter:p,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Mr({pageBorderBoxCenter:p,draggable:t,viewport:o}),impact:u,scrollJumpRequest:null};const v=pe(p,i),x=_i({impact:u,viewport:o,destination:r,draggables:n,maxScrollChange:v});return{clientSelection:l,impact:x,scrollJumpRequest:v}};const le=e=>{const t=e.subject.active;return t||S(),t};var Ti=({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:n,viewport:s})=>{const o=r.subject.active;if(!o)return null;const i=r.axis,l=ve(o[i.start],o[i.end]),c=Yt(n).filter(g=>g!==r).filter(g=>g.isEnabled).filter(g=>!!g.subject.active).filter(g=>xs(s.frame)(le(g))).filter(g=>{const u=le(g);return e?o[i.crossAxisEnd]<u[i.crossAxisEnd]:u[i.crossAxisStart]<o[i.crossAxisStart]}).filter(g=>{const u=le(g),p=ve(u[i.start],u[i.end]);return l(u[i.start])||l(u[i.end])||p(o[i.start])||p(o[i.end])}).sort((g,u)=>{const p=le(g)[i.crossAxisStart],m=le(u)[i.crossAxisStart];return e?p-m:m-p}).filter((g,u,p)=>le(g)[i.crossAxisStart]===le(p[0])[i.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const d=c.filter(g=>ve(le(g)[i.start],le(g)[i.end])(t[i.line]));return d.length===1?d[0]:d.length>1?d.sort((g,u)=>le(g)[i.start]-le(u)[i.start])[0]:c.sort((g,u)=>{const p=yn(t,vn(le(g))),m=yn(t,vn(le(u)));return p!==m?p-m:le(g)[i.start]-le(u)[i.start]})[0]};const jn=(e,t)=>{const r=e.page.borderBox.center;return Oe(e.descriptor.id,t)?pe(r,t.displacedBy.point):r},Bi=(e,t)=>{const r=e.page.borderBox;return Oe(e.descriptor.id,t)?yt(r,Qe(t.displacedBy.point)):r};var Mi=({pageBorderBoxCenter:e,viewport:t,destination:r,insideDestination:n,afterCritical:s})=>n.filter(i=>ys({target:Bi(i,s),destination:r,viewport:t.frame,withDroppableDisplacement:!0})).sort((i,l)=>{const c=pt(e,xr(r,jn(i,s))),d=pt(e,xr(r,jn(l,s)));return c<d?-1:d<c?1:i.descriptor.index-l.descriptor.index})[0]||null,vt=te(function(t,r){const n=r[t.line];return{value:n,point:Ge(t.line,n)}});const Fi=(e,t,r)=>{const n=e.axis;if(e.descriptor.mode==="virtual")return Ge(n.line,t[n.line]);const s=e.subject.page.contentBox[n.size],c=Je(e.descriptor.id,r).reduce((d,g)=>d+g.client.marginBox[n.size],0)+t[n.line]-s;return c<=0?null:Ge(n.line,c)},Ss=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),ks=(e,t,r)=>{const n=e.frame;Ke(t,e)&&S(),e.subject.withPlaceholder&&S();const s=vt(e.axis,t.displaceBy).point,o=Fi(e,s,r),i={placeholderSize:s,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n){const g=qe({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame});return{...e,subject:g}}const l=o?se(n.scroll.max,o):n.scroll.max,c=Ss(n,l),d=qe({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:c});return{...e,subject:d,frame:c}},Li=e=>{const t=e.subject.withPlaceholder;t||S();const r=e.frame;if(!r){const i=qe({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:i}}const n=t.oldFrameMaxScroll;n||S();const s=Ss(r,n),o=qe({page:e.subject.page,axis:e.axis,frame:s,withPlaceholder:null});return{...e,subject:o,frame:s}};var $i=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:r,draggable:n,draggables:s,destination:o,viewport:i,afterCritical:l})=>{if(!t){if(r.length)return null;const u={displaced:gt,displacedBy:hs,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},p=Kt({impact:u,draggable:n,droppable:o,draggables:s,afterCritical:l}),m=Ke(n,o)?o:ks(o,n,s);return Ns({draggable:n,destination:m,newPageBorderBoxCenter:p,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?u:null}const c=e[o.axis.line]<=t.page.borderBox.center[o.axis.line],d=(()=>{const u=t.descriptor.index;return t.descriptor.id===n.descriptor.id||c?u:u+1})(),g=vt(o.axis,n.displaceBy);return Ot({draggable:n,insideDestination:r,destination:o,viewport:i,displacedBy:g,last:gt,index:d})},Gi=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:r,isOver:n,draggables:s,droppables:o,viewport:i,afterCritical:l})=>{const c=Ti({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:o,viewport:i});if(!c)return null;const d=Je(c.descriptor.id,s),g=Mi({pageBorderBoxCenter:t,viewport:i,destination:c,insideDestination:d,afterCritical:l}),u=$i({previousPageBorderBoxCenter:t,destination:c,draggable:r,draggables:s,moveRelativeTo:g,insideDestination:d,viewport:i,afterCritical:l});if(!u)return null;const p=Kt({impact:u,draggable:r,droppable:c,draggables:s,afterCritical:l});return{clientSelection:Mr({pageBorderBoxCenter:p,draggable:r,viewport:i}),impact:u,scrollJumpRequest:null}},ge=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const Ui=(e,t)=>{const r=ge(e);return r?t[r]:null};var Wi=({state:e,type:t})=>{const r=Ui(e.impact,e.dimensions.droppables),n=!!r,s=e.dimensions.droppables[e.critical.droppable.id],o=r||s,i=o.axis.direction,l=i==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||i==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!n)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",d=e.dimensions.draggables[e.critical.draggable.id],g=e.current.page.borderBoxCenter,{draggables:u,droppables:p}=e.dimensions;return l?Oi({isMovingForward:c,previousPageBorderBoxCenter:g,draggable:d,destination:o,draggables:u,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):Gi({isMovingForward:c,previousPageBorderBoxCenter:g,draggable:d,isOver:o,draggables:u,droppables:p,viewport:e.viewport,afterCritical:e.afterCritical})};function Le(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function js(e){const t=ve(e.top,e.bottom),r=ve(e.left,e.right);return function(s){return t(s.y)&&r(s.x)}}function Vi(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function Hi({pageBorderBox:e,draggable:t,candidates:r}){const n=t.page.borderBox.center,s=r.map(o=>{const i=o.axis,l=Ge(o.axis.line,e.center[i.line],o.page.borderBox.center[i.crossAxisLine]);return{id:o.descriptor.id,distance:pt(n,l)}}).sort((o,i)=>i.distance-o.distance);return s[0]?s[0].id:null}function qi({pageBorderBox:e,draggable:t,droppables:r}){const n=Yt(r).filter(s=>{if(!s.isEnabled)return!1;const o=s.subject.active;if(!o||!Vi(e,o))return!1;if(js(o)(e.center))return!0;const i=s.axis,l=o.center[i.crossAxisLine],c=e[i.crossAxisStart],d=e[i.crossAxisEnd],g=ve(o[i.crossAxisStart],o[i.crossAxisEnd]),u=g(c),p=g(d);return!u&&!p?!0:u?c<l:d>l});return n.length?n.length===1?n[0].descriptor.id:Hi({pageBorderBox:e,draggable:t,candidates:n}):null}const Ds=(e,t)=>Ne(yt(e,t));var zi=(e,t)=>{const r=e.frame;return r?Ds(t,r.scroll.diff.value):t};function Cs({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function Yi({draggable:e,closest:t,inHomeList:r}){return t?r&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var Qi=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:r,insideDestination:n,last:s,viewport:o,afterCritical:i})=>{const l=r.axis,c=vt(r.axis,t.displaceBy),d=c.value,g=e[l.start],u=e[l.end],m=Jt(t,n).find(x=>{const b=x.descriptor.id,j=x.page.borderBox.center[l.line],w=Oe(b,i),A=Cs({displaced:s,id:b});return w?A?u<=j:g<j-d:A?u<=j+d:g<j})||null,v=Yi({draggable:t,closest:m,inHomeList:Ke(t,r)});return Ot({draggable:t,insideDestination:n,destination:r,viewport:o,last:s,displacedBy:c,index:v})};const Ji=4;var Ki=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:r,destination:n,insideDestination:s,afterCritical:o})=>{if(!n.isCombineEnabled)return null;const i=n.axis,l=vt(n.axis,e.displaceBy),c=l.value,d=t[i.start],g=t[i.end],p=Jt(e,s).find(v=>{const x=v.descriptor.id,b=v.page.borderBox,w=b[i.size]/Ji,A=Oe(x,o),D=Cs({displaced:r.displaced,id:x});return A?D?g>b[i.start]+w&&g<b[i.end]-w:d>b[i.start]-c+w&&d<b[i.end]-c-w:D?g>b[i.start]+c+w&&g<b[i.end]+c-w:d>b[i.start]+w&&d<b[i.end]-w});return p?{displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:n.descriptor.id}}}:null},Es=({pageOffset:e,draggable:t,draggables:r,droppables:n,previousImpact:s,viewport:o,afterCritical:i})=>{const l=Ds(t.page.borderBox,e),c=qi({pageBorderBox:l,draggable:t,droppables:n});if(!c)return ui;const d=n[c],g=Je(d.descriptor.id,r),u=zi(d,l);return Ki({pageBorderBoxWithDroppableScroll:u,draggable:t,previousImpact:s,destination:d,insideDestination:g,afterCritical:i})||Qi({pageBorderBoxWithDroppableScroll:u,draggable:t,destination:d,insideDestination:g,last:s.displaced,viewport:o,afterCritical:i})},Fr=(e,t)=>({...e,[t.descriptor.id]:t});const Xi=({previousImpact:e,impact:t,droppables:r})=>{const n=ge(e),s=ge(t);if(!n||n===s)return r;const o=r[n];if(!o.subject.withPlaceholder)return r;const i=Li(o);return Fr(r,i)};var Zi=({draggable:e,draggables:t,droppables:r,previousImpact:n,impact:s})=>{const o=Xi({previousImpact:n,impact:s,droppables:r}),i=ge(s);if(!i)return o;const l=r[i];if(Ke(e,l)||l.subject.withPlaceholder)return o;const c=ks(l,e,t);return Fr(o,c)},ot=({state:e,clientSelection:t,dimensions:r,viewport:n,impact:s,scrollJumpRequest:o})=>{const i=n||e.viewport,l=r||e.dimensions,c=t||e.current.client.selection,d=pe(c,e.initial.client.selection),g={offset:d,selection:c,borderBoxCenter:se(e.initial.client.borderBoxCenter,d)},u={selection:se(g.selection,i.scroll.current),borderBoxCenter:se(g.borderBoxCenter,i.scroll.current),offset:se(g.offset,i.scroll.diff.value)},p={client:g,page:u};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:i,current:p};const m=l.draggables[e.critical.draggable.id],v=s||Es({pageOffset:u.offset,draggable:m,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:i,afterCritical:e.afterCritical}),x=Zi({draggable:m,impact:v,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:p,dimensions:{draggables:l.draggables,droppables:x},impact:v,viewport:i,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null}};function el(e,t){return e.map(r=>t[r])}var Is=({impact:e,viewport:t,draggables:r,destination:n,forceShouldAnimate:s})=>{const o=e.displaced,i=el(o.all,r),l=mt({afterDragging:i,destination:n,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:s,last:o});return{...e,displaced:l}},As=({impact:e,draggable:t,droppable:r,draggables:n,viewport:s,afterCritical:o})=>{const i=Kt({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:o});return Mr({pageBorderBoxCenter:i,draggable:t,viewport:s})},Ps=({state:e,dimensions:t,viewport:r})=>{e.movementMode!=="SNAP"&&S();const n=e.impact,s=r||e.viewport,o=t||e.dimensions,{draggables:i,droppables:l}=o,c=i[e.critical.draggable.id],d=ge(n);d||S();const g=l[d],u=Is({impact:n,viewport:s,destination:g,draggables:i}),p=As({impact:u,draggable:c,droppable:g,draggables:i,viewport:s,afterCritical:e.afterCritical});return ot({impact:u,clientSelection:p,state:e,dimensions:o,viewport:s})},tl=e=>({index:e.index,droppableId:e.droppableId}),_s=({draggable:e,home:t,draggables:r,viewport:n})=>{const s=vt(t.axis,e.displaceBy),o=Je(t.descriptor.id,r),i=o.indexOf(e);i===-1&&S();const l=o.slice(i+1),c=l.reduce((p,m)=>(p[m.descriptor.id]=!0,p),{}),d={inVirtualList:t.descriptor.mode==="virtual",displacedBy:s,effected:c};return{impact:{displaced:mt({afterDragging:l,destination:t,displacedBy:s,last:null,viewport:n.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:tl(e.descriptor)}},afterCritical:d}},rl=(e,t)=>({draggables:e.draggables,droppables:Fr(e.droppables,t)}),nl=({draggable:e,offset:t,initialWindowScroll:r})=>{const n=At(e.client,t),s=Pt(n,r);return{...e,placeholder:{...e.placeholder,client:n},client:n,page:s}},sl=e=>{const t=e.frame;return t||S(),t},al=({additions:e,updatedDroppables:t,viewport:r})=>{const n=r.scroll.diff.value;return e.map(s=>{const o=s.descriptor.droppableId,i=t[o],c=sl(i).scroll.diff.value,d=se(n,c);return nl({draggable:s,offset:d,initialWindowScroll:r.scroll.initial})})},ol=({state:e,published:t})=>{const r=t.modified.map(j=>{const w=e.dimensions.droppables[j.droppableId];return _r(w,j.scroll)}),n={...e.dimensions.droppables,...ms(r)},s=fs(al({additions:t.additions,updatedDroppables:n,viewport:e.viewport})),o={...e.dimensions.draggables,...s};t.removals.forEach(j=>{delete o[j]});const i={droppables:n,draggables:o},l=ge(e.impact),c=l?i.droppables[l]:null,d=i.draggables[e.critical.draggable.id],g=i.droppables[e.critical.droppable.id],{impact:u,afterCritical:p}=_s({draggable:d,home:g,draggables:o,viewport:e.viewport}),m=c&&c.isCombineEnabled?e.impact:u,v=Es({pageOffset:e.current.page.offset,draggable:i.draggables[e.critical.draggable.id],draggables:i.draggables,droppables:i.droppables,previousImpact:m,viewport:e.viewport,afterCritical:p}),x={...e,phase:"DRAGGING",impact:v,onLiftImpact:u,dimensions:i,afterCritical:p,forceShouldAnimate:!1};return e.phase==="COLLECTING"?x:{...x,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const br=e=>e.movementMode==="SNAP",or=(e,t,r)=>{const n=rl(e.dimensions,t);return!br(e)||r?ot({state:e,dimensions:n}):Ps({state:e,dimensions:n})};function ir(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const Dn={phase:"IDLE",completed:null,shouldFlush:!1};var il=(e=Dn,t)=>{if(t.type==="FLUSH")return{...Dn,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&S();const{critical:r,clientSelection:n,viewport:s,dimensions:o,movementMode:i}=t.payload,l=o.draggables[r.draggable.id],c=o.droppables[r.droppable.id],d={selection:n,borderBoxCenter:l.client.borderBox.center,offset:re},g={client:d,page:{selection:se(d.selection,s.scroll.initial),borderBoxCenter:se(d.selection,s.scroll.initial),offset:se(d.selection,s.scroll.diff.value)}},u=Yt(o.droppables).every(x=>!x.isFixedOnPage),{impact:p,afterCritical:m}=_s({draggable:l,home:c,draggables:o.draggables,viewport:s});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:i,dimensions:o,initial:g,current:g,isWindowScrollAllowed:u,impact:p,afterCritical:m,onLiftImpact:p,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&S(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||S(),ol({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Le(e)||S();const{client:r}=t.payload;return Re(r,e.current.client.selection)?e:ot({state:e,clientSelection:r,impact:br(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return ir(e);Le(e)||S();const{id:r,newScroll:n}=t.payload,s=e.dimensions.droppables[r];if(!s)return e;const o=_r(s,n);return or(e,o,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Le(e)||S();const{id:r,isEnabled:n}=t.payload,s=e.dimensions.droppables[r];s||S(),s.isEnabled===n&&S();const o={...s,isEnabled:n};return or(e,o,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Le(e)||S();const{id:r,isCombineEnabled:n}=t.payload,s=e.dimensions.droppables[r];s||S(),s.isCombineEnabled===n&&S();const o={...s,isCombineEnabled:n};return or(e,o,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Le(e)||S(),e.isWindowScrollAllowed||S();const r=t.payload.newScroll;if(Re(e.viewport.scroll.current,r))return ir(e);const n=ws(e.viewport,r);return br(e)?Ps({state:e,viewport:n}):ot({state:e,viewport:n})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Le(e))return e;const r=t.payload.maxScroll;if(Re(r,e.viewport.scroll.max))return e;const n={...e.viewport,scroll:{...e.viewport.scroll,max:r}};return{...e,viewport:n}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&S();const r=Wi({state:e,type:t.type});return r?ot({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const r=t.payload.reason;return e.phase!=="COLLECTING"&&S(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(t.type==="DROP_ANIMATE"){const{completed:r,dropDuration:n,newHomeClientOffset:s}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||S(),{phase:"DROP_ANIMATING",completed:r,dropDuration:n,newHomeClientOffset:s,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:r}=t.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return e};const ll=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),cl=e=>({type:"LIFT",payload:e}),dl=e=>({type:"INITIAL_PUBLISH",payload:e}),ul=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),pl=()=>({type:"COLLECTION_STARTING",payload:null}),gl=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),ml=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),fl=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),Rs=e=>({type:"MOVE",payload:e}),hl=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),xl=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),bl=()=>({type:"MOVE_UP",payload:null}),yl=()=>({type:"MOVE_DOWN",payload:null}),vl=()=>({type:"MOVE_RIGHT",payload:null}),wl=()=>({type:"MOVE_LEFT",payload:null}),Lr=()=>({type:"FLUSH",payload:null}),Nl=e=>({type:"DROP_ANIMATE",payload:e}),$r=e=>({type:"DROP_COMPLETE",payload:e}),Os=e=>({type:"DROP",payload:e}),Sl=e=>({type:"DROP_PENDING",payload:e}),Ts=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var kl=e=>({getState:t,dispatch:r})=>n=>s=>{if(s.type!=="LIFT"){n(s);return}const{id:o,clientSelection:i,movementMode:l}=s.payload,c=t();c.phase==="DROP_ANIMATING"&&r($r({completed:c.completed})),t().phase!=="IDLE"&&S(),r(Lr()),r(ll({draggableId:o,movementMode:l}));const g={draggableId:o,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:u,dimensions:p,viewport:m}=e.startPublishing(g);r(dl({critical:u,dimensions:p,clientSelection:i,movementMode:l,viewport:m}))},jl=e=>()=>t=>r=>{r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)};const Gr={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},ft={opacity:{drop:0,combining:.7},scale:{drop:.75}},Bs={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Fe=`${Bs.outOfTheWay}s ${Gr.outOfTheWay}`,it={fluid:`opacity ${Fe}`,snap:`transform ${Fe}, opacity ${Fe}`,drop:e=>{const t=`${e}s ${Gr.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Fe}`,placeholder:`height ${Fe}, width ${Fe}, margin ${Fe}`},Cn=e=>Re(e,re)?void 0:`translate(${e.x}px, ${e.y}px)`,yr={moveTo:Cn,drop:(e,t)=>{const r=Cn(e);if(r)return t?`${r} scale(${ft.scale.drop})`:r}},{minDropTime:vr,maxDropTime:Ms}=Bs,Dl=Ms-vr,En=1500,Cl=.6;var El=({current:e,destination:t,reason:r})=>{const n=pt(e,t);if(n<=0)return vr;if(n>=En)return Ms;const s=n/En,o=vr+Dl*s,i=r==="CANCEL"?o*Cl:o;return Number(i.toFixed(2))},Il=({impact:e,draggable:t,dimensions:r,viewport:n,afterCritical:s})=>{const{draggables:o,droppables:i}=r,l=ge(e),c=l?i[l]:null,d=i[t.descriptor.droppableId],g=As({impact:e,draggable:t,draggables:o,afterCritical:s,droppable:c||d,viewport:n});return pe(g,t.client.borderBox.center)},Al=({draggables:e,reason:t,lastImpact:r,home:n,viewport:s,onLiftImpact:o})=>!r.at||t!=="DROP"?{impact:Is({draggables:e,impact:o,destination:n,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:gt},didDropInsideDroppable:!0};const Pl=({getState:e,dispatch:t})=>r=>n=>{if(n.type!=="DROP"){r(n);return}const s=e(),o=n.payload.reason;if(s.phase==="COLLECTING"){t(Sl({reason:o}));return}if(s.phase==="IDLE")return;s.phase==="DROP_PENDING"&&s.isWaiting&&S(),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||S();const l=s.critical,c=s.dimensions,d=c.draggables[s.critical.draggable.id],{impact:g,didDropInsideDroppable:u}=Al({reason:o,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),p=u?Rr(g):null,m=u?Qt(g):null,v={index:l.draggable.index,droppableId:l.droppable.id},x={draggableId:d.descriptor.id,type:d.descriptor.type,source:v,reason:o,mode:s.movementMode,destination:p,combine:m},b=Il({impact:g,draggable:d,dimensions:c,viewport:s.viewport,afterCritical:s.afterCritical}),j={critical:s.critical,afterCritical:s.afterCritical,result:x,impact:g};if(!(!Re(s.current.client.offset,b)||!!x.combine)){t($r({completed:j}));return}const A=El({current:s.current.client.offset,destination:b,reason:o});t(Nl({newHomeClientOffset:b,dropDuration:A,completed:j}))};var _l=Pl,Fs=()=>({x:window.pageXOffset,y:window.pageYOffset});function Rl(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function Ol({onWindowScroll:e}){function t(){e(Fs())}const r=ut(t),n=Rl(r);let s=_e;function o(){return s!==_e}function i(){o()&&S(),s=ye(window,[n])}function l(){o()||S(),r.cancel(),s(),s=_e}return{start:i,stop:l,isActive:o}}const Tl=e=>e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH",Bl=e=>{const t=Ol({onWindowScroll:r=>{e.dispatch(hl({newScroll:r}))}});return r=>n=>{!t.isActive()&&n.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&Tl(n)&&t.stop(),r(n)}};var Ml=Bl,Fl=e=>{let t=!1,r=!1;const n=setTimeout(()=>{r=!0}),s=o=>{t||r||(t=!0,e(o),clearTimeout(n))};return s.wasCalled=()=>t,s},Ll=()=>{const e=[],t=s=>{const o=e.findIndex(l=>l.timerId===s);o===-1&&S();const[i]=e.splice(o,1);i.callback()};return{add:s=>{const o=setTimeout(()=>t(o)),i={timerId:o,callback:s};e.push(i)},flush:()=>{if(!e.length)return;const s=[...e];e.length=0,s.forEach(o=>{clearTimeout(o.timerId),o.callback()})}}};const $l=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,Gl=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,Ul=(e,t)=>{if(e===t)return!0;const r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,n=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&n},tt=(e,t)=>{t()},Nt=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function lr(e,t,r,n){if(!e){r(n(t));return}const s=Fl(r);e(t,{announce:s}),s.wasCalled()||r(n(t))}var Wl=(e,t)=>{const r=Ll();let n=null;const s=(u,p)=>{n&&S(),tt("onBeforeCapture",()=>{const m=e().onBeforeCapture;m&&m({draggableId:u,mode:p})})},o=(u,p)=>{n&&S(),tt("onBeforeDragStart",()=>{const m=e().onBeforeDragStart;m&&m(Nt(u,p))})},i=(u,p)=>{n&&S();const m=Nt(u,p);n={mode:p,lastCritical:u,lastLocation:m.source,lastCombine:null},r.add(()=>{tt("onDragStart",()=>lr(e().onDragStart,m,t,jt.onDragStart))})},l=(u,p)=>{const m=Rr(p),v=Qt(p);n||S();const x=!Ul(u,n.lastCritical);x&&(n.lastCritical=u);const b=!$l(n.lastLocation,m);b&&(n.lastLocation=m);const j=!Gl(n.lastCombine,v);if(j&&(n.lastCombine=v),!x&&!b&&!j)return;const w={...Nt(u,n.mode),combine:v,destination:m};r.add(()=>{tt("onDragUpdate",()=>lr(e().onDragUpdate,w,t,jt.onDragUpdate))})},c=()=>{n||S(),r.flush()},d=u=>{n||S(),n=null,tt("onDragEnd",()=>lr(e().onDragEnd,u,t,jt.onDragEnd))};return{beforeCapture:s,beforeStart:o,start:i,update:l,flush:c,drop:d,abort:()=>{if(!n)return;const u={...Nt(n.lastCritical,n.mode),combine:null,destination:null,reason:"CANCEL"};d(u)}}},Vl=(e,t)=>{const r=Wl(e,t);return n=>s=>o=>{if(o.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(o.type==="INITIAL_PUBLISH"){const l=o.payload.critical;r.beforeStart(l,o.payload.movementMode),s(o),r.start(l,o.payload.movementMode);return}if(o.type==="DROP_COMPLETE"){const l=o.payload.completed.result;r.flush(),s(o),r.drop(l);return}if(s(o),o.type==="FLUSH"){r.abort();return}const i=n.getState();i.phase==="DRAGGING"&&r.update(i.critical,i.impact)}};const Hl=e=>t=>r=>{if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}const n=e.getState();n.phase!=="DROP_ANIMATING"&&S(),e.dispatch($r({completed:n.completed}))};var ql=Hl;const zl=e=>{let t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return s=>o=>{if((o.type==="FLUSH"||o.type==="DROP_COMPLETE"||o.type==="DROP_ANIMATION_FINISHED")&&n(),s(o),o.type!=="DROP_ANIMATE")return;const i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(Ts())}};r=requestAnimationFrame(()=>{r=null,t=ye(window,[i])})}};var Yl=zl,Ql=e=>()=>t=>r=>{(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)},Jl=e=>{let t=!1;return()=>r=>n=>{if(n.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(n.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){t=!1;const s=n.payload.completed.result;s.combine&&e.tryShiftRecord(s.draggableId,s.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const Kl=e=>e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH";var Xl=e=>t=>r=>n=>{if(Kl(n)){e.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);const s=t.getState();s.phase!=="DRAGGING"&&S(),e.start(s);return}r(n),e.scroll(t.getState())};const Zl=e=>t=>r=>{if(t(r),r.type!=="PUBLISH_WHILE_DRAGGING")return;const n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(Os({reason:n.reason})))};var ec=Zl;const tc=zn;var rc=({dimensionMarshal:e,focusMarshal:t,styleMarshal:r,getResponders:n,announce:s,autoScroller:o})=>qn(il,tc(La(jl(r),Ql(e),kl(e),_l,ql,Yl,ec,Xl(o),Ml,Jl(t),Vl(n,s))));const cr=()=>({additions:{},removals:{},modified:{}});function nc({registry:e,callbacks:t}){let r=cr(),n=null;const s=()=>{n||(t.collectionStarting(),n=requestAnimationFrame(()=>{n=null;const{additions:c,removals:d,modified:g}=r,u=Object.keys(c).map(v=>e.draggable.getById(v).getDimension(re)).sort((v,x)=>v.descriptor.index-x.descriptor.index),p=Object.keys(g).map(v=>{const b=e.droppable.getById(v).callbacks.getScrollWhileDragging();return{droppableId:v,scroll:b}}),m={additions:u,removals:Object.keys(d),modified:p};r=cr(),t.publish(m)}))};return{add:c=>{const d=c.descriptor.id;r.additions[d]=c,r.modified[c.descriptor.droppableId]=!0,r.removals[d]&&delete r.removals[d],s()},remove:c=>{const d=c.descriptor;r.removals[d.id]=!0,r.modified[d.droppableId]=!0,r.additions[d.id]&&delete r.additions[d.id],s()},stop:()=>{n&&(cancelAnimationFrame(n),n=null,r=cr())}}}var Ls=({scrollHeight:e,scrollWidth:t,height:r,width:n})=>{const s=pe({x:t,y:e},{x:n,y:r});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},$s=()=>{const e=document.documentElement;return e||S(),e},Gs=()=>{const e=$s();return Ls({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},sc=()=>{const e=Fs(),t=Gs(),r=e.y,n=e.x,s=$s(),o=s.clientWidth,i=s.clientHeight,l=n+o,c=r+i;return{frame:Ne({top:r,left:n,right:l,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:re,displacement:re}}}},ac=({critical:e,scrollOptions:t,registry:r})=>{const n=sc(),s=n.scroll.current,o=e.droppable,i=r.droppable.getAllByType(o.type).map(g=>g.callbacks.getDimensionAndWatchScroll(s,t)),l=r.draggable.getAllByType(e.draggable.type).map(g=>g.getDimension(s));return{dimensions:{draggables:fs(l),droppables:ms(i)},critical:e,viewport:n}};function In(e,t,r){return!(r.descriptor.id===t.id||r.descriptor.type!==t.type||e.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var oc=(e,t)=>{let r=null;const n=nc({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),s=(p,m)=>{e.droppable.exists(p)||S(),r&&t.updateDroppableIsEnabled({id:p,isEnabled:m})},o=(p,m)=>{r&&(e.droppable.exists(p)||S(),t.updateDroppableIsCombineEnabled({id:p,isCombineEnabled:m}))},i=(p,m)=>{r&&(e.droppable.exists(p)||S(),t.updateDroppableScroll({id:p,newScroll:m}))},l=(p,m)=>{r&&e.droppable.getById(p).callbacks.scroll(m)},c=()=>{if(!r)return;n.stop();const p=r.critical.droppable;e.droppable.getAllByType(p.type).forEach(m=>m.callbacks.dragStopped()),r.unsubscribe(),r=null},d=p=>{r||S();const m=r.critical.draggable;p.type==="ADDITION"&&In(e,m,p.value)&&n.add(p.value),p.type==="REMOVAL"&&In(e,m,p.value)&&n.remove(p.value)};return{updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:o,scrollDroppable:l,updateDroppableScroll:i,startPublishing:p=>{r&&S();const m=e.draggable.getById(p.draggableId),v=e.droppable.getById(m.descriptor.droppableId),x={draggable:m.descriptor,droppable:v.descriptor},b=e.subscribe(d);return r={critical:x,unsubscribe:b},ac({critical:x,registry:e,scrollOptions:p.scrollOptions})},stopPublishing:c}},Us=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",ic=e=>{window.scrollBy(e.x,e.y)};const lc=te(e=>Yt(e).filter(t=>!(!t.isEnabled||!t.frame))),cc=(e,t)=>lc(t).find(n=>(n.frame||S(),js(n.frame.pageMarginBox)(e)))||null;var dc=({center:e,destination:t,droppables:r})=>{if(t){const s=r[t];return s.frame?s:null}return cc(e,r)};const ht={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var uc=(e,t,r=()=>ht)=>{const n=r(),s=e[t.size]*n.startFromPercentage,o=e[t.size]*n.maxScrollAtPercentage;return{startScrollingFrom:s,maxScrollValueAt:o}},Ws=({startOfRange:e,endOfRange:t,current:r})=>{const n=t-e;return n===0?0:(r-e)/n},Ur=1,pc=(e,t,r=()=>ht)=>{const n=r();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return n.maxPixelScroll;if(e===t.startScrollingFrom)return Ur;const o=1-Ws({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),i=n.maxPixelScroll*n.ease(o);return Math.ceil(i)},gc=(e,t,r)=>{const n=r(),s=n.durationDampening.accelerateAt,o=n.durationDampening.stopDampeningAt,i=t,l=o,d=Date.now()-i;if(d>=o)return e;if(d<s)return Ur;const g=Ws({startOfRange:s,endOfRange:l,current:d}),u=e*n.ease(g);return Math.ceil(u)},An=({distanceToEdge:e,thresholds:t,dragStartTime:r,shouldUseTimeDampening:n,getAutoScrollerOptions:s})=>{const o=pc(e,t,s);return o===0?0:n?Math.max(gc(o,r,s),Ur):o},Pn=({container:e,distanceToEdges:t,dragStartTime:r,axis:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const i=uc(e,n,o);return t[n.end]<t[n.start]?An({distanceToEdge:t[n.end],thresholds:i,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o}):-1*An({distanceToEdge:t[n.start],thresholds:i,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o})},mc=({container:e,subject:t,proposedScroll:r})=>{const n=t.height>e.height,s=t.width>e.width;return!s&&!n?r:s&&n?null:{x:s?0:r.x,y:n?0:r.y}};const fc=gs(e=>e===0?0:e);var Vs=({dragStartTime:e,container:t,subject:r,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const i={top:n.y-t.top,right:t.right-n.x,bottom:t.bottom-n.y,left:n.x-t.left},l=Pn({container:t,distanceToEdges:i,dragStartTime:e,axis:Or,shouldUseTimeDampening:s,getAutoScrollerOptions:o}),c=Pn({container:t,distanceToEdges:i,dragStartTime:e,axis:bs,shouldUseTimeDampening:s,getAutoScrollerOptions:o}),d=fc({x:c,y:l});if(Re(d,re))return null;const g=mc({container:t,subject:r,proposedScroll:d});return g?Re(g,re)?null:g:null};const hc=gs(e=>e===0?0:e>0?1:-1),Wr=(()=>{const e=(t,r)=>t<0?t:t>r?t-r:0;return({current:t,max:r,change:n})=>{const s=se(t,n),o={x:e(s.x,r.x),y:e(s.y,r.y)};return Re(o,re)?null:o}})(),Hs=({max:e,current:t,change:r})=>{const n={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},s=hc(r),o=Wr({max:n,current:t,change:s});return!o||s.x!==0&&o.x===0||s.y!==0&&o.y===0},Vr=(e,t)=>Hs({current:e.scroll.current,max:e.scroll.max,change:t}),xc=(e,t)=>{if(!Vr(e,t))return null;const r=e.scroll.max,n=e.scroll.current;return Wr({current:n,max:r,change:t})},Hr=(e,t)=>{const r=e.frame;return r?Hs({current:r.scroll.current,max:r.scroll.max,change:t}):!1},bc=(e,t)=>{const r=e.frame;return!r||!Hr(e,t)?null:Wr({current:r.scroll.current,max:r.scroll.max,change:t})};var yc=({viewport:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const i=Vs({dragStartTime:n,container:e.frame,subject:t,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o});return i&&Vr(e,i)?i:null},vc=({droppable:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const i=e.frame;if(!i)return null;const l=Vs({dragStartTime:n,container:i.pageMarginBox,subject:t,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o});return l&&Hr(e,l)?l:null},_n=({state:e,dragStartTime:t,shouldUseTimeDampening:r,scrollWindow:n,scrollDroppable:s,getAutoScrollerOptions:o})=>{const i=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const u=e.viewport,p=yc({dragStartTime:t,viewport:u,subject:c,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:o});if(p){n(p);return}}const d=dc({center:i,destination:ge(e.impact),droppables:e.dimensions.droppables});if(!d)return;const g=vc({dragStartTime:t,droppable:d,subject:c,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:o});g&&s(d.descriptor.id,g)},wc=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r=()=>ht})=>{const n=ut(e),s=ut(t);let o=null;const i=d=>{o||S();const{shouldUseTimeDampening:g,dragStartTime:u}=o;_n({state:d,scrollWindow:n,scrollDroppable:s,dragStartTime:u,shouldUseTimeDampening:g,getAutoScrollerOptions:r})};return{start:d=>{o&&S();const g=Date.now();let u=!1;const p=()=>{u=!0};_n({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:p,scrollDroppable:p,getAutoScrollerOptions:r}),o={dragStartTime:g,shouldUseTimeDampening:u},u&&i(d)},stop:()=>{o&&(n.cancel(),s.cancel(),o=null)},scroll:i}},Nc=({move:e,scrollDroppable:t,scrollWindow:r})=>{const n=(l,c)=>{const d=se(l.current.client.selection,c);e({client:d})},s=(l,c)=>{if(!Hr(l,c))return c;const d=bc(l,c);if(!d)return t(l.descriptor.id,c),null;const g=pe(c,d);return t(l.descriptor.id,g),pe(c,g)},o=(l,c,d)=>{if(!l||!Vr(c,d))return d;const g=xc(c,d);if(!g)return r(d),null;const u=pe(d,g);return r(u),pe(d,u)};return l=>{const c=l.scrollJumpRequest;if(!c)return;const d=ge(l.impact);d||S();const g=s(l.dimensions.droppables[d],c);if(!g)return;const u=l.viewport,p=o(l.isWindowScrollAllowed,u,g);p&&n(l,p)}},Sc=({scrollDroppable:e,scrollWindow:t,move:r,getAutoScrollerOptions:n})=>{const s=wc({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:n}),o=Nc({move:r,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(n().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){s.scroll(c);return}c.scrollJumpRequest&&o(c)}},start:s.start,stop:s.stop}};const ze="data-rfd",Ye=(()=>{const e=`${ze}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),wr=(()=>{const e=`${ze}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),kc=(()=>{const e=`${ze}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Rn={contextId:`${ze}-scroll-container-context-id`},jc=e=>t=>`[${t}="${e}"]`,rt=(e,t)=>e.map(r=>{const n=r.styles[t];return n?`${r.selector} { ${n} }`:""}).join(" "),Dc="pointer-events: none;";var Cc=e=>{const t=jc(e),r=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Ye.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:Dc,dropAnimating:l}}})(),n=(()=>{const l=`
      transition: ${it.outOfTheWay};
    `;return{selector:t(wr.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),s={selector:t(kc.contextId),styles:{always:"overflow-anchor: none;"}},i=[n,r,s,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:rt(i,"always"),resting:rt(i,"resting"),dragging:rt(i,"dragging"),dropAnimating:rt(i,"dropAnimating"),userCancel:rt(i,"userCancel")}};const Ec=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?y.useLayoutEffect:y.useEffect;var me=Ec;const dr=()=>{const e=document.querySelector("head");return e||S(),e},On=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function Ic(e,t){const r=G(()=>Cc(e),[e]),n=y.useRef(null),s=y.useRef(null),o=P(te(u=>{const p=s.current;p||S(),p.textContent=u}),[]),i=P(u=>{const p=n.current;p||S(),p.textContent=u},[]);me(()=>{!n.current&&!s.current||S();const u=On(t),p=On(t);return n.current=u,s.current=p,u.setAttribute(`${ze}-always`,e),p.setAttribute(`${ze}-dynamic`,e),dr().appendChild(u),dr().appendChild(p),i(r.always),o(r.resting),()=>{const m=v=>{const x=v.current;x||S(),dr().removeChild(x),v.current=null};m(n),m(s)}},[t,i,o,r.always,r.resting,e]);const l=P(()=>o(r.dragging),[o,r.dragging]),c=P(u=>{if(u==="DROP"){o(r.dropAnimating);return}o(r.userCancel)},[o,r.dropAnimating,r.userCancel]),d=P(()=>{s.current&&o(r.resting)},[o,r.resting]);return G(()=>({dragging:l,dropping:c,resting:d}),[l,c,d])}function qs(e,t){return Array.from(e.querySelectorAll(t))}var zs=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function Xt(e){return e instanceof zs(e).HTMLElement}function Ac(e,t){const r=`[${Ye.contextId}="${e}"]`,n=qs(document,r);if(!n.length)return null;const s=n.find(o=>o.getAttribute(Ye.draggableId)===t);return!s||!Xt(s)?null:s}function Pc(e){const t=y.useRef({}),r=y.useRef(null),n=y.useRef(null),s=y.useRef(!1),o=P(function(p,m){const v={id:p,focus:m};return t.current[p]=v,function(){const b=t.current;b[p]!==v&&delete b[p]}},[]),i=P(function(p){const m=Ac(e,p);m&&m!==document.activeElement&&m.focus()},[e]),l=P(function(p,m){r.current===p&&(r.current=m)},[]),c=P(function(){n.current||s.current&&(n.current=requestAnimationFrame(()=>{n.current=null;const p=r.current;p&&i(p)}))},[i]),d=P(function(p){r.current=null;const m=document.activeElement;m&&m.getAttribute(Ye.draggableId)===p&&(r.current=p)},[]);return me(()=>(s.current=!0,function(){s.current=!1;const p=n.current;p&&cancelAnimationFrame(p)}),[]),G(()=>({register:o,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:l}),[o,d,c,l])}function _c(){const e={draggables:{},droppables:{}},t=[];function r(u){return t.push(u),function(){const m=t.indexOf(u);m!==-1&&t.splice(m,1)}}function n(u){t.length&&t.forEach(p=>p(u))}function s(u){return e.draggables[u]||null}function o(u){const p=s(u);return p||S(),p}const i={register:u=>{e.draggables[u.descriptor.id]=u,n({type:"ADDITION",value:u})},update:(u,p)=>{const m=e.draggables[p.descriptor.id];m&&m.uniqueId===u.uniqueId&&(delete e.draggables[p.descriptor.id],e.draggables[u.descriptor.id]=u)},unregister:u=>{const p=u.descriptor.id,m=s(p);m&&u.uniqueId===m.uniqueId&&(delete e.draggables[p],e.droppables[u.descriptor.droppableId]&&n({type:"REMOVAL",value:u}))},getById:o,findById:s,exists:u=>!!s(u),getAllByType:u=>Object.values(e.draggables).filter(p=>p.descriptor.type===u)};function l(u){return e.droppables[u]||null}function c(u){const p=l(u);return p||S(),p}const d={register:u=>{e.droppables[u.descriptor.id]=u},unregister:u=>{const p=l(u.descriptor.id);p&&u.uniqueId===p.uniqueId&&delete e.droppables[u.descriptor.id]},getById:c,findById:l,exists:u=>!!l(u),getAllByType:u=>Object.values(e.droppables).filter(p=>p.descriptor.type===u)};function g(){e.draggables={},e.droppables={},t.length=0}return{draggable:i,droppable:d,subscribe:r,clean:g}}function Rc(){const e=G(_c,[]);return y.useEffect(()=>function(){q.version.startsWith("16")||q.version.startsWith("17")?requestAnimationFrame(e.clean):e.clean()},[e]),e}var qr=q.createContext(null),Tt=()=>{const e=document.body;return e||S(),e};const Oc={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var Tc=Oc;const Bc=e=>`rfd-announcement-${e}`;function Mc(e){const t=G(()=>Bc(e),[e]),r=y.useRef(null);return y.useEffect(function(){const o=document.createElement("div");return r.current=o,o.id=t,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),Pe(o.style,Tc),Tt().appendChild(o),function(){setTimeout(function(){const c=Tt();c.contains(o)&&c.removeChild(o),o===r.current&&(r.current=null)})}},[t]),P(s=>{const o=r.current;if(o){o.textContent=s;return}},[])}let Fc=0;const Ys={separator:"::"};function Lc(e,t=Ys){return G(()=>`${e}${t.separator}${Fc++}`,[t.separator,e])}function $c(e,t=Ys){const r=q.useId();return G(()=>`${e}${t.separator}${r}`,[t.separator,e,r])}var zr="useId"in q?$c:Lc;function Gc({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function Uc({contextId:e,text:t}){const r=zr("hidden-text",{separator:"-"}),n=G(()=>Gc({contextId:e,uniqueId:r}),[r,e]);return y.useEffect(function(){const o=document.createElement("div");return o.id=n,o.textContent=t,o.style.display="none",Tt().appendChild(o),function(){const l=Tt();l.contains(o)&&l.removeChild(o)}},[n,t]),n}var Zt=q.createContext(null);function Qs(e){const t=y.useRef(e);return y.useEffect(()=>{t.current=e}),t}function Wc(){let e=null;function t(){return!!e}function r(i){return i===e}function n(i){e&&S();const l={abandon:i};return e=l,l}function s(){e||S(),e=null}function o(){e&&(e.abandon(),s())}return{isClaimed:t,isActive:r,claim:n,release:s,tryAbandon:o}}function xt(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const Vc=9,Hc=13,Yr=27,Js=32,qc=33,zc=34,Yc=35,Qc=36,Jc=37,Kc=38,Xc=39,Zc=40,ed={[Hc]:!0,[Vc]:!0};var Ks=e=>{ed[e.keyCode]&&e.preventDefault()};const td=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(n=>`on${n}`in document)||e})();var er=td;const Xs=0,Tn=5;function rd(e,t){return Math.abs(t.x-e.x)>=Tn||Math.abs(t.y-e.y)>=Tn}const Bn={type:"IDLE"};function nd({cancel:e,completed:t,getPhase:r,setPhase:n}){return[{eventName:"mousemove",fn:s=>{const{button:o,clientX:i,clientY:l}=s;if(o!==Xs)return;const c={x:i,y:l},d=r();if(d.type==="DRAGGING"){s.preventDefault(),d.actions.move(c);return}d.type!=="PENDING"&&S();const g=d.point;if(!rd(g,c))return;s.preventDefault();const u=d.actions.fluidLift(c);n({type:"DRAGGING",actions:u})}},{eventName:"mouseup",fn:s=>{const o=r();if(o.type!=="DRAGGING"){e();return}s.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:s=>{r().type==="DRAGGING"&&s.preventDefault(),e()}},{eventName:"keydown",fn:s=>{if(r().type==="PENDING"){e();return}if(s.keyCode===Yr){s.preventDefault(),e();return}Ks(s)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:s=>{const o=r();if(o.type==="IDLE"&&S(),o.actions.shouldRespectForcePress()){e();return}s.preventDefault()}},{eventName:er,fn:e}]}function sd(e){const t=y.useRef(Bn),r=y.useRef(_e),n=G(()=>({eventName:"mousedown",fn:function(u){if(u.defaultPrevented||u.button!==Xs||u.ctrlKey||u.metaKey||u.shiftKey||u.altKey)return;const p=e.findClosestDraggableId(u);if(!p)return;const m=e.tryGetLock(p,i,{sourceEvent:u});if(!m)return;u.preventDefault();const v={x:u.clientX,y:u.clientY};r.current(),d(m,v)}}),[e]),s=G(()=>({eventName:"webkitmouseforcewillbegin",fn:g=>{if(g.defaultPrevented)return;const u=e.findClosestDraggableId(g);if(!u)return;const p=e.findOptionsForDraggable(u);p&&(p.shouldRespectForcePress||e.canGetLock(u)&&g.preventDefault())}}),[e]),o=P(function(){const u={passive:!1,capture:!0};r.current=ye(window,[s,n],u)},[s,n]),i=P(()=>{t.current.type!=="IDLE"&&(t.current=Bn,r.current(),o())},[o]),l=P(()=>{const g=t.current;i(),g.type==="DRAGGING"&&g.actions.cancel({shouldBlockNextClick:!0}),g.type==="PENDING"&&g.actions.abort()},[i]),c=P(function(){const u={capture:!0,passive:!1},p=nd({cancel:l,completed:i,getPhase:()=>t.current,setPhase:m=>{t.current=m}});r.current=ye(window,p,u)},[l,i]),d=P(function(u,p){t.current.type!=="IDLE"&&S(),t.current={type:"PENDING",point:p,actions:u},c()},[c]);me(function(){return o(),function(){r.current()}},[o])}function ad(){}const od={[zc]:!0,[qc]:!0,[Qc]:!0,[Yc]:!0};function id(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:s=>{if(s.keyCode===Yr){s.preventDefault(),r();return}if(s.keyCode===Js){s.preventDefault(),n();return}if(s.keyCode===Zc){s.preventDefault(),e.moveDown();return}if(s.keyCode===Kc){s.preventDefault(),e.moveUp();return}if(s.keyCode===Xc){s.preventDefault(),e.moveRight();return}if(s.keyCode===Jc){s.preventDefault(),e.moveLeft();return}if(od[s.keyCode]){s.preventDefault();return}Ks(s)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:er,fn:r}]}function ld(e){const t=y.useRef(ad),r=G(()=>({eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==Js)return;const i=e.findClosestDraggableId(o);if(!i)return;const l=e.tryGetLock(i,g,{sourceEvent:o});if(!l)return;o.preventDefault();let c=!0;const d=l.snapLift();t.current();function g(){c||S(),c=!1,t.current(),n()}t.current=ye(window,id(d,g),{capture:!0,passive:!1})}}),[e]),n=P(function(){const o={passive:!1,capture:!0};t.current=ye(window,[r],o)},[r]);me(function(){return n(),function(){t.current()}},[n])}const ur={type:"IDLE"},cd=120,dd=.15;function ud({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(t().type!=="DRAGGING"){e();return}r.keyCode===Yr&&r.preventDefault(),e()}},{eventName:er,fn:e}]}function pd({cancel:e,completed:t,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:n=>{const s=r();if(s.type!=="DRAGGING"){e();return}s.hasMoved=!0;const{clientX:o,clientY:i}=n.touches[0],l={x:o,y:i};n.preventDefault(),s.actions.move(l)}},{eventName:"touchend",fn:n=>{const s=r();if(s.type!=="DRAGGING"){e();return}n.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:n=>{if(r().type!=="DRAGGING"){e();return}n.preventDefault(),e()}},{eventName:"touchforcechange",fn:n=>{const s=r();s.type==="IDLE"&&S();const o=n.touches[0];if(!o||!(o.force>=dd))return;const l=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){l&&e();return}if(l){if(s.hasMoved){n.preventDefault();return}e();return}n.preventDefault()}},{eventName:er,fn:e}]}function gd(e){const t=y.useRef(ur),r=y.useRef(_e),n=P(function(){return t.current},[]),s=P(function(m){t.current=m},[]),o=G(()=>({eventName:"touchstart",fn:function(m){if(m.defaultPrevented)return;const v=e.findClosestDraggableId(m);if(!v)return;const x=e.tryGetLock(v,l,{sourceEvent:m});if(!x)return;const b=m.touches[0],{clientX:j,clientY:w}=b,A={x:j,y:w};r.current(),u(x,A)}}),[e]),i=P(function(){const m={capture:!0,passive:!1};r.current=ye(window,[o],m)},[o]),l=P(()=>{const p=t.current;p.type!=="IDLE"&&(p.type==="PENDING"&&clearTimeout(p.longPressTimerId),s(ur),r.current(),i())},[i,s]),c=P(()=>{const p=t.current;l(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[l]),d=P(function(){const m={capture:!0,passive:!1},v={cancel:c,completed:l,getPhase:n},x=ye(window,pd(v),m),b=ye(window,ud(v),m);r.current=function(){x(),b()}},[c,n,l]),g=P(function(){const m=n();m.type!=="PENDING"&&S();const v=m.actions.fluidLift(m.point);s({type:"DRAGGING",actions:v,hasMoved:!1})},[n,s]),u=P(function(m,v){n().type!=="IDLE"&&S();const x=setTimeout(g,cd);s({type:"PENDING",point:v,actions:m,longPressTimerId:x}),d()},[d,n,s,g]);me(function(){return i(),function(){r.current();const v=n();v.type==="PENDING"&&(clearTimeout(v.longPressTimerId),s(ur))}},[n,i,s]),me(function(){return ye(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const md=["input","button","textarea","select","option","optgroup","video","audio"];function Zs(e,t){if(t==null)return!1;if(md.includes(t.tagName.toLowerCase()))return!0;const n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:Zs(e,t.parentElement)}function fd(e,t){const r=t.target;return Xt(r)?Zs(e,r):!1}var hd=e=>Ne(e.getBoundingClientRect()).center;function xd(e){return e instanceof zs(e).Element}const bd=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(n=>n in Element.prototype)||e})();function ea(e,t){return e==null?null:e[bd](t)?e:ea(e.parentElement,t)}function yd(e,t){return e.closest?e.closest(t):ea(e,t)}function vd(e){return`[${Ye.contextId}="${e}"]`}function wd(e,t){const r=t.target;if(!xd(r))return null;const n=vd(e),s=yd(r,n);return!s||!Xt(s)?null:s}function Nd(e,t){const r=wd(e,t);return r?r.getAttribute(Ye.draggableId):null}function Sd(e,t){const r=`[${wr.contextId}="${e}"]`,s=qs(document,r).find(o=>o.getAttribute(wr.id)===t);return!s||!Xt(s)?null:s}function kd(e){e.preventDefault()}function St({expected:e,phase:t,isLockActive:r,shouldWarn:n}){return!(!r()||e!==t)}function ta({lockAPI:e,store:t,registry:r,draggableId:n}){if(e.isClaimed())return!1;const s=r.draggable.findById(n);return!(!s||!s.options.isEnabled||!Us(t.getState(),n))}function jd({lockAPI:e,contextId:t,store:r,registry:n,draggableId:s,forceSensorStop:o,sourceEvent:i}){if(!ta({lockAPI:e,store:r,registry:n,draggableId:s}))return null;const c=n.draggable.getById(s),d=Sd(t,c.descriptor.id);if(!d||i&&!c.options.canDragInteractiveElements&&fd(d,i))return null;const g=e.claim(o||_e);let u="PRE_DRAG";function p(){return c.options.shouldRespectForcePress}function m(){return e.isActive(g)}function v(O,R){St({expected:O,phase:u,isLockActive:m,shouldWarn:!0})&&r.dispatch(R())}const x=v.bind(null,"DRAGGING");function b(O){function R(){e.release(),u="COMPLETED"}u!=="PRE_DRAG"&&(R(),S()),r.dispatch(cl(O.liftActionArgs)),u="DRAGGING";function L(B,X={shouldBlockNextClick:!1}){if(O.cleanup(),X.shouldBlockNextClick){const _=ye(window,[{eventName:"click",fn:kd,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(_)}R(),r.dispatch(Os({reason:B}))}return{isActive:()=>St({expected:"DRAGGING",phase:u,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:p,drop:B=>L("DROP",B),cancel:B=>L("CANCEL",B),...O.actions}}function j(O){const R=ut(B=>{x(()=>Rs({client:B}))});return{...b({liftActionArgs:{id:s,clientSelection:O,movementMode:"FLUID"},cleanup:()=>R.cancel(),actions:{move:R}}),move:R}}function w(){const O={moveUp:()=>x(bl),moveRight:()=>x(vl),moveDown:()=>x(yl),moveLeft:()=>x(wl)};return b({liftActionArgs:{id:s,clientSelection:hd(d),movementMode:"SNAP"},cleanup:_e,actions:O})}function A(){St({expected:"PRE_DRAG",phase:u,isLockActive:m,shouldWarn:!0})&&e.release()}return{isActive:()=>St({expected:"PRE_DRAG",phase:u,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:p,fluidLift:j,snapLift:w,abort:A}}const Dd=[sd,ld,gd];function Cd({contextId:e,store:t,registry:r,customSensors:n,enableDefaultSensors:s}){const o=[...s?Dd:[],...n||[]],i=y.useState(()=>Wc())[0],l=P(function(b,j){xt(b)&&!xt(j)&&i.tryAbandon()},[i]);me(function(){let b=t.getState();return t.subscribe(()=>{const w=t.getState();l(b,w),b=w})},[i,t,l]),me(()=>i.tryAbandon,[i.tryAbandon]);const c=P(x=>ta({lockAPI:i,registry:r,store:t,draggableId:x}),[i,r,t]),d=P((x,b,j)=>jd({lockAPI:i,registry:r,contextId:e,store:t,draggableId:x,forceSensorStop:b||null,sourceEvent:j&&j.sourceEvent?j.sourceEvent:null}),[e,i,r,t]),g=P(x=>Nd(e,x),[e]),u=P(x=>{const b=r.draggable.findById(x);return b?b.options:null},[r.draggable]),p=P(function(){i.isClaimed()&&(i.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(Lr()))},[i,t]),m=P(()=>i.isClaimed(),[i]),v=G(()=>({canGetLock:c,tryGetLock:d,findClosestDraggableId:g,findOptionsForDraggable:u,tryReleaseLock:p,isLockClaimed:m}),[c,d,g,u,p,m]);for(let x=0;x<o.length;x++)o[x](v)}const Ed=e=>({onBeforeCapture:t=>{const r=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};q.version.startsWith("16")||q.version.startsWith("17")?r():Sr.flushSync(r)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),Id=e=>({...ht,...e.autoScrollerOptions,durationDampening:{...ht.durationDampening,...e.autoScrollerOptions}});function nt(e){return e.current||S(),e.current}function Ad(e){const{contextId:t,setCallbacks:r,sensors:n,nonce:s,dragHandleUsageInstructions:o}=e,i=y.useRef(null),l=Qs(e),c=P(()=>Ed(l.current),[l]),d=P(()=>Id(l.current),[l]),g=Mc(t),u=Uc({contextId:t,text:o}),p=Ic(t,s),m=P(_=>{nt(i).dispatch(_)},[]),v=G(()=>an({publishWhileDragging:ul,updateDroppableScroll:gl,updateDroppableIsEnabled:ml,updateDroppableIsCombineEnabled:fl,collectionStarting:pl},m),[m]),x=Rc(),b=G(()=>oc(x,v),[x,v]),j=G(()=>Sc({scrollWindow:ic,scrollDroppable:b.scrollDroppable,getAutoScrollerOptions:d,...an({move:Rs},m)}),[b.scrollDroppable,m,d]),w=Pc(t),A=G(()=>rc({announce:g,autoScroller:j,dimensionMarshal:b,focusMarshal:w,getResponders:c,styleMarshal:p}),[g,j,b,w,c,p]);i.current=A;const D=P(()=>{const _=nt(i);_.getState().phase!=="IDLE"&&_.dispatch(Lr())},[]),O=P(()=>{const _=nt(i).getState();return _.phase==="DROP_ANIMATING"?!0:_.phase==="IDLE"?!1:_.isDragging},[]),R=G(()=>({isDragging:O,tryAbort:D}),[O,D]);r(R);const L=P(_=>Us(nt(i).getState(),_),[]),B=P(()=>Le(nt(i).getState()),[]),X=G(()=>({marshal:b,focus:w,contextId:t,canLift:L,isMovementAllowed:B,dragHandleUsageInstructionsId:u,registry:x}),[t,b,u,w,L,B,x]);return Cd({contextId:t,store:A,registry:x,customSensors:n||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),y.useEffect(()=>D,[D]),q.createElement(Zt.Provider,{value:X},q.createElement(Uo,{context:qr,store:A},e.children))}let Pd=0;function _d(){return G(()=>`${Pd++}`,[])}function Rd(){return q.useId()}var Od="useId"in q?Rd:_d;function Td(e){const t=Od(),r=e.dragHandleUsageInstructions||jt.dragHandleUsageInstructions;return q.createElement(Ko,null,n=>q.createElement(Ad,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const Mn={dragging:5e3,dropAnimating:4500},Bd=(e,t)=>t?it.drop(t.duration):e?it.snap:it.fluid,Md=(e,t)=>{if(e)return t?ft.opacity.drop:ft.opacity.combining},Fd=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function Ld(e){const r=e.dimension.client,{offset:n,combineWith:s,dropping:o}=e,i=!!s,l=Fd(e),c=!!o,d=c?yr.drop(n,i):yr.moveTo(n);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Bd(l,o),transform:d,opacity:Md(i,c),zIndex:c?Mn.dropAnimating:Mn.dragging,pointerEvents:"none"}}function $d(e){return{transform:yr.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function Gd(e){return e.type==="DRAGGING"?Ld(e):$d(e)}function Ud(e,t,r=re){const n=window.getComputedStyle(t),s=t.getBoundingClientRect(),o=ls(s,n),i=Pt(o,r),l={client:o,tagName:t.tagName.toLowerCase(),display:n.display},c={x:o.marginBox.width,y:o.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:c,client:o,page:i}}function Wd(e){const t=zr("draggable"),{descriptor:r,registry:n,getDraggableRef:s,canDragInteractiveElements:o,shouldRespectForcePress:i,isEnabled:l}=e,c=G(()=>({canDragInteractiveElements:o,shouldRespectForcePress:i,isEnabled:l}),[o,l,i]),d=P(m=>{const v=s();return v||S(),Ud(r,v,m)},[r,s]),g=G(()=>({uniqueId:t,descriptor:r,options:c,getDimension:d}),[r,d,c,t]),u=y.useRef(g),p=y.useRef(!0);me(()=>(n.draggable.register(u.current),()=>n.draggable.unregister(u.current)),[n.draggable]),me(()=>{if(p.current){p.current=!1;return}const m=u.current;u.current=g,n.draggable.update(g,m)},[g,n.draggable])}var Qr=q.createContext(null);function Bt(e){const t=y.useContext(e);return t||S(),t}function Vd(e){e.preventDefault()}const Hd=e=>{const t=y.useRef(null),r=P((R=null)=>{t.current=R},[]),n=P(()=>t.current,[]),{contextId:s,dragHandleUsageInstructionsId:o,registry:i}=Bt(Zt),{type:l,droppableId:c}=Bt(Qr),d=G(()=>({id:e.draggableId,index:e.index,type:l,droppableId:c}),[e.draggableId,e.index,l,c]),{children:g,draggableId:u,isEnabled:p,shouldRespectForcePress:m,canDragInteractiveElements:v,isClone:x,mapped:b,dropAnimationFinished:j}=e;if(!x){const R=G(()=>({descriptor:d,registry:i,getDraggableRef:n,canDragInteractiveElements:v,shouldRespectForcePress:m,isEnabled:p}),[d,i,n,v,m,p]);Wd(R)}const w=G(()=>p?{tabIndex:0,role:"button","aria-describedby":o,"data-rfd-drag-handle-draggable-id":u,"data-rfd-drag-handle-context-id":s,draggable:!1,onDragStart:Vd}:null,[s,o,u,p]),A=P(R=>{b.type==="DRAGGING"&&b.dropping&&R.propertyName==="transform"&&(q.version.startsWith("16")||q.version.startsWith("17")?j():Sr.flushSync(j))},[j,b]),D=G(()=>{const R=Gd(b),L=b.type==="DRAGGING"&&b.dropping?A:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":s,"data-rfd-draggable-id":u,style:R,onTransitionEnd:L},dragHandleProps:w}},[s,w,u,b,A,r]),O=G(()=>({draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}),[d.droppableId,d.id,d.index,d.type]);return q.createElement(q.Fragment,null,g(D,b.snapshot,O))};var qd=Hd,ra=(e,t)=>e===t,na=e=>{const{combine:t,destination:r}=e;return r?r.droppableId:t?t.droppableId:null};const zd=e=>e.combine?e.combine.draggableId:null,Yd=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function Qd(){const e=te((s,o)=>({x:s,y:o})),t=te((s,o,i=null,l=null,c=null)=>({isDragging:!0,isClone:o,isDropAnimating:!!c,dropAnimation:c,mode:s,draggingOver:i,combineWith:l,combineTargetFor:null})),r=te((s,o,i,l,c=null,d=null,g=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:d,mode:o,offset:s,dimension:i,forceShouldAnimate:g,snapshot:t(o,l,c,d,null)}}));return(s,o)=>{if(xt(s)){if(s.critical.draggable.id!==o.draggableId)return null;const i=s.current.client.offset,l=s.dimensions.draggables[o.draggableId],c=ge(s.impact),d=Yd(s.impact),g=s.forceShouldAnimate;return r(e(i.x,i.y),s.movementMode,l,o.isClone,c,d,g)}if(s.phase==="DROP_ANIMATING"){const i=s.completed;if(i.result.draggableId!==o.draggableId)return null;const l=o.isClone,c=s.dimensions.draggables[o.draggableId],d=i.result,g=d.mode,u=na(d),p=zd(d),v={duration:s.dropDuration,curve:Gr.drop,moveTo:s.newHomeClientOffset,opacity:p?ft.opacity.drop:null,scale:p?ft.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:c,dropping:v,draggingOver:u,combineWith:p,mode:g,forceShouldAnimate:null,snapshot:t(g,l,u,p,v)}}}return null}}function sa(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const Jd={mapped:{type:"SECONDARY",offset:re,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:sa(null)}};function Kd(){const e=te((i,l)=>({x:i,y:l})),t=te(sa),r=te((i,l=null,c)=>({mapped:{type:"SECONDARY",offset:i,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}})),n=i=>i?r(re,i,!0):null,s=(i,l,c,d)=>{const g=c.displaced.visible[i],u=!!(d.inVirtualList&&d.effected[i]),p=Qt(c),m=p&&p.draggableId===i?l:null;if(!g){if(!u)return n(m);if(c.displaced.invisible[i])return null;const b=Qe(d.displacedBy.point),j=e(b.x,b.y);return r(j,m,!0)}if(u)return n(m);const v=c.displacedBy.point,x=e(v.x,v.y);return r(x,m,g.shouldAnimate)};return(i,l)=>{if(xt(i))return i.critical.draggable.id===l.draggableId?null:s(l.draggableId,i.critical.draggable.id,i.impact,i.afterCritical);if(i.phase==="DROP_ANIMATING"){const c=i.completed;return c.result.draggableId===l.draggableId?null:s(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const Xd=()=>{const e=Qd(),t=Kd();return(n,s)=>e(n,s)||t(n,s)||Jd},Zd={dropAnimationFinished:Ts},eu=os(Xd,Zd,null,{context:qr,areStatePropsEqual:ra})(qd);var tu=eu;function aa(e){return Bt(Qr).isUsingCloneFor===e.draggableId&&!e.isClone?null:q.createElement(tu,e)}function ru(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return q.createElement(aa,Pe({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}const oa=e=>t=>e===t,nu=oa("scroll"),su=oa("auto"),Fn=(e,t)=>t(e.overflowX)||t(e.overflowY),au=e=>{const t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return Fn(r,nu)||Fn(r,su)},ou=()=>!1,ia=e=>e==null?null:e===document.body?ou()?e:null:e===document.documentElement?null:au(e)?e:ia(e.parentElement);var Nr=e=>({x:e.scrollLeft,y:e.scrollTop});const la=e=>e?window.getComputedStyle(e).position==="fixed"?!0:la(e.parentElement):!1;var iu=e=>{const t=ia(e),r=la(e);return{closestScrollable:t,isFixedOnPage:r}},lu=({descriptor:e,isEnabled:t,isCombineEnabled:r,isFixedOnPage:n,direction:s,client:o,page:i,closest:l})=>{const c=(()=>{if(!l)return null;const{scrollSize:p,client:m}=l,v=Ls({scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth,height:m.paddingBox.height,width:m.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:m,scrollSize:p,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:v,diff:{value:re,displacement:re}}}})(),d=s==="vertical"?Or:bs,g=qe({page:i,withPlaceholder:null,axis:d,frame:c});return{descriptor:e,isCombineEnabled:r,isFixedOnPage:n,axis:d,isEnabled:t,client:o,page:i,frame:c,subject:g}};const cu=(e,t)=>{const r=cs(e);if(!t||e!==t)return r;const n=r.paddingBox.top-t.scrollTop,s=r.paddingBox.left-t.scrollLeft,o=n+t.scrollHeight,i=s+t.scrollWidth,c=Ar({top:n,right:i,bottom:o,left:s},r.border);return Pr({borderBox:c,margin:r.margin,border:r.border,padding:r.padding})};var du=({ref:e,descriptor:t,env:r,windowScroll:n,direction:s,isDropDisabled:o,isCombineEnabled:i,shouldClipSubject:l})=>{const c=r.closestScrollable,d=cu(e,c),g=Pt(d,n),u=(()=>{if(!c)return null;const m=cs(c),v={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:m,page:Pt(m,n),scroll:Nr(c),scrollSize:v,shouldClipSubject:l}})();return lu({descriptor:t,isEnabled:!o,isCombineEnabled:i,isFixedOnPage:r.isFixedOnPage,direction:s,client:d,page:g,closest:u})};const uu={passive:!1},pu={passive:!0};var Ln=e=>e.shouldPublishImmediately?uu:pu;const kt=e=>e&&e.env.closestScrollable||null;function gu(e){const t=y.useRef(null),r=Bt(Zt),n=zr("droppable"),{registry:s,marshal:o}=r,i=Qs(e),l=G(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=y.useRef(l),d=G(()=>te((D,O)=>{t.current||S();const R={x:D,y:O};o.updateDroppableScroll(l.id,R)}),[l.id,o]),g=P(()=>{const D=t.current;return!D||!D.env.closestScrollable?re:Nr(D.env.closestScrollable)},[]),u=P(()=>{const D=g();d(D.x,D.y)},[g,d]),p=G(()=>ut(u),[u]),m=P(()=>{const D=t.current,O=kt(D);if(D&&O||S(),D.scrollOptions.shouldPublishImmediately){u();return}p()},[p,u]),v=P((D,O)=>{t.current&&S();const R=i.current,L=R.getDroppableRef();L||S();const B=iu(L),X={ref:L,descriptor:l,env:B,scrollOptions:O};t.current=X;const _=du({ref:L,descriptor:l,env:B,windowScroll:D,direction:R.direction,isDropDisabled:R.isDropDisabled,isCombineEnabled:R.isCombineEnabled,shouldClipSubject:!R.ignoreContainerClipping}),F=B.closestScrollable;return F&&(F.setAttribute(Rn.contextId,r.contextId),F.addEventListener("scroll",m,Ln(X.scrollOptions))),_},[r.contextId,l,m,i]),x=P(()=>{const D=t.current,O=kt(D);return D&&O||S(),Nr(O)},[]),b=P(()=>{const D=t.current;D||S();const O=kt(D);t.current=null,O&&(p.cancel(),O.removeAttribute(Rn.contextId),O.removeEventListener("scroll",m,Ln(D.scrollOptions)))},[m,p]),j=P(D=>{const O=t.current;O||S();const R=kt(O);R||S(),R.scrollTop+=D.y,R.scrollLeft+=D.x},[]),w=G(()=>({getDimensionAndWatchScroll:v,getScrollWhileDragging:x,dragStopped:b,scroll:j}),[b,v,x,j]),A=G(()=>({uniqueId:n,descriptor:l,callbacks:w}),[w,l,n]);me(()=>(c.current=A.descriptor,s.droppable.register(A),()=>{t.current&&b(),s.droppable.unregister(A)}),[w,l,b,A,o,s.droppable]),me(()=>{t.current&&o.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,o]),me(()=>{t.current&&o.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,o])}function pr(){}const $n={width:0,height:0,margin:si},mu=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>e||r==="close"?$n:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},fu=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>{const n=mu({isAnimatingOpenOnMount:e,placeholder:t,animate:r});return{display:t.display,boxSizing:"border-box",width:n.width,height:n.height,marginTop:n.margin.top,marginRight:n.margin.right,marginBottom:n.margin.bottom,marginLeft:n.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?it.placeholder:null}},hu=e=>{const t=y.useRef(null),r=P(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:n,onTransitionEnd:s,onClose:o,contextId:i}=e,[l,c]=y.useState(e.animate==="open");y.useEffect(()=>l?n!=="open"?(r(),c(!1),pr):t.current?pr:(t.current=setTimeout(()=>{t.current=null,c(!1)}),r):pr,[n,l,r]);const d=P(u=>{u.propertyName==="height"&&(s(),n==="close"&&o())},[n,o,s]),g=fu({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return q.createElement(e.placeholder.tagName,{style:g,"data-rfd-placeholder-context-id":i,onTransitionEnd:d,ref:e.innerRef})};var xu=q.memo(hu);class bu extends q.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,r){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const yu=e=>{const t=y.useContext(Zt);t||S();const{contextId:r,isMovementAllowed:n}=t,s=y.useRef(null),o=y.useRef(null),{children:i,droppableId:l,type:c,mode:d,direction:g,ignoreContainerClipping:u,isDropDisabled:p,isCombineEnabled:m,snapshot:v,useClone:x,updateViewportMaxScroll:b,getContainerForClone:j}=e,w=P(()=>s.current,[]),A=P((F=null)=>{s.current=F},[]);P(()=>o.current,[]);const D=P((F=null)=>{o.current=F},[]),O=P(()=>{n()&&b({maxScroll:Gs()})},[n,b]);gu({droppableId:l,type:c,mode:d,direction:g,isDropDisabled:p,isCombineEnabled:m,ignoreContainerClipping:u,getDroppableRef:w});const R=G(()=>q.createElement(bu,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:F,data:T,animate:M})=>q.createElement(xu,{placeholder:T,onClose:F,innerRef:D,animate:M,contextId:r,onTransitionEnd:O})),[r,O,e.placeholder,e.shouldAnimatePlaceholder,D]),L=G(()=>({innerRef:A,placeholder:R,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":r}}),[r,l,R,A]),B=x?x.dragging.draggableId:null,X=G(()=>({droppableId:l,type:c,isUsingCloneFor:B}),[l,B,c]);function _(){if(!x)return null;const{dragging:F,render:T}=x,M=q.createElement(aa,{draggableId:F.draggableId,index:F.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(C,I)=>T(C,I,F));return Sa.createPortal(M,j())}return q.createElement(Qr.Provider,{value:X},i(L,v),_())};var vu=yu;function wu(){return document.body||S(),document.body}const Gn={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:wu},ca=e=>{let t={...e},r;for(r in Gn)e[r]===void 0&&(t={...t,[r]:Gn[r]});return t},gr=(e,t)=>e===t.droppable.type,Un=(e,t)=>t.draggables[e.draggable.id],Nu=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},r=te(o=>({draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}})),n=te((o,i,l,c,d,g)=>{const u=d.descriptor.id;if(d.descriptor.droppableId===o){const v=g?{render:g,dragging:r(d.descriptor)}:null,x={isDraggingOver:l,draggingOverWith:l?u:null,draggingFromThisWith:u,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:x,useClone:v}}if(!i)return t;if(!c)return e;const m={isDraggingOver:l,draggingOverWith:u,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}});return(o,i)=>{const l=ca(i),c=l.droppableId,d=l.type,g=!l.isDropDisabled,u=l.renderClone;if(xt(o)){const p=o.critical;if(!gr(d,p))return t;const m=Un(p,o.dimensions),v=ge(o.impact)===c;return n(c,g,v,v,m,u)}if(o.phase==="DROP_ANIMATING"){const p=o.completed;if(!gr(d,p.critical))return t;const m=Un(p.critical,o.dimensions);return n(c,g,na(p.result)===c,ge(p.impact)===c,m,u)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){const p=o.completed;if(!gr(d,p.critical))return t;const m=ge(p.impact)===c,v=!!(p.impact.at&&p.impact.at.type==="COMBINE"),x=p.critical.droppable.id===c;return m?v?e:t:x?e:t}return t}},Su={updateViewportMaxScroll:xl},ku=os(Nu,Su,(e,t,r)=>({...ca(r),...e,...t}),{context:qr,areStatePropsEqual:ra})(vu);var ju=ku;const Ie=[{id:"bahrain",name:"Bahrain International Circuit",country:"Bahrain",location:"Sakhir",length:5.412,laps:57},{id:"jeddah",name:"Jeddah Corniche Circuit",country:"Saudi Arabia",location:"Jeddah",length:6.174,laps:50},{id:"albert_park",name:"Albert Park Circuit",country:"Australia",location:"Melbourne",length:5.303,laps:58},{id:"baku",name:"Baku City Circuit",country:"Azerbaijan",location:"Baku",length:6.003,laps:51},{id:"miami",name:"Miami International Autodrome",country:"USA",location:"Miami",length:5.412,laps:57},{id:"imola",name:"Autodromo Enzo e Dino Ferrari",country:"Italy",location:"Imola",length:4.909,laps:63},{id:"monaco",name:"Circuit de Monaco",country:"Monaco",location:"Monte Carlo",length:3.337,laps:78},{id:"catalunya",name:"Circuit de Barcelona-Catalunya",country:"Spain",location:"Barcelona",length:4.675,laps:66},{id:"villeneuve",name:"Circuit Gilles Villeneuve",country:"Canada",location:"Montreal",length:4.361,laps:70},{id:"red_bull_ring",name:"Red Bull Ring",country:"Austria",location:"Spielberg",length:4.318,laps:71},{id:"silverstone",name:"Silverstone Circuit",country:"United Kingdom",location:"Silverstone",length:5.891,laps:52},{id:"hungaroring",name:"Hungaroring",country:"Hungary",location:"Budapest",length:4.381,laps:70},{id:"spa",name:"Circuit de Spa-Francorchamps",country:"Belgium",location:"Spa",length:7.004,laps:44},{id:"zandvoort",name:"Circuit Zandvoort",country:"Netherlands",location:"Zandvoort",length:4.259,laps:72},{id:"monza",name:"Autodromo Nazionale Monza",country:"Italy",location:"Monza",length:5.793,laps:53},{id:"marina_bay",name:"Marina Bay Street Circuit",country:"Singapore",location:"Singapore",length:5.063,laps:61},{id:"suzuka",name:"Suzuka International Racing Course",country:"Japan",location:"Suzuka",length:5.807,laps:53},{id:"losail",name:"Lusail International Circuit",country:"Qatar",location:"Lusail",length:5.38,laps:57},{id:"cota",name:"Circuit of the Americas",country:"USA",location:"Austin",length:5.513,laps:56},{id:"rodriguez",name:"Autodromo Hermanos Rodriguez",country:"Mexico",location:"Mexico City",length:4.304,laps:71},{id:"interlagos",name:"Autodromo Jose Carlos Pace",country:"Brazil",location:"Sao Paulo",length:4.309,laps:71},{id:"las_vegas",name:"Las Vegas Street Circuit",country:"USA",location:"Las Vegas",length:6.12,laps:50},{id:"yas_marina",name:"Yas Marina Circuit",country:"UAE",location:"Abu Dhabi",length:5.281,laps:58}],Du=ja.map(e=>e.name),Cu=({season:e,onBack:t,onSeasonUpdated:r})=>{const[n,s]=ka(),o=n.get("tab"),[i,l]=y.useState([]),[c,d]=y.useState([]),[g,u]=y.useState([]),[p,m]=y.useState([]),[v,x]=y.useState(e.status),[b,j]=y.useState(!0),[w,A]=y.useState(o&&["drivers","events"].includes(o)?o:"drivers"),D=y.useCallback(f=>{A(f),s(N=>{const E=new URLSearchParams(N);return E.set("tab",f),E})},[s]);y.useEffect(()=>{o&&["drivers","events"].includes(o)&&A(o)},[o]);const[O,R]=y.useState(!1),[L,B]=y.useState(!1),[X,_]=y.useState(!1),F={memberId:"",team:"",number:""},[T,M]=y.useState(F),[C,I]=y.useState({}),[W,J]=y.useState(!1),[K,ue]=y.useState(null),[ee,ce]=y.useState({team:"",number:""}),[ke,we]=y.useState(null),[ie,U]=y.useState("idle"),[Ee,V]=y.useState(""),[Xe,Se]=y.useState(!1),[je,Ze]=y.useState(null),Z=y.useMemo(()=>Du,[]),De=y.useMemo(()=>{if(!(K!=null&&K.team))return Z;const f=K.team;return Z.includes(f)?Z:[...Z,f]},[Z,K]),tr=f=>{if(!f)return"TBD";const N=new Date(f);return Number.isNaN(N.getTime())?"TBD":N.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},et=f=>{const N=[f.firstName,f.lastName].filter(E=>!!E&&E.trim().length>0);return N.length>0?N.join(" "):f.name},rr=f=>{const N=[f.firstName,f.lastName].filter(E=>!!E&&E.trim().length>0);return N.length>0?N.map(E=>E.charAt(0)).join("").toUpperCase():f.name.split(" ").filter(Boolean).map(E=>E[0]).join("").toUpperCase()},[Q,ae]=y.useState({track_id:"",event_name:"",date:"",status:"scheduled",session_types:{practice:!1,qualifying:!1,race:!1}}),[h,k]=y.useState({track_id:"",event_name:"",date:"",status:"scheduled",session_types:{practice:!1,qualifying:!1,race:!1}});y.useEffect(()=>{$()},[e.id]),y.useEffect(()=>{x(e.status)},[e.status]);const $=async()=>{try{j(!0);const[f,N,E,H]=await Promise.all([Ae("/api/drivers"),Ae(`/api/seasons/${e.id}/participants`),Ae(`/api/seasons/${e.id}/events`),Ae("/api/seasons")]);if(f.ok){const Y=await f.json();l(Y.drivers||[])}if(N.ok){const Y=await N.json();d(Y.participants||[])}if(E.ok){const Be=((await E.json()).events||[]).slice().sort((Ce,Me)=>{const Ue=Ce.order_index??Number.MAX_SAFE_INTEGER,wt=Me.order_index??Number.MAX_SAFE_INTEGER;if(Ue!==wt)return Ue-wt;const We=Ce.race_date?Date.parse(Ce.race_date):Number.POSITIVE_INFINITY,Jr=Me.race_date?Date.parse(Me.race_date):Number.POSITIVE_INFINITY;return We!==Jr?We-Jr:Ce.created_at.localeCompare(Me.created_at)});u(Be)}if(H.ok){const oe=(await H.json()).seasons||[];if(m(oe),r){const Be=oe.find(Ce=>Ce.id===e.id);Be&&(r(Be),x(Be.status))}}}catch(f){Ve.error("Error loading season data:",f)}finally{j(!1)}},he=async()=>{const f={};if(T.memberId||(f.memberId="Select a league member"),T.team.trim()||(f.team="Team is required"),Object.keys(f).length>0){I(f);return}try{U("loading"),V("Adding member to season..."),I({});const N=await $e(`/api/seasons/${e.id}/participants`,{driverId:T.memberId,team:T.team.trim(),number:T.number?parseInt(T.number,10):void 0});if(N.ok)U("success"),V("Driver added to season successfully"),R(!1),M(F),$();else{const E=await N.json();throw new Error(E.message||"Failed to add member to season")}}catch(N){U("error"),V(N instanceof Error?N.message:"Failed to add member to season")}},xe=f=>{ue(f),ce({team:f.team||"",number:f.number!=null?String(f.number):""}),J(!0)},Te=async()=>{if(K)try{U("loading"),V("Updating season member...");const f=ee.team.trim(),N=ee.number.trim(),E=await at(`/api/seasons/${e.id}/participants/${K.id}`,{team:f,number:N!==""?parseInt(N,10):void 0});if(E.ok)U("success"),V("Season member updated successfully"),J(!1),ue(null),ce({team:"",number:""}),$();else{const H=await E.json();throw new Error(H.message||"Failed to update season member")}}catch(f){U("error"),V(f instanceof Error?f.message:"Failed to update season member")}},da=async()=>{try{U("loading"),V("Adding event to season...");const f=Ie.find(oe=>oe.id===Q.track_id);if(!f)throw new Error("Please select a track");const N=[];if(Q.session_types.practice&&N.push("Practice"),Q.session_types.qualifying&&N.push("Qualifying"),Q.session_types.race&&N.push("Race"),N.length===0)throw new Error("Please select at least one session type");const E=Q.event_name.trim(),H={track_name:E||f.name,event_name:E||f.name,track_id:f.id,status:Q.status,date:Q.date||null,session_types:N.join(", "),session_type:10},Y=await $e(`/api/seasons/${e.id}/events`,H);if(Y.ok)U("success"),V("Event added to season successfully"),B(!1),ae({track_id:"",event_name:"",date:"",status:"scheduled",session_types:{practice:!1,qualifying:!1,race:!1}}),$();else{const oe=await Y.json();throw new Error(oe.message||"Failed to add event to season")}}catch(f){U("error"),V(f instanceof Error?f.message:"Failed to add event to season")}},ua=f=>{var H;const N=Ie.find(Y=>Y.id===f.track_id)||Ie.find(Y=>{var oe;return Y.name===((oe=f.track)==null?void 0:oe.name)}),E=f.session_types?f.session_types.split(", "):[];k({track_id:(N==null?void 0:N.id)||"",event_name:f.event_name||f.short_event_name||((H=f.track)==null?void 0:H.eventName)||f.track_name||"",date:f.race_date||"",status:f.status??"scheduled",session_types:{practice:E.includes("Practice"),qualifying:E.includes("Qualifying"),race:E.includes("Race")}}),we(f),_(!0)},pa=y.useCallback(async f=>{if(!f.destination||f.destination.index===f.source.index)return;const N=g.slice(),E=g.slice(),[H]=E.splice(f.source.index,1);E.splice(f.destination.index,0,H),u(E),U("idle"),V("");try{const Y=await $e(`/api/seasons/${e.id}/events/reorder`,{orderedEventIds:E.map(oe=>oe.id)});if(!Y.ok){const oe=await Y.json().catch(()=>({}));throw new Error(oe.error||"Failed to update event order")}U("idle"),V("")}catch(Y){Ve.error("Failed to reorder events",Y),U("error"),V(Y instanceof Error?Y.message:"Failed to update event order"),u(N)}},[g,e.id]),ga=async()=>{if(ke)try{U("loading"),V("Updating event...");const f=Ie.find(Y=>Y.id===h.track_id);if(!f)throw new Error("Please select a track");const N=[];if(h.session_types.practice&&N.push("Practice"),h.session_types.qualifying&&N.push("Qualifying"),h.session_types.race&&N.push("Race"),N.length===0)throw new Error("Please select at least one session type");const E=h.event_name.trim(),H=await at(`/api/seasons/${e.id}/events/${ke.id}`,{track_name:E||f.name,event_name:E||f.name,status:h.status,date:h.date||null,session_types:N.join(", "),session_type:10});if(H.ok)U("success"),V("Event updated successfully"),_(!1),we(null),k({track_id:"",event_name:"",date:"",status:"scheduled",session_types:{practice:!1,qualifying:!1,race:!1}}),$();else{const Y=await H.json();throw new Error(Y.message||"Failed to update event")}}catch(f){U("error"),V(f instanceof Error?f.message:"Failed to update event")}},ma=async f=>{if(confirm("Are you sure you want to delete this event?"))try{U("loading"),V("Deleting event...");const N=await Ct(`/api/seasons/${e.id}/events/${f}`);if(N.ok)U("success"),V("Event deleted successfully"),$();else{const E=await N.json();throw new Error(E.message||"Failed to delete event")}}catch(N){U("error"),V(N instanceof Error?N.message:"Failed to delete event")}},fa=async f=>{if(confirm("Are you sure you want to remove this member from the season?"))try{U("loading"),V("Removing member from season...");const N=await Ct(`/api/seasons/${e.id}/participants/${f}`);if(N.ok)U("success"),V("Driver removed from season successfully"),$();else{const E=await N.json();throw new Error(E.message||"Failed to remove member from season")}}catch(N){U("error"),V(N instanceof Error?N.message:"Failed to remove member from season")}},ha=f=>({0:"Unknown",1:"Practice 1",2:"Practice 2",3:"Practice 3",4:"Short Practice",5:"Qualifying 1",6:"Qualifying 2",7:"Qualifying 3",8:"Short Qualifying",9:"One Shot Qualifying",10:"Race",11:"Race 2",12:"Time Trial"})[f]||"Unknown",xa=async f=>{try{if(f==="active"){const N=p.filter(E=>E.status==="active"&&E.id!==e.id);if(N.length>0){Ze(N[0]),Se(!0);return}await ba();return}await ya(f)}catch(N){U("error"),V(N instanceof Error?N.message:"Failed to update season status")}},ba=async()=>{try{U("loading"),V("Setting current season...");const f=await $e(`/api/seasons/${e.id}/activate`);if(!f.ok){const H=await f.json();throw new Error(H.message||"Failed to update season status")}const N=await f.json(),E=N==null?void 0:N.season;U("success"),V("Season status updated successfully"),E?(x(E.status),r==null||r(E)):x("active"),$()}catch(f){U("error"),V(f instanceof Error?f.message:"Failed to update season status")}},ya=async f=>{if(f!=="active")try{U("loading"),V("Updating season status...");const N=await at(`/api/seasons/${e.id}`,{status:f});if(!N.ok){const Y=await N.json();throw new Error(Y.message||"Failed to update season status")}const E=await N.json(),H=E==null?void 0:E.season;U("success"),V("Season status updated successfully"),H?(x(H.status),r==null||r(H)):x(f),$()}catch(N){U("error"),V(N instanceof Error?N.message:"Failed to update season status")}},va=()=>{Se(!1),Ze(null)},wa=f=>{switch(f){case"scheduled":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return b?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading season details..."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:t,className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:a.jsx(Vn,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.name}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Season ",e.year]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Status:"}),a.jsxs("select",{value:v,onChange:f=>xa(f.target.value),className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-300 focus:ring-red-500 focus:border-red-500",children:[a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"completed",children:"Completed"})]})]})]}),Ee&&a.jsx("div",{className:`p-3 rounded-lg ${ie==="success"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":ie==="error"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}`,children:Ee}),a.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>D("drivers"),className:`flex items-center space-x-2 px-4 py-2 rounded-md transition-colors ${w==="drivers"?"bg-red-600 text-white":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[a.jsx(fr,{className:"w-4 h-4"}),a.jsxs("span",{children:["Drivers (",c.length,")"]})]}),a.jsxs("button",{onClick:()=>D("events"),className:`flex items-center space-x-2 px-4 py-2 rounded-md transition-colors ${w==="events"?"bg-red-600 text-white":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[a.jsx(Et,{className:"w-4 h-4"}),a.jsxs("span",{children:["Events (",g.length,")"]})]})]}),w==="drivers"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Season Drivers"}),a.jsxs("button",{onClick:()=>{M(F),I({}),R(!0)},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[a.jsx(lt,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Driver"})]})]}),c.length>0?a.jsx("div",{className:"grid gap-4",children:c.map(f=>a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-red-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-semibold text-sm",children:rr(f)})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:et(f)}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:f.team?`${f.team}${f.number?`  #${f.number}`:""}`:"Team not set"}),a.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:["Steam ID: ",f.steam_id||"Not set"]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",onClick:N=>N.stopPropagation(),children:[a.jsxs("button",{onClick:()=>xe(f),className:"text-gray-400 hover:text-blue-500 transition-colors px-2 py-1 rounded text-sm flex items-center space-x-1",children:[a.jsx(_a,{className:"w-3 h-3"}),a.jsx("span",{children:"Edit"})]}),a.jsxs("button",{onClick:()=>fa(f.id),className:"text-gray-400 hover:text-red-500 transition-colors px-2 py-1 rounded text-sm flex items-center space-x-1",children:[a.jsx(ct,{className:"w-3 h-3"}),a.jsx("span",{children:"Remove"})]})]})]})},f.id))}):a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx(fr,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"No drivers added to this season yet"}),a.jsx("p",{className:"text-sm",children:"Add drivers to start building your season roster"})]})]}),w==="events"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Season Events"}),a.jsxs("button",{onClick:()=>B(!0),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[a.jsx(lt,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Event"})]})]}),g.length>0?a.jsx(Td,{onDragEnd:pa,children:a.jsx(ju,{droppableId:"season-events",children:(f,N)=>a.jsxs("div",{ref:f.innerRef,...f.droppableProps,className:"flex flex-col gap-3",children:[g.map((E,H)=>{var Ce,Me;const Y=E.short_event_name||E.event_name||((Ce=E.track)==null?void 0:Ce.eventName)||E.track_name||"Event TBD",oe=((Me=E.track)==null?void 0:Me.name)||E.track_name||"Circuit TBD",Be=tr(E.race_date);return a.jsx(ru,{draggableId:E.id,index:H,children:(Ue,wt)=>a.jsxs("div",{ref:Ue.innerRef,...Ue.draggableProps,onClick:()=>ua(E),className:`flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors cursor-pointer ${wt.isDragging?"shadow-lg ring-2 ring-red-400 dark:ring-red-500":""}`,children:[a.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[a.jsx("div",{...Ue.dragHandleProps,onClick:We=>We.stopPropagation(),className:"flex h-10 w-10 items-center justify-center rounded-full bg-gray-200 text-gray-600 transition hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600",children:a.jsx(Ra,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:a.jsx(Wn,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:Y}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-gray-500 dark:text-gray-400",children:[a.jsx("span",{children:oe}),a.jsx("span",{children:Be}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${wa(E.status)}`,children:E.status.charAt(0).toUpperCase()+E.status.slice(1)})]}),a.jsxs("div",{className:"mt-2 text-xs text-gray-400 dark:text-gray-500",children:["Sessions: ",E.session_types||ha(E.session_type||0)]})]})]})]}),a.jsx("div",{className:"flex items-center space-x-2",onClick:We=>We.stopPropagation(),children:a.jsxs("button",{onClick:()=>ma(E.id),className:"text-gray-400 hover:text-red-500 transition-colors px-2 py-1 rounded text-sm flex items-center space-x-1",children:[a.jsx(ct,{className:"w-3 h-3"}),a.jsx("span",{children:"Delete"})]})})]})},E.id)}),f.placeholder]})})}):a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx(Et,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"No events added to this season yet"}),a.jsx("p",{className:"text-sm",children:"Add events to schedule races and sessions"})]})]}),O&&a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-panel max-w-md p-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Add Driver to Season"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select League Member *"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700",value:T.memberId,onChange:f=>{M({...T,memberId:f.target.value}),C.memberId&&I({...C,memberId:void 0})},children:[a.jsx("option",{value:"",children:"Choose a league member..."}),i.filter(f=>!c.some(N=>N.id===f.id)).map(f=>a.jsxs("option",{value:f.id,children:[et(f)," ",f.steam_id?`(${f.steam_id})`:""]},f.id))]}),C.memberId&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:C.memberId})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Team *"}),a.jsxs("select",{className:`w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 ${C.team?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-red-500"}`,value:T.team,onChange:f=>{M({...T,team:f.target.value}),C.team&&I({...C,team:void 0})},children:[a.jsx("option",{value:"",children:"Select a team"}),Z.map(f=>a.jsx("option",{value:f,children:f},f))]}),C.team&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:C.team})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Car Number"}),a.jsx("input",{type:"number",value:T.number,onChange:f=>M({...T,number:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Optional",min:"0"})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsx("button",{onClick:()=>{R(!1),M(F),I({})},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:he,disabled:ie==="loading",className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white rounded-lg transition-colors",children:ie==="loading"?"Adding...":"Add Driver"})]})]})}),W&&K&&a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-panel max-w-md p-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:["Edit ",et(K)]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Team"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",value:ee.team,onChange:f=>ce({...ee,team:f.target.value}),children:[a.jsx("option",{value:"",children:"Select a team"}),De.map(f=>a.jsx("option",{value:f,children:f},f))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Car Number"}),a.jsx("input",{type:"number",value:ee.number,onChange:f=>ce({...ee,number:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Optional",min:"0"})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsx("button",{onClick:()=>{J(!1),ue(null),ce({team:"",number:""})},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:Te,disabled:ie==="loading",className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white rounded-lg transition-colors",children:ie==="loading"?"Updating...":"Update Driver"})]})]})}),L&&a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-panel max-w-md p-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:["Add Event to ",e.name]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Track"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700",value:Q.track_id,onChange:f=>{const N=f.target.value,E=Ie.find(H=>H.id===N);ae(H=>({...H,track_id:N,event_name:H.event_name||(E==null?void 0:E.name)||""}))},children:[a.jsx("option",{value:"",children:"-- Select a track --"}),Ie.map(f=>a.jsxs("option",{value:f.id,children:[f.name," (",f.country,")"]},f.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Event Name"}),a.jsx("input",{type:"text",value:Q.event_name,onChange:f=>ae(N=>({...N,event_name:f.target.value})),placeholder:"e.g. Austrian Grand Prix",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 focus:ring-red-500 focus:border-red-500"})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Event Date (optional)"}),a.jsx("input",{type:"date",value:Q.date,onChange:f=>ae(N=>({...N,date:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 focus:ring-red-500 focus:border-red-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),a.jsxs("select",{value:Q.status,onChange:f=>ae(N=>({...N,status:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 focus:ring-red-500 focus:border-red-500",children:[a.jsx("option",{value:"scheduled",children:"Scheduled"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Session Types"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:Q.session_types.practice,onChange:f=>ae({...Q,session_types:{...Q.session_types,practice:f.target.checked}}),className:"w-4 h-4 text-red-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-red-500"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Practice"})]}),a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:Q.session_types.qualifying,onChange:f=>ae({...Q,session_types:{...Q.session_types,qualifying:f.target.checked}}),className:"w-4 h-4 text-red-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-red-500"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Qualifying"})]}),a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:Q.session_types.race,onChange:f=>ae({...Q,session_types:{...Q.session_types,race:f.target.checked}}),className:"w-4 h-4 text-red-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-red-500"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Race"})]})]})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsx("button",{onClick:()=>{B(!1),ae({track_id:"",event_name:"",date:"",status:"scheduled",session_types:{practice:!1,qualifying:!1,race:!1}})},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:da,disabled:ie==="loading"||!Q.track_id||!Q.session_types.practice&&!Q.session_types.qualifying&&!Q.session_types.race,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white rounded-lg transition-colors",children:ie==="loading"?"Saving...":"Add Event"})]})]})}),X&&ke&&a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-panel max-w-md p-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Edit Event"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Track"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700",value:h.track_id,onChange:f=>{const N=f.target.value,E=Ie.find(H=>H.id===N);k(H=>({...H,track_id:N,event_name:H.event_name||(E==null?void 0:E.name)||""}))},children:[a.jsx("option",{value:"",children:"-- Select a track --"}),Ie.map(f=>a.jsxs("option",{value:f.id,children:[f.name," (",f.country,")"]},f.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Event Name"}),a.jsx("input",{type:"text",value:h.event_name,onChange:f=>k(N=>({...N,event_name:f.target.value})),placeholder:"e.g. Austrian Grand Prix",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Event Date (optional)"}),a.jsx("input",{type:"date",value:h.date,onChange:f=>k(N=>({...N,date:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),a.jsxs("select",{value:h.status,onChange:f=>k(N=>({...N,status:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"scheduled",children:"Scheduled"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Session Types"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:h.session_types.practice,onChange:f=>k({...h,session_types:{...h.session_types,practice:f.target.checked}}),className:"w-4 h-4 text-red-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-red-500"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Practice"})]}),a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:h.session_types.qualifying,onChange:f=>k({...h,session_types:{...h.session_types,qualifying:f.target.checked}}),className:"w-4 h-4 text-red-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-red-500"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Qualifying"})]}),a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:h.session_types.race,onChange:f=>k({...h,session_types:{...h.session_types,race:f.target.checked}}),className:"w-4 h-4 text-red-600 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-red-500"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Race"})]})]})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsx("button",{onClick:()=>{_(!1),we(null),k({track_id:"",event_name:"",date:"",status:"scheduled",session_types:{practice:!1,qualifying:!1,race:!1}})},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:ga,disabled:ie==="loading"||!h.track_id||!h.session_types.practice&&!h.session_types.qualifying&&!h.session_types.race,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors",children:ie==="loading"?"Saving...":"Update Event"})]})]})}),Xe&&je&&a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-panel max-w-md p-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Season Already Active"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:"Only one season can be active at a time. The following season is currently active:"}),a.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 p-3 rounded-lg",children:a.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[je.name," (",je.year,")"]})})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"To activate this season, you must first deactivate the current active season from its own page."}),a.jsx("div",{className:"flex space-x-3",children:a.jsx("button",{onClick:va,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Cancel"})})]})})]})},Eu=()=>{const[e,t]=y.useState([]),[r,n]=y.useState([]),[s,o]=y.useState([]),[i,l]=y.useState(!0),[c,d]=y.useState(!1),[g,u]=y.useState(!1),[p,m]=y.useState(!1),[v,x]=y.useState(!1),[b,j]=y.useState(null),[w,A]=y.useState(null),[D,O]=y.useState(null),[R,L]=y.useState(null),[B,X]=y.useState({name:"",year:new Date().getFullYear(),setAsCurrent:!1}),[_,F]=y.useState({track_id:"",track_name:"",status:"scheduled",session_type:10,session_duration:0,weather_air_temp:20,weather_track_temp:25,weather_rain_percentage:0}),[T,M]=y.useState("idle"),[C,I]=y.useState(""),[W,J]=y.useState({}),[K,ue]=y.useState({});y.useEffect(()=>{ee()},[]),y.useEffect(()=>{D&&ce(D.id)},[D]);const ee=async()=>{try{l(!0);const[h,k]=await Promise.all([Ae("/api/seasons"),Ae("/api/tracks")]);if(h.ok){const he=(await h.json()).seasons||[];if(t(he),D){const xe=he.find(Te=>Te.id===D.id);xe&&O(xe)}if(R){const xe=he.find(Te=>Te.id===R.id);xe&&L(xe)}if(b){const xe=he.find(Te=>Te.id===b.id);xe&&j(xe)}}if(k.ok){const $=await k.json();o($.tracks||[])}}catch(h){Ve.error("Error loading data:",h),M("error"),I("Failed to load data")}finally{l(!1)}},ce=async h=>{try{const k=await Ae(`/api/seasons/${h}/events`);if(k.ok){const $=await k.json();n($.events||[])}}catch(k){Ve.error("Error loading events:",k)}},ke=h=>({0:"Unknown",1:"Practice 1",2:"Practice 2",3:"Practice 3",4:"Short Practice",5:"Qualifying 1",6:"Qualifying 2",7:"Qualifying 3",8:"Short Qualifying",9:"OSQ",10:"Race",11:"Race 2",12:"Time Trial"})[h]||"Unknown",we=h=>{switch(h){case"active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"completed":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},ie=h=>{switch(h){case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"scheduled":default:return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}},U=h=>{switch(h){case"active":return"Active";case"completed":return"Completed";default:return"Draft"}},Ee=async()=>{const h={};if(B.name.trim()||(h.name="Season name is required"),(B.year<2020||B.year>2030)&&(h.year="Year must be between 2020 and 2030"),Object.keys(h).length>0){J(h);return}J({});try{M("loading"),I("Creating season...");const k=await $e("/api/seasons",{name:B.name.trim(),year:B.year,startDate:new Date().toISOString().split("T")[0],status:B.setAsCurrent?"active":"draft",setAsCurrent:B.setAsCurrent});if(k.ok)M("success"),I("Season created successfully"),X({name:"",year:new Date().getFullYear(),setAsCurrent:!1}),J({}),d(!1),ee();else{const $=await k.json();throw new Error($.message||"Failed to create season")}}catch(k){M("error"),I(k instanceof Error?k.message:"Failed to create season")}},V=h=>{L(h)},Xe=()=>{L(null),ee()},Se=h=>{t(k=>k.map($=>$.id===h.id?{...$,...h}:$)),O(k=>k&&k.id===h.id?{...k,...h}:k),L(k=>k&&k.id===h.id?{...k,...h}:k),j(k=>k&&k.id===h.id?{...k,...h}:k)},je=async()=>{if(b){if(!b.name.trim()){M("error"),I("Season name is required");return}if(b.year<2020||b.year>2030){M("error"),I("Year must be between 2020 and 2030");return}try{M("loading"),I("Updating season...");const h={name:b.name.trim(),year:b.year};(b.status==="draft"||b.status==="completed")&&(h.status=b.status);const k=await at(`/api/seasons/${b.id}`,h);if(k.ok)M("success"),I("Season updated successfully"),u(!1),j(null),ee();else{const $=await k.json();throw new Error($.message||"Failed to update season")}}catch(h){M("error"),I(h instanceof Error?h.message:"Failed to update season")}}},Ze=async h=>{if(confirm("Are you sure you want to delete this season? This will also delete all associated races, drivers, and results. This action cannot be undone."))try{M("loading"),I("Deleting season...");const k=await Ct(`/api/seasons/${h}`);if(k.ok)M("success"),I("Season deleted successfully"),ee();else{const $=await k.json();throw new Error($.message||"Failed to delete season")}}catch(k){M("error"),I(k instanceof Error?k.message:"Failed to delete season")}},Z=async h=>{try{M("loading"),I("Setting current season...");const k=await $e(`/api/seasons/${h}/activate`);if(!k.ok){const xe=await k.json();throw new Error(xe.message||"Failed to activate season")}const he=(await k.json()).season;M("success"),I(`${(he==null?void 0:he.name)||"Season"} is now the current season`),he&&Se(he),await ee()}catch(k){M("error"),I(k instanceof Error?k.message:"Failed to activate season")}},De=h=>{if(b){if(h==="active"){Z(b.id);return}j({...b,status:h})}},tr=async()=>{if(D){if(!_.track_id){M("error"),I("Please select a track");return}try{M("loading"),I("Creating event...");const h=await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({season_id:D.id,track_id:_.track_id,track_name:_.track_name,status:_.status,session_type:_.session_type,session_duration:_.session_duration,weather_air_temp:_.weather_air_temp,weather_track_temp:_.weather_track_temp,weather_rain_percentage:_.weather_rain_percentage})});if(h.ok)M("success"),I("Event created successfully"),F({track_id:"",track_name:"",status:"scheduled",session_type:10,session_duration:0,weather_air_temp:20,weather_track_temp:25,weather_rain_percentage:0}),m(!1),ce(D.id);else{const k=await h.json();throw new Error(k.message||"Failed to create event")}}catch(h){M("error"),I(h instanceof Error?h.message:"Failed to create event")}}},et=h=>{A(h),x(!0)},rr=async()=>{if(w){if(!w.track_id){M("error"),I("Please select a track");return}try{M("loading"),I("Updating event...");const h=await fetch(`/api/events/${w.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({track_id:w.track_id,track_name:w.track_name,status:w.status,session_type:w.session_type,session_duration:w.session_duration,weather_air_temp:w.weather_air_temp,weather_track_temp:w.weather_track_temp,weather_rain_percentage:w.weather_rain_percentage})});if(h.ok)M("success"),I("Event updated successfully"),x(!1),A(null),D&&ce(D.id);else{const k=await h.json();throw new Error(k.message||"Failed to update event")}}catch(h){M("error"),I(h instanceof Error?h.message:"Failed to update event")}}},Q=async h=>{if(confirm("Are you sure you want to delete this event? This action cannot be undone."))try{M("loading"),I("Deleting event...");const k=await fetch(`/api/events/${h}`,{method:"DELETE"});if(k.ok)M("success"),I("Event deleted successfully"),D&&ce(D.id);else{const $=await k.json();throw new Error($.message||"Failed to delete event")}}catch(k){M("error"),I(k instanceof Error?k.message:"Failed to delete event")}},ae=()=>{M("idle"),I("")};return i?a.jsxs("div",{className:"flex items-center justify-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"}),a.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"Loading seasons..."})]}):R?a.jsx(Cu,{season:R,onBack:Xe,onSeasonUpdated:Se}):D?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>O(null),className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:a.jsx(Vn,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:D.name}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Events Management"})]})]}),a.jsxs("button",{onClick:()=>m(!0),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[a.jsx(lt,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Event"})]})]}),T!=="idle"&&a.jsxs("div",{className:`p-4 rounded-lg flex items-center justify-between ${T==="success"?"bg-green-500/20 text-green-400":T==="error"?"bg-red-500/20 text-red-400":"bg-blue-500/20 text-blue-400"}`,children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[T==="success"&&a.jsx(st,{className:"w-5 h-5"}),T==="error"&&a.jsx(Dt,{className:"w-5 h-5"}),T==="loading"&&a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-400"}),a.jsx("span",{children:C})]}),a.jsx("button",{onClick:ae,className:"text-gray-400 hover:text-gray-600",children:a.jsx(mr,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 shadow-sm",children:r.length>0?a.jsx("div",{className:"flex flex-col gap-3",children:r.map(h=>{const k=s.find($=>$.id===h.track_id);return a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors cursor-pointer",onClick:()=>et(h),children:[a.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[a.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center text-white",children:a.jsx(Wn,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:(k==null?void 0:k.name)||h.track_name}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{children:["Type: ",ke(Number(h.session_type)||0)]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${ie(h.status)}`,children:h.status.charAt(0).toUpperCase()+h.status.slice(1)})]})]})]}),a.jsx("div",{className:"flex items-center space-x-2",onClick:$=>$.stopPropagation(),children:a.jsxs("button",{onClick:()=>Q(h.id),className:"text-gray-400 hover:text-red-500 transition-colors px-2 py-1 rounded text-sm flex items-center space-x-1",children:[a.jsx(ct,{className:"w-3 h-3"}),a.jsx("span",{children:"Delete"})]})})]},h.id)})}):a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx(Et,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"No events created yet"}),a.jsx("p",{className:"text-sm",children:"Add your first event to get started"})]})}),p&&a.jsx("div",{className:"modal-overlay",onClick:()=>m(!1),children:a.jsxs("div",{className:"modal-panel max-w-2xl p-6 max-h-[90vh] overflow-y-auto",onClick:h=>h.stopPropagation(),children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:["Add Event to ",D.name]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Track *"}),a.jsxs("select",{value:_.track_id,onChange:h=>{const k=s.find($=>$.id===h.target.value);F({..._,track_id:h.target.value,track_name:(k==null?void 0:k.name)||""})},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[a.jsx("option",{value:"",children:"Select a track..."}),s.map(h=>a.jsxs("option",{value:h.id,children:[h.name," (",h.country,")"]},h.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Session Type"}),a.jsxs("select",{value:_.session_type,onChange:h=>F({..._,session_type:parseInt(h.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[a.jsx("option",{value:1,children:"Practice 1"}),a.jsx("option",{value:2,children:"Practice 2"}),a.jsx("option",{value:3,children:"Practice 3"}),a.jsx("option",{value:4,children:"Short Practice"}),a.jsx("option",{value:5,children:"Qualifying 1"}),a.jsx("option",{value:6,children:"Qualifying 2"}),a.jsx("option",{value:7,children:"Qualifying 3"}),a.jsx("option",{value:8,children:"Short Qualifying"}),a.jsx("option",{value:9,children:"OSQ"}),a.jsx("option",{value:10,children:"Race"}),a.jsx("option",{value:11,children:"Race 2"}),a.jsx("option",{value:12,children:"Time Trial"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),a.jsxs("select",{value:_.status,onChange:h=>F({..._,status:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[a.jsx("option",{value:"scheduled",children:"Scheduled"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Session Duration (minutes)"}),a.jsx("input",{type:"number",value:_.session_duration,onChange:h=>F({..._,session_duration:parseInt(h.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Air Temperature (C)"}),a.jsx("input",{type:"number",value:_.weather_air_temp,onChange:h=>F({..._,weather_air_temp:parseInt(h.target.value)||20}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",min:"-10",max:"50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Track Temperature (C)"}),a.jsx("input",{type:"number",value:_.weather_track_temp,onChange:h=>F({..._,weather_track_temp:parseInt(h.target.value)||25}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",min:"-10",max:"60"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rain Percentage (%)"}),a.jsx("input",{type:"number",value:_.weather_rain_percentage,onChange:h=>F({..._,weather_rain_percentage:parseInt(h.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",min:"0",max:"100"})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsx("button",{onClick:()=>{m(!1),F({track_id:"",track_name:"",status:"scheduled",session_type:10,session_duration:0,weather_air_temp:20,weather_track_temp:25,weather_rain_percentage:0}),ae()},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:tr,disabled:T==="loading",className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white rounded-lg transition-colors",children:T==="loading"?"Creating...":"Create Event"})]})]})}),v&&w&&a.jsx("div",{className:"modal-overlay",onClick:()=>x(!1),children:a.jsxs("div",{className:"modal-panel max-w-2xl p-6 max-h-[90vh] overflow-y-auto",onClick:h=>h.stopPropagation(),children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Edit Event"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Track *"}),a.jsxs("select",{value:w.track_id,onChange:h=>{const k=s.find($=>$.id===h.target.value);A({...w,track_id:h.target.value,track_name:(k==null?void 0:k.name)||""})},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[a.jsx("option",{value:"",children:"Select a track..."}),s.map(h=>a.jsxs("option",{value:h.id,children:[h.name," (",h.country,")"]},h.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Session Type"}),a.jsxs("select",{value:w.session_type||10,onChange:h=>A({...w,session_type:parseInt(h.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[a.jsx("option",{value:1,children:"Practice 1"}),a.jsx("option",{value:2,children:"Practice 2"}),a.jsx("option",{value:3,children:"Practice 3"}),a.jsx("option",{value:4,children:"Short Practice"}),a.jsx("option",{value:5,children:"Qualifying 1"}),a.jsx("option",{value:6,children:"Qualifying 2"}),a.jsx("option",{value:7,children:"Qualifying 3"}),a.jsx("option",{value:8,children:"Short Qualifying"}),a.jsx("option",{value:9,children:"OSQ"}),a.jsx("option",{value:10,children:"Race"}),a.jsx("option",{value:11,children:"Race 2"}),a.jsx("option",{value:12,children:"Time Trial"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),a.jsxs("select",{value:w.status,onChange:h=>A({...w,status:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[a.jsx("option",{value:"scheduled",children:"Scheduled"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Session Duration (minutes)"}),a.jsx("input",{type:"number",value:w.session_duration||0,onChange:h=>A({...w,session_duration:parseInt(h.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Air Temperature (C)"}),a.jsx("input",{type:"number",value:w.weather_air_temp||20,onChange:h=>A({...w,weather_air_temp:parseInt(h.target.value)||20}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",min:"-10",max:"50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Track Temperature (C)"}),a.jsx("input",{type:"number",value:w.weather_track_temp||25,onChange:h=>A({...w,weather_track_temp:parseInt(h.target.value)||25}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",min:"-10",max:"60"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rain Percentage (%)"}),a.jsx("input",{type:"number",value:w.weather_rain_percentage||0,onChange:h=>A({...w,weather_rain_percentage:parseInt(h.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",min:"0",max:"100"})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsx("button",{onClick:()=>{x(!1),A(null),ae()},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:rr,disabled:T==="loading",className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white rounded-lg transition-colors",children:T==="loading"?"Updating...":"Update Event"})]})]})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Seasons"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage your F1 league seasons"})]}),a.jsxs("button",{onClick:()=>d(!0),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[a.jsx(lt,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Season"})]})]}),T!=="idle"&&a.jsxs("div",{className:`p-4 rounded-lg flex items-center justify-between ${T==="success"?"bg-green-500/20 text-green-400":T==="error"?"bg-red-500/20 text-red-400":"bg-blue-500/20 text-blue-400"}`,children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[T==="success"&&a.jsx(st,{className:"w-5 h-5"}),T==="error"&&a.jsx(Dt,{className:"w-5 h-5"}),T==="loading"&&a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-400"}),a.jsx("span",{children:C})]}),a.jsx("button",{onClick:ae,className:"text-gray-400 hover:text-gray-600",children:a.jsx(mr,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 shadow-sm",children:e.length>0?a.jsx("div",{className:"flex flex-col gap-3",children:e.map(h=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors cursor-pointer",onClick:()=>V(h),children:[a.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[a.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center text-white",children:a.jsx(Da,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:h.name}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{children:["Year: ",h.year]}),a.jsxs("span",{children:["Started: ",new Date(h.startDate).toLocaleDateString()]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${we(h.status)}`,children:U(h.status)})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",onClick:k=>k.stopPropagation(),children:[h.status!=="active"&&a.jsxs("button",{onClick:()=>Z(h.id),className:"text-green-600 hover:text-green-700 transition-colors px-2 py-1 rounded text-sm flex items-center space-x-1",children:[a.jsx(st,{className:"w-3 h-3"}),a.jsx("span",{children:"Set Current"})]}),a.jsxs("button",{onClick:()=>Ze(h.id),className:"text-gray-400 hover:text-red-500 transition-colors px-2 py-1 rounded text-sm flex items-center space-x-1",children:[a.jsx(ct,{className:"w-3 h-3"}),a.jsx("span",{children:"Delete"})]})]})]},h.id))}):a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx(Et,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"No seasons created yet"}),a.jsx("p",{className:"text-sm",children:"Create your first season to get started"})]})}),c&&a.jsx("div",{className:"modal-overlay",onClick:()=>d(!1),children:a.jsxs("div",{className:"modal-panel max-w-md p-6",onClick:h=>h.stopPropagation(),children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Add Season"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Season Name *"}),a.jsx("input",{type:"text",value:B.name,onChange:h=>{X({...B,name:h.target.value}),W.name&&J({...W,name:void 0})},className:`w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 ${W.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-red-500"}`,placeholder:"e.g., F1 League 2024"}),W.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:W.name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Year *"}),a.jsx("input",{type:"number",value:B.year,onChange:h=>{X({...B,year:parseInt(h.target.value)||new Date().getFullYear()}),W.year&&J({...W,year:void 0})},className:`w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 ${W.year?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-red-500"}`,min:"2020",max:"2030"}),W.year&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:W.year})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Season"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{id:"new-season-current",type:"checkbox",checked:B.setAsCurrent,onChange:h=>X({...B,setAsCurrent:h.target.checked}),className:"h-4 w-4 text-red-600 border-gray-300 dark:border-gray-600 rounded focus:ring-red-500"}),a.jsx("label",{htmlFor:"new-season-current",className:"text-sm text-gray-600 dark:text-gray-300",children:"Set this season as the current season after creation"})]})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsx("button",{onClick:()=>{d(!1),X({name:"",year:new Date().getFullYear(),setAsCurrent:!1}),ae()},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:Ee,disabled:T==="loading",className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white rounded-lg transition-colors",children:T==="loading"?"Creating...":"Create Season"})]})]})}),g&&b&&a.jsx("div",{className:"modal-overlay",onClick:()=>u(!1),children:a.jsxs("div",{className:"modal-panel max-w-md p-6",onClick:h=>h.stopPropagation(),children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Edit Season"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Season Name *"}),a.jsx("input",{type:"text",value:b.name,onChange:h=>j({...b,name:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"e.g., F1 League 2024"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Year *"}),a.jsx("input",{type:"number",value:b.year,onChange:h=>j({...b,year:parseInt(h.target.value)||b.year}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",min:"2020",max:"2030"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),a.jsxs("select",{value:b.status??"draft",onChange:h=>De(h.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"active",children:"Active (make current)"})]})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsx("button",{onClick:()=>{u(!1),j(null),ae()},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:je,disabled:T==="loading",className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white rounded-lg transition-colors",children:T==="loading"?"Updating...":"Update Season"})]})]})})]})},Iu=()=>{const{currentSeason:e}=Ca(),[t,r]=y.useState([]),[n,s]=y.useState(!1),[o,i]=y.useState(null),l=d=>{if(d.target.files&&d.target.files.length>0){const g=Array.from(d.target.files);r(u=>{const p=new Set(u.map(x=>x.name)),m=g.filter(x=>!p.has(x.name)),v=[...u,...m];return Ve.debug(`Total files: ${v.length}`,v.map(x=>x.name)),v}),i(null)}},c=async()=>{var d,g,u;if(t.length===0){i({success:!1,message:"Please select at least one file"});return}if(!e){i({success:!1,message:"Please select a season first"});return}s(!0),i(null);try{const p=new FormData;t.forEach(b=>{p.append("raceFiles",b)}),p.append("seasonId",e.id);const m=Ia(),v=await fetch(`${m}/api/races/import-json-batch`,{method:"POST",body:p}),x=await v.json();if(v.ok){const b=((d=x.results)==null?void 0:d.reduce((D,O)=>D+(O.importedCount||0),0))||0,j=((g=x.results)==null?void 0:g.filter(D=>D.success).length)||0,w=((u=x.results)==null?void 0:u.filter(D=>!D.success).length)||0;i({success:w===0,message:`Imported ${j} file(s) successfully${w>0?`, ${w} failed`:""}. Total: ${b} driver results.`,details:{raceId:x.raceId,results:x.results,totalImported:b}}),r([]);const A=document.getElementById("race-json-file");A&&(A.value="",A.dispatchEvent(new Event("change",{bubbles:!0})))}else i({success:!1,message:x.error||"Upload failed",details:x.details})}catch(p){i({success:!1,message:p instanceof Error?p.message:"Upload failed"})}finally{s(!1)}};return a.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 shadow-sm",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(Xr,{className:"w-5 h-5 text-red-600 dark:text-blue-400"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Import Race JSON"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select JSON File(s) - Multiple files for the same track will be grouped into one event"}),a.jsx("input",{id:"race-json-file",type:"file",accept:".json",multiple:!0,onChange:l,className:`block w-full text-sm text-gray-500 dark:text-gray-400
              file:mr-4 file:py-2 file:px-4
              file:rounded-lg file:border-0
              file:text-sm file:font-semibold
              file:bg-red-600 file:text-white
              hover:file:bg-red-700
              file:cursor-pointer
              cursor-pointer`,disabled:n}),t.length>0&&a.jsxs("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("p",{className:"font-medium",children:["Selected files (",t.length,"):"]}),a.jsx("button",{type:"button",onClick:()=>{r([]);const d=document.getElementById("race-json-file");d&&(d.value="")},className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 text-xs underline",children:"Clear all"})]}),a.jsx("ul",{className:"list-disc list-inside space-y-1 max-h-32 overflow-y-auto",children:t.map((d,g)=>a.jsxs("li",{className:"flex items-center justify-between group",children:[a.jsx("span",{children:d.name}),a.jsx("button",{type:"button",onClick:()=>{r(u=>u.filter((p,m)=>m!==g))},className:"ml-2 text-red-600 hover:text-red-700 dark:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity text-xs",title:"Remove file",children:""})]},g))}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-500",children:'Tip: Click "Choose File" again to add more files, or select multiple files at once with Ctrl/Cmd+Click'})]})]}),e&&a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Season: ",a.jsx("span",{className:"font-medium",children:e.name})]}),!e&&a.jsx("div",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:" Please select a season first"}),a.jsx("button",{onClick:c,disabled:t.length===0||!e||n,className:"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center space-x-2",children:n?a.jsxs(a.Fragment,{children:[a.jsx(Ea,{className:"w-4 h-4 animate-spin"}),a.jsxs("span",{children:["Uploading ",t.length," file(s)..."]})]}):a.jsxs(a.Fragment,{children:[a.jsx(Xr,{className:"w-4 h-4"}),a.jsxs("span",{children:["Upload and Import ",t.length>0?`(${t.length} file${t.length>1?"s":""})`:""]})]})}),o&&a.jsx("div",{className:`p-4 rounded-lg ${o.success?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:a.jsxs("div",{className:"flex items-start space-x-2",children:[o.success?a.jsx(st,{className:"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5"}):a.jsx(Dt,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:`font-medium ${o.success?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300"}`,children:o.message}),o.details&&o.success&&a.jsxs("div",{className:"mt-2 text-sm text-green-700 dark:text-green-400",children:[a.jsxs("p",{children:["Race ID: ",o.details.raceId]}),a.jsxs("p",{children:["Total Imported: ",o.details.totalImported," drivers"]}),o.details.results&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"font-medium",children:"File Results:"}),a.jsx("ul",{className:"list-disc list-inside ml-2",children:o.details.results.map((d,g)=>a.jsxs("li",{children:[d.file,": ",d.success?`${d.importedCount} drivers`:`Failed - ${d.error}`]},g))})]})]}),o.details&&!o.success&&a.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-400",children:a.jsx("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(o.details,null,2)})})]})]})})]})]})},Ru=({isAuthenticated:e,onAuthenticate:t})=>{const[r,n]=y.useState(""),[s,o]=y.useState("members"),i=l=>{l.preventDefault(),t(r)?n(""):(n(""),alert("Invalid password"))};return e?a.jsxs("div",{className:"max-w-6xl mx-auto space-y-6 relative z-20",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Kr,{className:"w-6 h-6 text-red-600 dark:text-blue-400"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Admin Panel"})]}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"League Management"})]}),a.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[{id:"members",label:"Members",icon:""},{id:"seasons",label:"Seasons",icon:""},{id:"races",label:"Races",icon:""}].map(l=>a.jsxs("button",{onClick:()=>o(l.id),className:`flex items-center space-x-2 px-4 py-2 rounded-md transition-colors ${s===l.id?"bg-red-600 text-white":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[a.jsx("span",{className:"text-lg",children:l.icon}),a.jsx("span",{children:l.label})]},l.id))}),s==="members"&&a.jsx(Oa,{}),s==="seasons"&&a.jsx(Eu,{}),s==="races"&&a.jsx(Iu,{})]}):a.jsx("div",{className:"max-w-md mx-auto",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-8 shadow-sm",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx(Kr,{className:"w-12 h-12 text-red-600 dark:text-blue-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Admin Access"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Enter admin password to continue"})]}),a.jsxs("form",{onSubmit:i,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),a.jsx("input",{type:"password",value:r,onChange:l=>n(l.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Enter admin password",required:!0})]}),a.jsx("button",{type:"submit",className:"w-full bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Login"})]})]})})};export{Ru as AdminPanel};
//# sourceMappingURL=AdminPanel-BCqVZKO3.js.map
