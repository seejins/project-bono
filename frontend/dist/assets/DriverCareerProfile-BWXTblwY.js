import{r as o,j as e,L as $,T as p,d as W,b as Y,g as y,l as h}from"./index-446XYAQp.js";import{T as E,Z as b}from"./zap-Cv4-16MV.js";const G=({memberId:F,onRaceSelect:u})=>{var S;const l=F,[x,L]=o.useState(null),[f,j]=o.useState([]),[A,c]=o.useState(null),[a,w]=o.useState("career"),[T,k]=o.useState(!0),[N,v]=o.useState(null);o.useEffect(()=>{const r=new AbortController,t=r.signal;return(async()=>{try{k(!0),v(null);const n=y(),s=await fetch(`${n}/api/drivers/${l}/career-profile`,{signal:t});if(t.aborted)return;if(s.ok){const i=await s.json();t.aborted||L(i.careerProfile)}else throw new Error("Failed to fetch driver career profile")}catch(n){if(t.aborted||n.name==="AbortError")return;h.error("Error fetching driver career profile:",n),t.aborted||v("Failed to load driver career profile")}finally{t.aborted||k(!1)}})(),()=>{r.abort()}},[l]),o.useEffect(()=>{if(!x)return;const r=new AbortController,t=r.signal,P=async()=>{try{const s=y(),i=a==="career"?void 0:a,m=i?`${s}/api/drivers/${l}/race-history?seasonId=${i}`:`${s}/api/drivers/${l}/race-history`,g=await fetch(m,{signal:t});if(t.aborted)return;if(g.ok){const B=await g.json();t.aborted||j(B.raceHistory||[])}}catch(s){if(t.aborted||s.name==="AbortError")return;h.error("Error fetching race history:",s),t.aborted||j([])}},n=async s=>{try{const i=y(),m=await fetch(`${i}/api/drivers/${l}/seasons/${s}/stats`,{signal:t});if(t.aborted)return;if(m.ok){const g=await m.json();t.aborted||c(g.stats)}else h.error("Failed to fetch season stats"),t.aborted||c(null)}catch(i){if(t.aborted||i.name==="AbortError")return;h.error("Error fetching season stats:",i),t.aborted||c(null)}};return P(),a!=="career"?n(a):c(null),()=>{r.abort()}},[x,a,l]);const D=r=>r===1?"ðŸ¥‡":r===2?"ðŸ¥ˆ":r===3?"ðŸ¥‰":r,H=r=>r===1?"text-yellow-600 dark:text-yellow-400":r===2?"text-gray-600 dark:text-gray-400":r===3?"text-orange-600 dark:text-orange-400":"text-gray-900 dark:text-white",R=r=>{u&&u(r)};if(T)return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx($,{className:"w-16 h-16 mx-auto mb-4 text-purple-500 animate-spin"}),e.jsx("p",{className:"text-xl text-gray-400",children:"Loading career profile..."})]})});if(N||!x)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-red-500 text-xl",children:N||"Driver not found"})});const{member:U,careerStats:I,seasons:C}=x,d=a==="career"?I:A,Z=a==="career"?"Career Statistics":`${((S=C.find(r=>r.id===a))==null?void 0:S.name)||"Season"} Statistics`;return e.jsx("div",{className:"p-6 bg-gray-100 dark:bg-gray-900 min-h-screen",children:e.jsxs("div",{className:"max-w-[2048px] mx-auto",children:[e.jsx("div",{className:"mb-6 text-center",children:e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:[U.name," - Career Profile"]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-3 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>w("career"),className:`w-full py-2 px-4 text-left text-lg font-medium sm:w-auto sm:text-center ${a==="career"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400 dark:border-purple-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`,children:"Career"}),C.map(r=>e.jsxs("button",{onClick:()=>w(r.id),className:`w-full py-2 px-4 text-left text-lg font-medium sm:w-auto sm:text-center ${a===r.id?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400 dark:border-purple-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[r.name," (",r.year,")"]},r.id))]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:Z}),d?e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(p,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Wins"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.wins})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(p,{className:"w-8 h-8 text-gray-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Podiums"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.podiums})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(E,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Points"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(d.points||0).toLocaleString()})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(W,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Races"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.seasons})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(Y,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Pole Positions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.polePositions})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(b,{className:"w-8 h-8 text-purple-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Fastest Laps"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.fastestLaps})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(E,{className:"w-8 h-8 text-indigo-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Avg Finish"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.averageFinish.toFixed(1)})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(p,{className:"w-8 h-8 text-orange-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Best Finish"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.bestFinish||"N/A"})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx($,{className:"w-8 h-8 mx-auto mb-2 text-purple-500 animate-spin"}),e.jsx("p",{className:"text-gray-500",children:"Loading statistics..."})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Race History"})}),e.jsx("div",{className:"p-6",children:f.length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No race history available"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Track"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Season/Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Position"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Points"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"FL"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:f.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>R(r.id),children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.trackName})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.seasonYear}),e.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:new Date(r.date).toLocaleDateString()})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`text-sm font-medium ${H(r.position)}`,children:D(r.position)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:r.points>0?r.points:"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.fastestLap?e.jsx(b,{className:"w-4 h-4 text-purple-500"}):e.jsx(b,{className:"w-4 h-4 text-gray-300"})})]},r.id))})]})})})]})]})})};export{G as DriverCareerProfileComponent};
//# sourceMappingURL=DriverCareerProfile-BWXTblwY.js.map
