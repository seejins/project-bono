{"version":3,"file":"DriverRaceAnalysis-CeqWy6um.js","sources":["../../../node_modules/lucide-react/dist/esm/icons/bar-chart-3.js","../../../node_modules/lucide-react/dist/esm/icons/line-chart.js","../../../node_modules/recharts/es6/chart/BarChart.js","../../src/components/DriverRaceAnalysis/hooks/useDriverRaceData.ts","../../src/components/DriverRaceAnalysis/utils.ts","../../src/components/DriverRaceAnalysis/hooks/useLapAnalytics.ts","../../src/components/DriverRaceAnalysis/hooks/useStintAnalytics.ts","../../src/components/DriverRaceAnalysis/hooks/useRaceStats.ts","../../src/components/DriverRaceAnalysis/tabs/OverviewTab.tsx","../../src/components/charts/ChartCard.tsx","../../src/components/DriverRaceAnalysis/tabs/PaceTab.tsx","../../src/components/charts/BaseBarChart.tsx","../../src/components/DriverRaceAnalysis/tabs/StrategyTab.tsx","../../src/components/DriverRaceAnalysis/tabs/PaceGraphsTab.tsx","../../src/components/DriverRaceAnalysis.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BarChart3 = createLucideIcon(\"BarChart3\", [\n  [\"path\", { d: \"M3 3v18h18\", key: \"1s2lah\" }],\n  [\"path\", { d: \"M18 17V9\", key: \"2bz60n\" }],\n  [\"path\", { d: \"M13 17V5\", key: \"1frdt8\" }],\n  [\"path\", { d: \"M8 17v-3\", key: \"17ska0\" }]\n]);\n\nexport { BarChart3 as default };\n//# sourceMappingURL=bar-chart-3.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LineChart = createLucideIcon(\"LineChart\", [\n  [\"path\", { d: \"M3 3v18h18\", key: \"1s2lah\" }],\n  [\"path\", { d: \"m19 9-5 5-4-4-3 3\", key: \"2osh9i\" }]\n]);\n\nexport { LineChart as default };\n//# sourceMappingURL=line-chart.js.map\n","/**\n * @fileOverview Bar Chart\n */\nimport { generateCategoricalChart } from './generateCategoricalChart';\nimport { Bar } from '../cartesian/Bar';\nimport { XAxis } from '../cartesian/XAxis';\nimport { YAxis } from '../cartesian/YAxis';\nimport { formatAxisMap } from '../util/CartesianUtils';\nexport var BarChart = generateCategoricalChart({\n  chartName: 'BarChart',\n  GraphicalChild: Bar,\n  defaultTooltipEventType: 'axis',\n  validateTooltipEventTypes: ['axis', 'item'],\n  axisComponents: [{\n    axisType: 'xAxis',\n    AxisComp: XAxis\n  }, {\n    axisType: 'yAxis',\n    AxisComp: YAxis\n  }],\n  formatAxisMap: formatAxisMap\n});","import { useEffect, useState } from 'react';\nimport { F123DataService } from '../../../services/F123DataService';\nimport logger from '../../../utils/logger';\nimport { DriverRaceData, LapData, DriverSessionData, DriverResultWithMeta } from '../types';\n\ninterface UseDriverRaceDataResult extends DriverRaceData {}\n\ntype CanonicalDriverIdentifiers = {\n  driverId: string | null;\n  sessionResultId: string | null;\n  mappedUserId: string | null;\n  jsonDriverId: string | null;\n  driverName: string | null;\n  carNumber: string | null;\n};\n\nimport { getApiUrl } from '../../../utils/api';\n\nconst DEFAULT_STATE: UseDriverRaceDataResult = {\n  raceData: null,\n  sessions: [],\n  defaultSessionId: null,\n  loading: true,\n  error: null,\n};\n\nexport const useDriverRaceData = (driverId: string, raceId: string): UseDriverRaceDataResult => {\n  const [state, setState] = useState<UseDriverRaceDataResult>(DEFAULT_STATE);\n\n  useEffect(() => {\n    const abortController = new AbortController();\n\n    const fetchDriverRaceData = async () => {\n      setState((prev) => ({ ...prev, loading: true, error: null }));\n\n      try {\n        const apiUrl = getApiUrl();\n        const fetchOptions = { signal: abortController.signal };\n\n        // Parallel fetch: race metadata and race results simultaneously\n        const [raceMetadataResponse, raceResponse] = await Promise.all([\n          fetch(`${apiUrl}/api/races/${raceId}`, fetchOptions),\n          fetch(`${apiUrl}/api/races/${raceId}/results`, fetchOptions),\n        ]);\n\n        let raceMetadata: any = null;\n        if (raceMetadataResponse.ok) {\n          const raceMetadataResult = await raceMetadataResponse.json();\n          raceMetadata = raceMetadataResult?.race ?? null;\n        }\n        if (!raceResponse.ok) {\n          const errorText = await raceResponse.text();\n          throw new Error(`Failed to fetch race data: ${raceResponse.status} ${errorText}`);\n        }\n\n        const raceDataResult = await raceResponse.json();\n        const sessionsFromResponse: any[] = Array.isArray(raceDataResult.sessions)\n          ? raceDataResult.sessions\n          : [];\n\n        if (sessionsFromResponse.length === 0) {\n          throw new Error('No session data found for this race');\n        }\n\n        const canonicalIdentifiers = deriveCanonicalDriverIdentifiers(\n          sessionsFromResponse,\n          driverId\n        );\n\n        const sessionsData: DriverSessionData[] = sessionsFromResponse.map((session: any, index: number) => {\n          const sessionTypeRaw = session?.sessionType ?? session?.session_type ?? 0;\n          const sessionType = Number(sessionTypeRaw) || 0;\n          const sessionTypeName = F123DataService.getSessionTypeName(sessionType);\n          const sessionIdRaw =\n            session?.id ??\n            session?.sessionId ??\n            session?.session_id ??\n            session?.session_result_id ??\n            `${raceId}-${sessionType}-${index}`;\n          const sessionId = String(sessionIdRaw);\n          const sessionName = session?.sessionName ?? session?.session_name ?? sessionTypeName;\n          const sessionResults: any[] = Array.isArray(session?.results) ? session.results : [];\n\n          const driverResult = sessionResults.find((result: any) =>\n            doesResultMatchDriver(result, canonicalIdentifiers)\n          );\n\n          let transformedDriver: DriverResultWithMeta | null = null;\n          let lapDataWithGaps: LapData[] = [];\n          let sessionDrivers = sessionResults;\n\n          if (driverResult) {\n            transformedDriver = transformDriverResult(driverResult);\n            const { lapData: enrichedLapData, sessionDrivers: enrichedSessionDrivers } = buildLapDataWithGaps(\n              transformedDriver,\n              sessionResults\n            );\n            lapDataWithGaps = enrichedLapData;\n            sessionDrivers = enrichedSessionDrivers;\n          }\n\n          return {\n            sessionId,\n            sessionType,\n            sessionName,\n            sessionTypeName,\n            driver: transformedDriver,\n            lapData: lapDataWithGaps,\n            sessionDrivers,\n          };\n        });\n\n        const hasDriverData = sessionsData.some((session) => session.driver);\n        if (!hasDriverData) {\n          // Check if driverName is available for cross-session matching\n          const hasDriverName = canonicalIdentifiers.driverName != null;\n          const sessionNames = sessionsData.map(s => s.sessionName || s.sessionTypeName).join(', ');\n          \n          if (!hasDriverName) {\n            throw new Error(\n              `Driver with id ${driverId} not found. Missing json_driver_name for cross-session matching. ` +\n              `Available sessions: ${sessionNames}`\n            );\n          } else {\n            throw new Error(\n              `Driver with id ${driverId} (json_driver_name: ${canonicalIdentifiers.driverName}) not found in any session results. ` +\n              `Available sessions: ${sessionNames}. ` +\n              `The driver may not exist in this race or json_driver_name may not match.`\n            );\n          }\n        }\n\n        const defaultSession =\n          sessionsData.find((session) => session.sessionType === 10 && session.driver) ||\n          sessionsData.find((session) => session.driver) ||\n          sessionsData[0] ||\n          null;\n\n        if (!abortController.signal.aborted) {\n          setState({\n            raceData: raceMetadata,\n            sessions: sessionsData,\n            defaultSessionId: defaultSession ? defaultSession.sessionId : null,\n            loading: false,\n            error: null,\n          });\n        }\n      } catch (error: any) {\n        if (abortController.signal.aborted) {\n          return;\n        }\n\n        setState((prev) => ({\n          ...prev,\n          loading: false,\n          error: error?.message ?? 'Failed to load driver race data',\n        }));\n      }\n    };\n\n    fetchDriverRaceData();\n\n    return () => {\n      abortController.abort();\n    };\n  }, [driverId, raceId]);\n\n  return state;\n};\n\nconst transformDriverResult = (result: any): DriverResultWithMeta => {\n  const additionalData = parseAdditionalData(result.additional_data);\n\n  const sessionResultId = normalizeIdentifier(\n    result?.driver_session_result_id ??\n      result?.driverSessionResultId ??\n      result?.id ??\n      result?.session_result_id ??\n      result?.sessionResultId\n  );\n\n  const mappedUserId = result.user_id != null ? String(result.user_id) : null;\n\n  const mappedName =\n    result.driver_name ||\n    result.mapping_driver_name ||\n    additionalData?.participantData?.name ||\n    null;\n\n  const displayName =\n    mappedName ||\n    result.json_driver_name ||\n    'Unknown Driver';\n\n  // CRITICAL: driver.id MUST be driver_session_result_id, never user_id or canonicalDriverId\n  // Extract from driver_session_result_id first (the unique identifier for this result)\n  const normalizedResultId = normalizeIdentifier(\n    result?.driver_session_result_id ??\n    result?.driverSessionResultId ??\n    result?.id ??\n    null\n  );\n\n  const canonicalDriverId =\n    mappedUserId ??\n    (result.json_driver_id != null ? String(result.json_driver_id) : null) ??\n    (result.driver_id != null ? String(result.driver_id) : null) ??\n    (additionalData?.participantData?.driverId != null\n      ? String(additionalData?.participantData?.driverId)\n      : null);\n\n  return {\n    // CRITICAL: driver.id MUST always be driver_session_result_id (unique per result)\n    // NEVER use canonicalDriverId (contains user_id which can be shared) for identification\n    id: normalizedResultId ?? sessionResultId ?? `driver-${result?.driver_session_result_id ?? result?.id ?? 'unknown'}`,\n    name: displayName,\n    sessionResultId: normalizedResultId ?? sessionResultId ?? null,\n    canonicalDriverId: canonicalDriverId ?? null,\n    mappedUserId,\n    team: result.json_team_name || result.mapping_team_name || result.driver_team || 'Unknown Team',\n    number: result.json_car_number || result.driver_number || result.mapping_driver_number || result.position || 0,\n    additional_data: additionalData,\n    additionalData,\n    racePosition: result.position != null ? Number(result.position) : undefined,\n    _totalRaceTimeMs: result.total_race_time_ms != null ? Number(result.total_race_time_ms) : undefined,\n    raceLapTime: result.best_lap_time_ms != null ? Number(result.best_lap_time_ms) : undefined,\n    raceBestLapTime: result.best_lap_time_ms != null ? Number(result.best_lap_time_ms) : undefined,\n    raceSector1Time: result.sector1_time_ms != null ? Number(result.sector1_time_ms) : undefined,\n    raceSector2Time: result.sector2_time_ms != null ? Number(result.sector2_time_ms) : undefined,\n    raceSector3Time: result.sector3_time_ms != null ? Number(result.sector3_time_ms) : undefined,\n    points: result.points != null ? Number(result.points) : 0,\n    fastestLap: result.fastest_lap === true || result.fastest_lap === 'true' || result.fastest_lap === 1,\n    fastestLapTime: result.best_lap_time_ms != null ? Number(result.best_lap_time_ms) : undefined,\n    status: mapResultStatus(result.result_status) as 'finished' | 'dnf' | 'dsq' | 'dns' | 'dnq',\n    gridPosition: result.grid_position != null ? Number(result.grid_position) : undefined,\n    penalties: result.penalties != null ? Number(result.penalties) : 0,\n    postRacePenalties: result.post_race_penalties != null ? Number(result.post_race_penalties) : 0,\n    totalPenalties: (result.penalties || 0) + (result.post_race_penalties || 0),\n    penaltyReason: result.penalty_reason || result.all_penalty_reasons || null,\n    warnings: result.warnings != null ? Number(result.warnings) : 0,\n    dnf: result.result_status === 4 || result.result_status === 7 || result.dnf_reason ? true : false,\n    dnfReason: result.dnf_reason,\n    lap_times: result.lap_times || [],\n    dataSource: 'FILE_UPLOAD' as const,\n    raceGap: null,\n    raceTime:\n      result.total_race_time_ms != null\n        ? F123DataService.formatTimeFromMs(Number(result.total_race_time_ms))\n        : '--:--.---',\n  };\n};\n\nconst parseAdditionalData = (raw: any) => {\n  if (!raw) {\n    return null;\n  }\n  if (typeof raw === 'string') {\n    try {\n      return JSON.parse(raw);\n    } catch (error) {\n      return {};\n    }\n  }\n  return raw;\n};\n\nconst mapResultStatus = (status: any): string => {\n  switch (String(status)) {\n    case '2':\n      return 'finished';\n    case '4':\n    case '7':\n      return 'dnf';\n    case '5':\n      return 'dsq';\n    case '6':\n      return 'dnq';\n    default:\n      return 'finished';\n  }\n};\n\nconst buildLapDataWithGaps = (\n  driver: DriverResultWithMeta,\n  sessionResults: any[]\n): { lapData: LapData[]; sessionDrivers: any[] } => {\n  const sessionDrivers = sessionResults || [];\n\n  if (!driver.lap_times || driver.lap_times.length === 0) {\n    return { lapData: [], sessionDrivers };\n  }\n\n  const sortedDriverLaps = [...driver.lap_times].sort(\n    (a: any, b: any) => (a.lap_number || 0) - (b.lap_number || 0)\n  );\n\n  const cumulativeLapTimes = new Map<number, number>();\n  let cumulativeTime = 0;\n  sortedDriverLaps.forEach((lap: any) => {\n    if (lap.lap_time_ms && lap.lap_time_ms > 0) {\n      cumulativeTime += lap.lap_time_ms;\n      cumulativeLapTimes.set(lap.lap_number, cumulativeTime);\n    }\n  });\n\n  const allDriversCumulative = new Map<string, Map<number, number>>();\n  sessionDrivers.forEach((otherDriver: any) => {\n    if (otherDriver.id === driver.id) return;\n\n    const otherLapTimes = otherDriver.lap_times || [];\n    if (otherLapTimes.length === 0) return;\n\n    const sortedOtherLaps = [...otherLapTimes].sort(\n      (a: any, b: any) => (a.lap_number || 0) - (b.lap_number || 0)\n    );\n\n    const otherCumulative = new Map<number, number>();\n    let otherCumulativeTime = 0;\n    sortedOtherLaps.forEach((lap: any) => {\n      if (lap.lap_time_ms && lap.lap_time_ms > 0) {\n        otherCumulativeTime += lap.lap_time_ms;\n        otherCumulative.set(lap.lap_number, otherCumulativeTime);\n      }\n    });\n\n    allDriversCumulative.set(otherDriver.id, otherCumulative);\n  });\n\n  const lapDataWithGaps: LapData[] = sortedDriverLaps.map((lap: any) => {\n    if (!lap.lap_time_ms || lap.lap_time_ms <= 0) {\n      return lap;\n    }\n\n    const lapNumber = lap.lap_number;\n    const thisDriverCumulative = cumulativeLapTimes.get(lapNumber) || 0;\n\n    let leaderCumulative = Infinity;\n    allDriversCumulative.forEach((otherCumulative) => {\n      const otherTime = otherCumulative.get(lapNumber);\n      if (otherTime !== undefined && otherTime > 0 && otherTime < leaderCumulative) {\n        leaderCumulative = otherTime;\n      }\n    });\n\n    if (thisDriverCumulative > 0 && thisDriverCumulative <= leaderCumulative) {\n      leaderCumulative = thisDriverCumulative;\n    }\n\n    let positionAheadCumulative = Infinity;\n    const thisPosition = lap.track_position;\n\n    if (thisPosition && thisPosition > 1) {\n      sessionDrivers.forEach((otherDriver: any) => {\n        if (otherDriver.id === driver.id) return;\n\n        const otherLapTimes = otherDriver.lap_times || [];\n        const otherLapAtThisLap = otherLapTimes.find((l: any) => l.lap_number === lapNumber);\n        const otherPosition = otherLapAtThisLap?.track_position;\n\n        if (otherPosition === thisPosition - 1) {\n          const otherCumulative = allDriversCumulative.get(otherDriver.id);\n          if (otherCumulative) {\n            const otherTime = otherCumulative.get(lapNumber);\n            if (otherTime !== undefined && otherTime > 0 && otherTime < positionAheadCumulative) {\n              positionAheadCumulative = otherTime;\n            }\n          }\n        }\n      });\n    }\n\n    const gapToLeader =\n      leaderCumulative !== Infinity && thisDriverCumulative > 0 && thisDriverCumulative > leaderCumulative\n        ? thisDriverCumulative - leaderCumulative\n        : null;\n\n    const gapToAhead =\n      positionAheadCumulative !== Infinity &&\n      thisDriverCumulative > 0 &&\n      thisDriverCumulative > positionAheadCumulative\n        ? thisDriverCumulative - positionAheadCumulative\n        : null;\n\n    return {\n      ...lap,\n      gap_to_leader_ms: gapToLeader,\n      gap_to_position_ahead_ms: gapToAhead,\n    };\n  });\n\n  return { lapData: lapDataWithGaps, sessionDrivers };\n};\n\nconst deriveCanonicalDriverIdentifiers = (\n  sessions: any[],\n  driverId: string\n): CanonicalDriverIdentifiers => {\n  const driverIdStr = driverId ? String(driverId) : null;\n  const match = findDriverResultMatch(sessions, driverIdStr);\n\n  if (match) {\n    const { result } = match;\n    const extractedSessionResultId = extractSessionResultId(result);\n    const mappedUserId = normalizeIdentifier(result?.mapped_user_id ?? result?.mappedUserId ?? result?.user_id ?? result?.userId);\n    \n    // Extract driver name from multiple sources, prioritizing json_driver_name\n    const driverName = normalizeIdentifier(\n      result?.json_driver_name ?? \n      result?.jsonDriverName ?? \n      result?.driver_name ?? \n      result?.mapping_driver_name ?? \n      result?.name,\n      true // lowercase for consistent matching\n    );\n    \n    return {\n      driverId: driverIdStr,\n      sessionResultId: extractedSessionResultId ?? driverIdStr,\n      mappedUserId: mappedUserId,\n      jsonDriverId: normalizeIdentifier(result?.json_driver_id ?? result?.jsonDriverId), // Keep for backwards compatibility but not used\n      driverName: driverName,\n      carNumber: normalizeIdentifier(result?.json_car_number ?? result?.driver_number ?? result?.number),\n    };\n  }\n\n  // No match found - return minimal identifiers (error will be handled upstream)\n  logger.error('Could not find driver with id:', driverIdStr);\n  return {\n    driverId: driverIdStr,\n    sessionResultId: driverIdStr,\n    mappedUserId: null,\n    jsonDriverId: null,\n    driverName: null,\n    carNumber: null,\n  };\n};\n\nconst doesResultMatchDriver = (result: any, identifiers: CanonicalDriverIdentifiers): boolean => {\n  if (!result || !identifiers) {\n    return false;\n  }\n\n  // 1. Match by driver_session_result_id (exact match for the clicked session)\n  const resultSessionId = extractSessionResultId(result);\n  if (identifiers.sessionResultId && resultSessionId) {\n    if (resultSessionId === identifiers.sessionResultId) {\n      return true; // Exact match - this is the clicked driver result\n    }\n  }\n\n  // 2. For cross-session matching, use json_driver_name (unique per game driver)\n  // This finds the same game driver (e.g., Verstappen) in other sessions\n  if (identifiers.driverName) {\n    const resultDriverName = normalizeIdentifier(\n      result?.json_driver_name ?? \n      result?.jsonDriverName ?? \n      result?.driver_name ?? \n      result?.name,\n      true // lowercase for case-insensitive comparison\n    );\n    if (resultDriverName && resultDriverName === identifiers.driverName) {\n      return true; // Same game driver in different session\n    }\n  }\n\n  // No match - return false (error will be thrown upstream if driver not found)\n  return false;\n};\n\nconst normalizeIdentifier = (value: any, lowercase: boolean = false): string | null => {\n  if (value === null || value === undefined) {\n    return null;\n  }\n\n  const normalized = String(value).trim();\n  if (!normalized) {\n    return null;\n  }\n\n  return lowercase ? normalized.toLowerCase() : normalized;\n};\n\nconst extractSessionResultId = (result: any): string | null => {\n  return (\n    normalizeIdentifier(\n      result?.driver_session_result_id ??\n        result?.driverSessionResultId ??\n        result?.id ??\n        result?.session_result_id ??\n        result?.sessionResultId\n    )\n  );\n};\n\nconst collectResultIdentifiers = (result: any): string[] => {\n  const identifiers = [\n    normalizeIdentifier(result?.id),\n    extractSessionResultId(result),\n    normalizeIdentifier(result?.driver_id ?? result?.driverId),\n    normalizeIdentifier(result?.user_id ?? result?.userId),\n    normalizeIdentifier(result?.mapped_user_id ?? result?.mappedUserId),\n    normalizeIdentifier(result?.json_driver_id ?? result?.jsonDriverId),\n    normalizeIdentifier(result?.canonicalDriverId ?? result?.canonical_driver_id),\n  ].filter((value): value is string => Boolean(value));\n\n  return Array.from(new Set(identifiers));\n};\n\nconst findDriverResultMatch = (\n  sessions: any[],\n  driverId: string | null\n): { session: any; result: any } | null => {\n  if (!driverId) {\n    return null;\n  }\n\n  const normalizedTarget = normalizeIdentifier(driverId);\n  if (!normalizedTarget) {\n    return null;\n  }\n\n  // Match by driver_session_result_id only (unique per result)\n  for (const session of sessions) {\n    const results = Array.isArray(session?.results) ? session.results : [];\n    for (const result of results) {\n      const resultSessionId = extractSessionResultId(result);\n      if (resultSessionId && resultSessionId === normalizedTarget) {\n        return { session, result };\n      }\n    }\n  }\n\n  return null;\n};\n\nexport default useDriverRaceData;\n","import { F123DataService } from '../../services/F123DataService';\nimport { BRAND_COLORS, STATUS_COLORS } from '../../theme/colors';\nimport type { ReferenceLineConfig } from '../charts/BaseLineChart';\n\nexport const sanitizeLapTimeMs = (value: any): number | null => {\n  if (value === undefined || value === null) return null;\n  const numeric = Number(value);\n  if (!Number.isFinite(numeric) || numeric <= 0) return null;\n  return numeric;\n};\n\nexport const parseLapNumber = (lap: any): number | null => {\n  const raw = lap?.lap_number ?? lap?.lapNumber;\n  if (raw === undefined || raw === null) return null;\n  const numeric = Number(raw);\n  if (!Number.isFinite(numeric) || numeric <= 0) return null;\n  return numeric;\n};\n\nexport const getCompoundKey = (compound?: string): string => {\n  const text = F123DataService.getTireCompoundText(compound);\n  return text ? text.toUpperCase() : 'UNK';\n};\n\nexport const getCompoundDisplayName = (compoundKey: string): string => {\n  switch (compoundKey.toUpperCase()) {\n    case 'S':\n      return 'Soft';\n    case 'M':\n      return 'Medium';\n    case 'H':\n      return 'Hard';\n    case 'I':\n      return 'Intermediate';\n    case 'W':\n      return 'Wet';\n    default:\n      return compoundKey.toUpperCase();\n  }\n};\n\nexport const getTireCompoundHex = (compound?: string): string => {\n  const normalized = (F123DataService.getTireCompoundText(compound) || '').toUpperCase();\n  switch (normalized) {\n    case 'S':\n    case 'SOFT':\n      return STATUS_COLORS.danger;\n    case 'M':\n    case 'MEDIUM':\n      return STATUS_COLORS.warning;\n    case 'H':\n    case 'HARD':\n      return STATUS_COLORS.neutral;\n    case 'I':\n    case 'INTERMEDIATE':\n      return STATUS_COLORS.success;\n    case 'W':\n    case 'WET':\n      return STATUS_COLORS.info;\n    default:\n      return STATUS_COLORS.purple ?? BRAND_COLORS.accent;\n  }\n};\n\nexport const formatSecondsValue = (seconds?: number | null): string => {\n  if (seconds === undefined || seconds === null) {\n    return '--:--.---';\n  }\n  return F123DataService.formatTimeFromMs(Math.round(seconds * 1000));\n};\n\nexport const formatSecondsDifference = (seconds?: number | null): string => {\n  if (seconds === undefined || seconds === null) {\n    return '--:--.---';\n  }\n  const sign = seconds > 0 ? '+' : seconds < 0 ? '-' : '';\n  const absolute = Math.abs(seconds);\n  if (absolute >= 60) {\n    return `${sign}${F123DataService.formatTimeFromMs(Math.round(absolute * 1000))}`;\n  }\n  return `${sign}${absolute.toFixed(3)}s`;\n};\n\nexport const isPitStopFlag = (value: any): boolean => {\n  if (value === undefined || value === null) {\n    return false;\n  }\n  if (typeof value === 'boolean') {\n    return value;\n  }\n  if (typeof value === 'number') {\n    return value !== 0;\n  }\n  if (typeof value === 'string') {\n    const normalized = value.trim().toLowerCase();\n    return normalized === '1' || normalized === 'true' || normalized === 'yes' || normalized === 'pit';\n  }\n  return false;\n};\n\nexport const buildPitReferenceLines = (lapNumbers: number[]): ReferenceLineConfig[] => {\n  const unique = Array.from(\n    new Set(\n      lapNumbers.filter(\n        (lap) => typeof lap === 'number' && Number.isFinite(lap) && lap > 0\n      )\n    )\n  ).sort((a, b) => a - b);\n\n  return unique.map((lap) => ({\n    x: lap,\n    stroke: 'rgba(255,255,255,0.7)',\n    strokeWidth: 1.2,\n    strokeDasharray: '3 3',\n    ifFront: true,\n    label: {\n      position: 'top',\n      value: 'PIT',\n      fill: '#ffffff',\n      fontSize: 9,\n      fontWeight: 600,\n      dy: 2,\n    },\n  }));\n};\n\n","import { useMemo } from 'react';\nimport { LapData, LapAnalytics, LapComparisonEntry, StatusOverlaySegment, LapStatusType } from '../types';\nimport { sanitizeLapTimeMs, parseLapNumber } from '../utils';\n\ninterface UseLapAnalyticsParams {\n  lapData: LapData[];\n  comparisonDriver: any;\n}\n\nexport const useLapAnalytics = ({ lapData, comparisonDriver }: UseLapAnalyticsParams): LapAnalytics => {\n  const effectiveLapData = lapData;\n  const effectiveComparisonDriver = comparisonDriver;\n\n  const lapComparisonData = useMemo<LapComparisonEntry[]>(() => {\n    if (!effectiveLapData || effectiveLapData.length === 0 || !effectiveComparisonDriver) {\n      return [];\n    }\n\n    const targetMap = new Map<number, LapData>();\n    effectiveLapData.forEach((lap) => {\n      if (lap?.lap_number) {\n        targetMap.set(lap.lap_number, lap);\n      }\n    });\n\n    const comparisonLapTimes: any[] = Array.isArray(effectiveComparisonDriver?.lap_times)\n      ? effectiveComparisonDriver.lap_times\n      : [];\n\n    if (comparisonLapTimes.length === 0) {\n      return [];\n    }\n\n    const comparisonMap = new Map<number, any>();\n    comparisonLapTimes.forEach((lap) => {\n      const lapNumber = parseLapNumber(lap);\n      if (lapNumber) {\n        comparisonMap.set(lapNumber, lap);\n      }\n    });\n\n    const lapNumbers = Array.from(new Set([...targetMap.keys(), ...comparisonMap.keys()])).sort(\n      (a, b) => a - b\n    );\n\n    let targetCumulative = 0;\n    let comparisonCumulative = 0;\n\n    const comparisonEntries: LapComparisonEntry[] = lapNumbers.map((lapNumber) => {\n      const targetLap = targetMap.get(lapNumber);\n      const comparisonLap = comparisonMap.get(lapNumber);\n\n      const targetMs = sanitizeLapTimeMs(targetLap?.lap_time_ms);\n      const comparisonMs = sanitizeLapTimeMs(\n        comparisonLap?.lap_time_ms ?? comparisonLap?.lap_time_in_ms ?? comparisonLap?.lapTimeInMs\n      );\n\n      if (targetMs !== null) {\n        targetCumulative += targetMs;\n      }\n      if (comparisonMs !== null) {\n        comparisonCumulative += comparisonMs;\n      }\n\n      return {\n        lap: lapNumber,\n        targetLapSeconds: targetMs !== null ? targetMs / 1000 : null,\n        comparisonLapSeconds: comparisonMs !== null ? comparisonMs / 1000 : null,\n        targetLapMs: targetMs,\n        comparisonLapMs: comparisonMs,\n        targetCumulativeSeconds: targetCumulative > 0 ? targetCumulative / 1000 : null,\n        comparisonCumulativeSeconds: comparisonCumulative > 0 ? comparisonCumulative / 1000 : null,\n        deltaSeconds:\n          targetMs !== null && comparisonMs !== null\n            ? (targetCumulative - comparisonCumulative) / 1000\n            : null,\n      };\n    });\n\n    return comparisonEntries.filter(\n      (entry) => entry.targetLapSeconds !== null || entry.comparisonLapSeconds !== null\n    );\n  }, [effectiveLapData, effectiveComparisonDriver]);\n\n  const deltaComparisonData = useMemo(() => {\n    return lapComparisonData\n      .filter((entry) => entry.deltaSeconds !== null)\n      .map((entry) => ({ lap: entry.lap, deltaSeconds: entry.deltaSeconds as number }));\n  }, [lapComparisonData]);\n\n  const { statusOverlays, statusLegend } = useMemo(() => {\n    if (!effectiveLapData || effectiveLapData.length === 0) {\n      return { statusOverlays: [] as StatusOverlaySegment[], statusLegend: [] as LapStatusType[] };\n    }\n\n    const overlays: StatusOverlaySegment[] = [];\n    const statusesPresent = new Set<LapStatusType>();\n\n    const sortedLaps = [...effectiveLapData]\n      .filter((lap) => typeof lap.lap_number === 'number')\n      .sort((a, b) => (a.lap_number || 0) - (b.lap_number || 0));\n\n    let currentStatusesKey: string | null = null;\n    let currentStatuses: LapStatusType[] = [];\n    let currentStartLap: number | null = null;\n\n    const finalizeSegment = (endLap: number) => {\n      if (currentStatusesKey && currentStatuses.length > 0 && currentStartLap !== null) {\n        overlays.push({\n          startLap: currentStartLap,\n          endLap,\n          statuses: currentStatuses,\n        });\n      }\n      currentStatusesKey = null;\n      currentStatuses = [];\n      currentStartLap = null;\n    };\n\n    sortedLaps.forEach((lap, index) => {\n      const lapNumber = lap.lap_number || 0;\n      const statusesForLap = deriveLapStatuses(lap);\n\n      statusesForLap.forEach((status) => statusesPresent.add(status));\n\n      if (statusesForLap.length === 0) {\n        if (currentStatusesKey !== null && currentStartLap !== null) {\n          finalizeSegment(lapNumber - 1 >= currentStartLap ? lapNumber - 1 : lapNumber);\n        }\n        return;\n      }\n\n      const key = statusesForLap.join('|');\n\n      if (currentStatusesKey === key) {\n        // Continue the current segment\n        return;\n      }\n\n      if (currentStatusesKey !== null && currentStartLap !== null) {\n        finalizeSegment(sortedLaps[index - 1]?.lap_number || lapNumber);\n      }\n\n      currentStatusesKey = key;\n      currentStatuses = statusesForLap;\n      currentStartLap = lapNumber;\n    });\n\n    if (currentStatusesKey && currentStatuses.length > 0 && currentStartLap !== null) {\n      const lastLapNumber = sortedLaps[sortedLaps.length - 1]?.lap_number || currentStartLap;\n      finalizeSegment(lastLapNumber);\n    }\n\n    return {\n      statusOverlays: overlays,\n      statusLegend: Array.from(statusesPresent),\n    };\n  }, [effectiveLapData]);\n\n  return {\n    lapComparisonData,\n    deltaComparisonData,\n    statusOverlays,\n    statusLegend,\n  };\n};\n\nexport default useLapAnalytics;\n\nconst deriveLapStatuses = (lap: LapData): LapStatusType[] => {\n  const statuses = new Set<LapStatusType>();\n\n  const safetyStatus = (lap.max_safety_car_status || '').toString().toUpperCase();\n  if (safetyStatus === 'SAFETY_CAR') {\n    statuses.add('safetyCar');\n  } else if (safetyStatus === 'VIRTUAL_SAFETY_CAR') {\n    statuses.add('virtualSafetyCar');\n  }\n\n  const vehicleFlags = (lap.vehicle_fia_flags || '').toString().toUpperCase();\n  if (vehicleFlags.includes('YELLOW')) {\n    statuses.add('yellowFlag');\n  }\n\n  if (isRainLap(lap)) {\n    statuses.add('rain');\n  }\n\n  return Array.from(statuses).sort();\n};\n\nconst isRainLap = (lap: LapData): boolean => {\n  const potentialWeatherSources: Array<any> = [\n    (lap as any).weather,\n    (lap as any).trackWeather,\n    lap.car_damage_data?.weather,\n    lap.car_damage_data?.Weather,\n    lap.tyre_sets_data?.weather,\n    lap.tyre_sets_data?.Weather,\n  ];\n\n  for (const source of potentialWeatherSources) {\n    if (typeof source === 'string' && source.toLowerCase().includes('rain')) {\n      return true;\n    }\n  }\n\n  const compound = (lap.tire_compound || '').toString().toLowerCase();\n  if (compound.includes('intermediate') || compound === 'i') {\n    return true;\n  }\n  if (compound.includes('wet') || compound === 'w') {\n    return true;\n  }\n\n  const visualCompound = (lap.tyre_sets_data?.visual_compound || lap.tyre_sets_data?.visualCompound || '').toString().toLowerCase();\n  if (visualCompound.includes('intermediate') || visualCompound.includes('wet')) {\n    return true;\n  }\n\n  return false;\n};\n\n","import { useMemo } from 'react';\nimport { LapData, StintAnalytics, StintChartPoint } from '../types';\nimport { getCompoundKey, getCompoundDisplayName, getTireCompoundHex } from '../utils';\n\nexport const useStintAnalytics = (lapData: LapData[]): StintAnalytics => {\n  const stintChartData = useMemo<StintChartPoint[]>(() => {\n    if (!lapData || lapData.length === 0) {\n      return [];\n    }\n\n    const sorted = [...lapData]\n      .filter((lap) => lap?.lap_number)\n      .sort((a, b) => (a.lap_number || 0) - (b.lap_number || 0));\n\n    return sorted.map((lap) => {\n      const lapTimeSeconds = lap.lap_time_ms && lap.lap_time_ms > 0 ? lap.lap_time_ms / 1000 : null;\n      const tireText = lap.tire_compound ? getCompoundDisplayName(getCompoundKey(lap.tire_compound)) : undefined;\n      const compoundKey = getCompoundKey(lap.tire_compound);\n      return {\n        lap: lap.lap_number,\n        lapTimeSeconds,\n        tireCompound: tireText,\n        tireColorHex: getTireCompoundHex(lap.tire_compound),\n        compoundKey,\n      };\n    });\n  }, [lapData]);\n\n  const stintSegments = useMemo(() => {\n    if (!stintChartData || stintChartData.length === 0) {\n      return [] as StintAnalytics['stintSegments'];\n    }\n\n    const segments: Array<{ startLap: number; endLap: number; compound: string; color: string }> = [];\n    let currentCompound = stintChartData[0].tireCompound || 'Unknown';\n    let currentColor = stintChartData[0].tireColorHex;\n    let startLap = stintChartData[0].lap;\n    let previousLap = stintChartData[0].lap;\n\n    for (let i = 1; i < stintChartData.length; i++) {\n      const entry = stintChartData[i];\n      const compound = entry.tireCompound || 'Unknown';\n      const color = entry.tireColorHex;\n\n      if (compound !== currentCompound) {\n        segments.push({ startLap, endLap: previousLap, compound: currentCompound, color: currentColor });\n        currentCompound = compound;\n        currentColor = color;\n        startLap = entry.lap;\n      }\n\n      previousLap = entry.lap;\n    }\n\n    segments.push({ startLap, endLap: previousLap, compound: currentCompound, color: currentColor });\n    return segments;\n  }, [stintChartData]);\n\n  const stintStartLapInfo = useMemo(() => {\n    const info = new Map<number, { compoundKey: string; color: string; label: string }>();\n    stintSegments.forEach((segment) => {\n      const compoundKey = getCompoundKey(segment.compound);\n      info.set(segment.startLap, {\n        compoundKey,\n        color: segment.color,\n        label: getCompoundDisplayName(compoundKey),\n      });\n    });\n    return info;\n  }, [stintSegments]);\n\n  const compoundLineSetup = useMemo<StintAnalytics['compoundLineSetup']>(() => {\n    if (!stintChartData || stintChartData.length === 0) {\n      return { data: [], lines: [] };\n    }\n\n    const order: Array<{ key: string; color: string; label: string }> = [];\n    const seen = new Set<string>();\n\n    stintChartData.forEach((entry) => {\n      const key = entry.compoundKey || getCompoundKey(entry.tireCompound);\n      if (!seen.has(key)) {\n        seen.add(key);\n        order.push({ key, color: entry.tireColorHex, label: getCompoundDisplayName(key) });\n      }\n    });\n\n    const data = stintChartData.map((entry) => {\n      const record: any = {\n        lap: entry.lap,\n        tireCompound: entry.tireCompound,\n        tireColorHex: entry.tireColorHex,\n        compoundKey: entry.compoundKey,\n      };\n      order.forEach(({ key }) => {\n        record[key] = null;\n      });\n      if (entry.lapTimeSeconds !== null) {\n        record[entry.compoundKey] = entry.lapTimeSeconds;\n      }\n      return record;\n    });\n\n    const lines = order.map(({ key, color, label }) => ({\n      dataKey: key,\n      name: label,\n      stroke: color,\n      dot: false,\n      connectNulls: false,\n    }));\n\n    return { data, lines };\n  }, [stintChartData]);\n\n  const compoundAverages = useMemo(() => {\n    if (!stintChartData || stintChartData.length === 0) {\n      return [] as StintAnalytics['compoundAverages'];\n    }\n\n    const groups = new Map<string, { total: number; count: number; color: string }>();\n\n    stintChartData.forEach((entry) => {\n      if (entry.lapTimeSeconds === null || entry.lapTimeSeconds === undefined) return;\n      const compoundKey = entry.compoundKey || 'UNK';\n      const existing = groups.get(compoundKey);\n      if (existing) {\n        existing.total += entry.lapTimeSeconds;\n        existing.count += 1;\n      } else {\n        groups.set(compoundKey, {\n          total: entry.lapTimeSeconds,\n          count: 1,\n          color: entry.tireColorHex,\n        });\n      }\n    });\n\n    return Array.from(groups.entries())\n      .map(([compoundKey, { total, count, color }]) => {\n        const label = compoundKey === 'UNK' ? 'Unknown' : getCompoundDisplayName(compoundKey);\n        return {\n          compoundKey,\n          compoundLabel: label,\n          averageSeconds: count > 0 ? total / count : 0,\n          color,\n          lapCount: count,\n        };\n      })\n      .sort((a, b) => a.averageSeconds - b.averageSeconds);\n  }, [stintChartData]);\n\n  return {\n    stintChartData,\n    stintSegments,\n    stintStartLapInfo,\n    compoundLineSetup,\n    compoundAverages,\n  };\n};\n\nexport default useStintAnalytics;\n\n","import { useMemo } from 'react';\nimport { LapData, RaceStats } from '../types';\n\ninterface UseRaceStatsParams {\n  lapData: LapData[];\n  driver: any;\n  sessionDrivers?: any[]; // Add to get session fastest lap\n}\n\nexport const useRaceStats = ({ lapData, driver, sessionDrivers = [] }: UseRaceStatsParams): RaceStats | null => {\n  return useMemo(() => {\n    if (!lapData || lapData.length === 0 || !driver) {\n      return null;\n    }\n\n    const validLaps = lapData.filter((lap) => lap.lap_time_ms && lap.lap_time_ms > 0);\n\n    if (validLaps.length === 0) {\n      return null;\n    }\n\n    const lapTimes = validLaps.map((lap) => lap.lap_time_ms);\n    const fastestLap = Math.min(...lapTimes); // Driver's personal best\n    const slowestLap = Math.max(...lapTimes);\n    \n    // Get session fastest lap from driver with fastestLap = true (already extracted from JSON)\n    let sessionFastestLap: number | null = null;\n    if (sessionDrivers && sessionDrivers.length > 0) {\n      const fastestLapDriver = sessionDrivers.find((d: any) => \n        d?.fastestLap === true || d?.fastest_lap === true || d?.fastest_lap === 1 || d?.fastest_lap === 'true'\n      );\n      \n      if (fastestLapDriver) {\n        const fastestTime = fastestLapDriver.fastestLapTime ?? \n                           fastestLapDriver.raceBestLapTime ?? \n                           fastestLapDriver.best_lap_time_ms ??\n                           null;\n        if (fastestTime != null && fastestTime > 0) {\n          sessionFastestLap = Number(fastestTime);\n        }\n      }\n    }\n\n    const avgLap = Math.round(lapTimes.reduce((sum, time) => sum + time, 0) / lapTimes.length);\n\n    const variance = lapTimes.reduce((sum, time) => sum + Math.pow(time - avgLap, 2), 0) / lapTimes.length;\n    const standardDeviation = Math.sqrt(variance);\n    const consistencyPercent = ((standardDeviation / avgLap) * 100).toFixed(2);\n\n    const totalTime = (driver as any)._totalRaceTimeMs || lapTimes.reduce((sum, time) => sum + time, 0);\n\n    let gapToLeaderMs: number | null = null;\n\n    // Single pass: find latest gap from end instead of reverse + find\n    for (let i = lapData.length - 1; i >= 0; i--) {\n      const lap = lapData[i];\n      if (typeof lap.gap_to_leader_ms === 'number' && Number.isFinite(lap.gap_to_leader_ms) && lap.gap_to_leader_ms > 0) {\n        gapToLeaderMs = lap.gap_to_leader_ms;\n        break;\n      }\n    }\n\n    if (gapToLeaderMs === null) {\n      const driverGap = (driver as any).raceGap;\n      if (typeof driverGap === 'number' && Number.isFinite(driverGap) && driverGap > 0) {\n        gapToLeaderMs = driverGap;\n      }\n    }\n\n    const pitStops = validLaps.filter((lap) => lap.pit_stop).length;\n    const tireCompounds = [...new Set(validLaps.map((lap) => lap.tire_compound).filter(Boolean))];\n\n    const gridPosition = driver.gridPosition || (driver as any).position || null;\n    const finishPosition = driver.racePosition || (driver as any).position || null;\n    const positionsGained = gridPosition && finishPosition ? gridPosition - finishPosition : null;\n\n    const bestSector1 = Math.min(\n      ...validLaps.map((lap) => lap.sector1_ms || Infinity).filter((ms) => ms !== Infinity)\n    );\n    const bestSector2 = Math.min(\n      ...validLaps.map((lap) => lap.sector2_ms || Infinity).filter((ms) => ms !== Infinity)\n    );\n    const bestSector3 = Math.min(\n      ...validLaps.map((lap) => lap.sector3_ms || Infinity).filter((ms) => ms !== Infinity)\n    );\n\n    const scLaps = validLaps.filter((lap) => lap.max_safety_car_status === 'SAFETY_CAR').length;\n    const vscLaps = validLaps.filter((lap) => lap.max_safety_car_status === 'VIRTUAL_SAFETY_CAR').length;\n    const yellowFlags = validLaps.filter((lap) =>\n      lap.vehicle_fia_flags &&\n      lap.vehicle_fia_flags !== 'None' &&\n      (lap.vehicle_fia_flags.includes('YELLOW') || lap.vehicle_fia_flags.includes('YELLOW_FLAG'))\n    ).length;\n\n    return {\n      fastestLap, // Driver's personal best\n      sessionFastestLap, // Session fastest lap (from JSON)\n      slowestLap,\n      avgLap,\n      consistencyPercent,\n      totalTime,\n      gapToLeaderMs,\n      pitStops,\n      tireCompounds,\n      gridPosition,\n      finishPosition,\n      positionsGained,\n      bestSector1: bestSector1 !== Infinity ? bestSector1 : undefined,\n      bestSector2: bestSector2 !== Infinity ? bestSector2 : undefined,\n      bestSector3: bestSector3 !== Infinity ? bestSector3 : undefined,\n      scLaps,\n      vscLaps,\n      yellowFlags,\n      totalLaps: validLaps.length,\n      fastestLapNumber: validLaps.find((lap) => lap.lap_time_ms === fastestLap)?.lap_number || null,\n    };\n  }, [lapData, driver, sessionDrivers]);\n};\n\nexport default useRaceStats;\n\n","import React from 'react';\nimport { TrendingUp, Clock, Target, Flag, Zap, AlertTriangle } from 'lucide-react';\nimport { F123DataService } from '../../../services/F123DataService';\n\nconst CARD_CLASS = 'rounded-3xl border border-slate-200 bg-white shadow-md dark:border-slate-800 dark:bg-slate-950/70 p-6';\nconst TITLE_CLASS = 'text-base font-semibold text-slate-900 dark:text-slate-100';\nconst LABEL_CLASS = 'text-sm text-slate-500 dark:text-slate-400';\nconst VALUE_CLASS = 'text-base font-bold text-slate-900 dark:text-slate-100';\n\ninterface OverviewTabProps {\n  raceStats: any;\n  sessionLabel: string;\n  sessionKind: 'practice' | 'qualifying' | 'race' | null;\n  formatGapTime: (ms?: number | null) => string;\n  formatSectorTime: (ms?: number | null) => string;\n  getTireCompoundColor: (compound?: string) => string;\n}\n\nexport const OverviewTab: React.FC<OverviewTabProps> = ({\n  raceStats,\n  sessionLabel,\n  sessionKind,\n  formatGapTime,\n  formatSectorTime,\n  getTireCompoundColor,\n}) => {\n  if (!raceStats) {\n    return (\n      <div className=\"text-center py-12 text-slate-500 dark:text-slate-400\">\n        No race statistics available\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <div className={CARD_CLASS}>\n          <div className=\"flex items-center space-x-3 mb-4\">\n            <div className=\"flex h-10 w-10 items-center justify-center rounded-2xl bg-blue-500/15 text-blue-500\">\n              <TrendingUp className=\"h-5 w-5\" />\n            </div>\n            <h3 className={TITLE_CLASS}>{sessionLabel} Pace</h3>\n          </div>\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center justify-between\">\n              <span className={LABEL_CLASS}>Fastest Lap</span>\n              <span className={VALUE_CLASS}>\n                {F123DataService.formatTimeFromMs(raceStats.fastestLap)}\n              </span>\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <span className={LABEL_CLASS}>Avg Lap</span>\n              <span className={VALUE_CLASS}>\n                {raceStats.avgLap > 0 ? F123DataService.formatTimeFromMs(raceStats.avgLap) : '--:--.---'}\n              </span>\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <span className={LABEL_CLASS}>Consistency</span>\n              <span className={VALUE_CLASS}>{raceStats.consistencyPercent}%</span>\n            </div>\n          </div>\n        </div>\n\n        <div className={CARD_CLASS}>\n          <div className=\"flex items-center space-x-3 mb-4\">\n            <div className=\"flex h-10 w-10 items-center justify-center rounded-2xl bg-emerald-500/15 text-emerald-500\">\n              <Clock className=\"h-5 w-5\" />\n            </div>\n            <h3 className={TITLE_CLASS}>{sessionLabel} Summary</h3>\n          </div>\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center justify-between\">\n              <span className={LABEL_CLASS}>Total Time</span>\n              <span className={VALUE_CLASS}>\n                {F123DataService.formatTimeFromMs(raceStats.totalTime)}\n              </span>\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <span className={LABEL_CLASS}>Gap to Leader</span>\n              <span className={VALUE_CLASS}>\n                {raceStats.gapToLeaderMs !== null && raceStats.gapToLeaderMs !== undefined\n                  ? raceStats.gapToLeaderMs > 0\n                    ? formatGapTime(raceStats.gapToLeaderMs)\n                    : 'Leader'\n                  : 'Leader'}\n              </span>\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <span className={LABEL_CLASS}>Total Laps</span>\n              <span className={VALUE_CLASS}>{raceStats.totalLaps}</span>\n            </div>\n          </div>\n        </div>\n\n        <div className={CARD_CLASS}>\n          <div className=\"flex items-center space-x-3 mb-4\">\n            <div className=\"flex h-10 w-10 items-center justify-center rounded-2xl bg-purple-500/15 text-purple-500\">\n              <Target className=\"h-5 w-5\" />\n            </div>\n            <h3 className={TITLE_CLASS}>Session Strategy</h3>\n          </div>\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center justify-between\">\n              <span className={LABEL_CLASS}>Pit Stops</span>\n              <span className={VALUE_CLASS}>{raceStats.pitStops}</span>\n            </div>\n            <div>\n              <span className={`${LABEL_CLASS} block mb-2`}>Compounds Used</span>\n              <div className=\"flex flex-wrap items-center gap-2\">\n                {raceStats.tireCompounds.length > 0 ? (\n                  raceStats.tireCompounds.map((compound: string, idx: number) => (\n                    <div key={`${compound ?? 'unknown'}-${idx}`} className=\"flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-3 py-1 text-sm font-medium text-slate-700 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200\">\n                      {(() => {\n                        const icon = F123DataService.getTireCompoundIcon(compound);\n                        const label = F123DataService.getTireCompoundText(compound);\n                        return icon ? (\n                          <img src={icon} alt={`${label} tire`} className=\"h-5 w-5\" />\n                        ) : (\n                          <span className={getTireCompoundColor(compound)}>{label}</span>\n                        );\n                      })()}\n                    </div>\n                  ))\n                ) : (\n                  <span className=\"text-sm text-slate-500 dark:text-slate-400\">--</span>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className={CARD_CLASS}>\n          <div className=\"flex items-center space-x-3 mb-4\">\n            <div className=\"flex h-10 w-10 items-center justify-center rounded-2xl bg-amber-500/15 text-amber-500\">\n              <Flag className=\"h-5 w-5\" />\n            </div>\n            <h3 className={TITLE_CLASS}>{sessionLabel} Positions</h3>\n          </div>\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center justify-between\">\n              <span className={LABEL_CLASS}>Grid</span>\n              <span className={VALUE_CLASS}>\n                {sessionKind === 'practice'\n                  ? '--'\n                  : `P${raceStats.gridPosition != null ? raceStats.gridPosition : '--'}`}\n              </span>\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <span className={LABEL_CLASS}>Finish</span>\n              <span className={VALUE_CLASS}>\n                {sessionKind === 'practice'\n                  ? '--'\n                  : `P${raceStats.finishPosition != null ? raceStats.finishPosition : '--'}`}\n              </span>\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <span className={LABEL_CLASS}>Change</span>\n              <span\n                className={`${VALUE_CLASS} ${\n                  sessionKind === 'practice'\n                    ? 'text-slate-400 dark:text-slate-500'\n                    : raceStats.positionsGained !== null\n                        ? raceStats.positionsGained > 0\n                          ? 'text-emerald-500'\n                          : raceStats.positionsGained < 0\n                            ? 'text-rose-500'\n                            : 'text-slate-500 dark:text-slate-400'\n                        : 'text-slate-500 dark:text-slate-400'\n                }`}\n              >\n                {sessionKind === 'practice'\n                  ? '--'\n                  : raceStats.positionsGained !== null\n                    ? raceStats.positionsGained > 0\n                      ? `+${raceStats.positionsGained}`\n                      : raceStats.positionsGained < 0\n                        ? `${raceStats.positionsGained}`\n                        : '0'\n                    : '--'}\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <div className={CARD_CLASS}>\n          <div className=\"flex items-center space-x-3 mb-4\">\n            <div className=\"flex h-10 w-10 items-center justify-center rounded-2xl bg-indigo-500/15 text-indigo-500\">\n              <Zap className=\"h-5 w-5\" />\n            </div>\n            <h3 className={TITLE_CLASS}>Best Sectors</h3>\n          </div>\n          <div className=\"grid grid-cols-3 gap-4\">\n            <div className=\"text-center\">\n              <div className={`${LABEL_CLASS} mb-1`}>Sector 1</div>\n              <div className=\"text-base font-semibold text-slate-900 dark:text-slate-100\">\n                {raceStats.bestSector1 !== undefined && raceStats.bestSector1 !== null\n                  ? formatSectorTime(raceStats.bestSector1)\n                  : '--.---'}\n              </div>\n            </div>\n            <div className=\"text-center\">\n              <div className={`${LABEL_CLASS} mb-1`}>Sector 2</div>\n              <div className=\"text-base font-semibold text-slate-900 dark:text-slate-100\">\n                {raceStats.bestSector2 !== undefined && raceStats.bestSector2 !== null\n                  ? formatSectorTime(raceStats.bestSector2)\n                  : '--.---'}\n              </div>\n            </div>\n            <div className=\"text-center\">\n              <div className={`${LABEL_CLASS} mb-1`}>Sector 3</div>\n              <div className=\"text-base font-semibold text-slate-900 dark:text-slate-100\">\n                {raceStats.bestSector3 !== undefined && raceStats.bestSector3 !== null\n                  ? formatSectorTime(raceStats.bestSector3)\n                  : '--.---'}\n              </div>\n            </div>\n          </div>\n          {raceStats.fastestLapNumber && (\n            <div className=\"mt-4 border-t border-slate-200 pt-3 text-center dark:border-slate-800\">\n              <span className={LABEL_CLASS}>Fastest Lap: Lap {raceStats.fastestLapNumber}</span>\n            </div>\n          )}\n        </div>\n\n        <div className={CARD_CLASS}>\n          <div className=\"flex items-center space-x-3 mb-4\">\n            <div className=\"flex h-10 w-10 items-center justify-center rounded-2xl bg-amber-500/15 text-amber-500\">\n              <AlertTriangle className=\"h-5 w-5\" />\n            </div>\n            <h3 className={TITLE_CLASS}>Track Status</h3>\n          </div>\n          <div className=\"space-y-3\">\n            {raceStats.scLaps > 0 && (\n              <div className=\"flex items-center justify-between\">\n                <span className={LABEL_CLASS}>Safety Car Laps</span>\n                <span className=\"rounded-full bg-amber-100 px-3 py-1 text-xs font-semibold text-amber-700 dark:bg-amber-400/15 dark:text-amber-200\">\n                  {raceStats.scLaps}\n                </span>\n              </div>\n            )}\n            {raceStats.vscLaps > 0 && (\n              <div className=\"flex items-center justify-between\">\n                <span className={LABEL_CLASS}>Virtual Safety Car</span>\n                <span className=\"rounded-full bg-amber-100 px-3 py-1 text-xs font-semibold text-amber-700 dark:bg-amber-400/15 dark:text-amber-200\">\n                  {raceStats.vscLaps}\n                </span>\n              </div>\n            )}\n            {raceStats.yellowFlags > 0 && (\n              <div className=\"flex items-center justify-between\">\n                <span className={LABEL_CLASS}>Yellow Flags</span>\n                <span className=\"rounded-full bg-amber-100 px-3 py-1 text-xs font-semibold text-amber-700 dark:bg-amber-400/15 dark:text-amber-200\">\n                  {raceStats.yellowFlags}\n                </span>\n              </div>\n            )}\n            {raceStats.scLaps === 0 && raceStats.vscLaps === 0 && raceStats.yellowFlags === 0 && (\n              <div className=\"text-center py-2\">\n                <span className={LABEL_CLASS}>Clean race  no incidents</span>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport clsx from 'clsx';\n\ninterface ChartCardProps {\n  title: string;\n  description?: string;\n  headerSlot?: React.ReactNode;\n  children: React.ReactNode;\n  className?: string;\n  bodyClassName?: string;\n}\n\nexport const ChartCard: React.FC<ChartCardProps> = ({\n  title,\n  description,\n  headerSlot,\n  children,\n  className,\n  bodyClassName = 'px-6 py-4',\n}) => {\n  return (\n    <div\n      className={clsx(\n        'rounded-3xl border border-slate-200 bg-white shadow-md dark:border-slate-800 dark:bg-slate-950/70',\n        className\n      )}\n    >\n      <div className=\"flex flex-col gap-4 border-b border-slate-200 px-6 py-5 dark:border-slate-800 sm:flex-row sm:items-center sm:justify-between\">\n        <div>\n          <h4 className=\"text-base font-semibold text-slate-900 dark:text-slate-100\">{title}</h4>\n          {description && (\n            <p className=\"text-sm text-slate-500 dark:text-slate-400\">{description}</p>\n          )}\n        </div>\n        {headerSlot && <div className=\"sm:text-right\">{headerSlot}</div>}\n      </div>\n      <div className={bodyClassName}>{children}</div>\n    </div>\n  );\n};\n\nexport default ChartCard;\n\n","import React from 'react';\nimport type { TooltipProps } from 'recharts';\nimport { ChartCard } from '../../charts/ChartCard';\nimport { BaseLineChart, type ReferenceLineConfig } from '../../charts/BaseLineChart';\nimport { BRAND_COLORS, STATUS_COLORS } from '../../../theme/colors';\n\ntype OverlayLegendItem = {\n  status: string;\n  label: string;\n  color: string;\n  pattern?: string;\n};\n\ntype ChartOverlay = {\n  key: string;\n  x1: number;\n  x2: number;\n  statuses: string[];\n};\n\ninterface ComparisonOption {\n  id: string;\n  name: string;\n  position: number | null;\n}\n\ninterface PaceTabProps {\n  driverName: string;\n  comparisonDriverName: string | null;\n  comparisonDriverId: string | null;\n  onSelectComparisonDriver: (id: string | null) => void;\n  comparisonOptions: ComparisonOption[];\n  lapComparisonData: any[];\n  deltaComparisonData: any[];\n  overlayLegendItems: OverlayLegendItem[];\n  chartOverlays: ChartOverlay[];\n  formatSecondsValue: (seconds?: number | null) => string;\n  formatSecondsDifference: (seconds?: number | null) => string;\n  LapTimeTooltipContent: React.FC<TooltipProps<number, string>>;\n  DeltaTooltipContent: React.FC<TooltipProps<number, string>>;\n  hexToRgba: (hex: string, alpha: number) => string;\n  pitReferenceLines?: ReferenceLineConfig[];\n}\n\nexport const PaceTab: React.FC<PaceTabProps> = ({\n  driverName,\n  comparisonDriverName,\n  comparisonDriverId,\n  onSelectComparisonDriver,\n  comparisonOptions,\n  lapComparisonData,\n  deltaComparisonData,\n  overlayLegendItems,\n  chartOverlays,\n  formatSecondsValue,\n  formatSecondsDifference,\n  LapTimeTooltipContent,\n  DeltaTooltipContent,\n  hexToRgba,\n  pitReferenceLines = [],\n}) => {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Driver Comparison</h3>\n          <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n            Comparing lap pace for {driverName}\n            {comparisonDriverName ? ` vs ${comparisonDriverName}` : ''}.\n          </p>\n        </div>\n        <div className=\"flex items-center gap-3\">\n          <label\n            htmlFor=\"comparison-driver\"\n            className=\"text-sm font-medium text-gray-700 dark:text-gray-200\"\n          >\n            Compare against\n          </label>\n          <select\n            id=\"comparison-driver\"\n            className=\"rounded-xl border border-slate-200 bg-white px-3 py-1.5 text-sm font-medium text-slate-700 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:focus:border-blue-400 dark:focus:ring-blue-400/40\"\n            value={comparisonDriverId ?? ''}\n            onChange={(event) => onSelectComparisonDriver(event.target.value || null)}\n          >\n            {comparisonOptions.length === 0 ? (\n              <option value=\"\">No other drivers available</option>\n            ) : (\n              comparisonOptions.map((option) => (\n                <option key={option.id} value={option.id}>\n                  {option.position ? `P${option.position} - ${option.name}` : option.name}\n                </option>\n              ))\n            )}\n          </select>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-6\">\n        <ChartCard\n          title=\"Lap Time Comparison\"\n          description=\"Lap times in seconds  lower values indicate a faster lap.\"\n          bodyClassName=\"px-6 py-4\"\n        >\n          <div className=\"relative h-80 w-full\">\n            {overlayLegendItems.length > 0 && (\n              <div className=\"absolute right-3 top-3 z-10 flex flex-wrap gap-2 rounded-md bg-white/80 px-3 py-2 text-xs text-gray-600 backdrop-blur dark:bg-gray-900/70 dark:text-gray-200\">\n                {overlayLegendItems.map((item) => (\n                  <div key={item.status} className=\"flex items-center gap-2\">\n                    <span\n                      className=\"h-2.5 w-2.5 rounded-sm\"\n                      style={{\n                        backgroundColor: item.pattern ? undefined : item.color,\n                        backgroundImage:\n                          item.pattern === 'rain'\n                            ? `repeating-linear-gradient(45deg, ${hexToRgba(\n                                item.color,\n                                0.45\n                              )} 0, ${hexToRgba(item.color, 0.45)} 4px, ${hexToRgba(\n                                item.color,\n                                0.18\n                              )} 4px, ${hexToRgba(item.color, 0.18)} 8px)`\n                            : item.pattern === 'vsc'\n                            ? `repeating-linear-gradient(0deg, ${hexToRgba(\n                                item.color,\n                                0.6\n                              )} 0, ${hexToRgba(item.color, 0.6)} 2px, ${hexToRgba(\n                                item.color,\n                                0.2\n                              )} 2px, ${hexToRgba(item.color, 0.2)} 5px)`\n                            : undefined,\n                      }}\n                    ></span>\n                    <span>{item.label}</span>\n                  </div>\n                ))}\n              </div>\n            )}\n            {comparisonDriverId &&\n            lapComparisonData.length > 0 &&\n            lapComparisonData.some((entry) => entry.comparisonLapSeconds !== null) ? (\n              <BaseLineChart\n                data={lapComparisonData}\n                lines={[\n                  {\n                    dataKey: 'targetLapSeconds',\n                    name: driverName || 'Driver',\n                    stroke: STATUS_COLORS.info,\n                    dot: false,\n                  },\n                  {\n                    dataKey: 'comparisonLapSeconds',\n                    name: comparisonDriverName || 'Comparison',\n                    stroke: STATUS_COLORS.danger,\n                    dot: false,\n                  },\n                ]}\n                autoDomainPadding={{ axis: 'y', padding: 10, clampToZero: false }}\n                yTickFormatter={(value) => formatSecondsValue(value as number)}\n                tooltipContent={<LapTimeTooltipContent />}\n                legend\n                overlays={chartOverlays}\n                className=\"h-full\"\n                enableSeriesHighlight\n                dimmedOpacity={1}\n                referenceLines={pitReferenceLines}\n              />\n            ) : (\n              <div className=\"flex h-full items-center justify-center text-sm text-gray-500 dark:text-gray-400\">\n                {comparisonOptions.length === 0\n                  ? 'Comparison data is not available for this session.'\n                  : 'Comparison driver has no lap time data available.'}\n              </div>\n            )}\n          </div>\n        </ChartCard>\n\n        <ChartCard\n          title=\"Cumulative Time Delta\"\n          description={`Positive values indicate ${driverName || 'the selected driver'} is behind the comparison driver.`}\n          bodyClassName=\"px-6 py-4\"\n        >\n          <div className=\"relative h-72 w-full\">\n            {overlayLegendItems.length > 0 && (\n              <div className=\"absolute right-3 top-3 z-10 flex flex-wrap gap-2 rounded-md bg-white/80 px-3 py-2 text-xs text-gray-600 backdrop-blur dark:bg-gray-900/70 dark:text-gray-200\">\n                {overlayLegendItems.map((item) => (\n                  <div key={`delta-${item.status}`} className=\"flex items-center gap-2\">\n                    <span\n                      className=\"h-2.5 w-2.5 rounded-sm\"\n                      style={{ backgroundColor: item.color }}\n                    ></span>\n                    <span>{item.label}</span>\n                  </div>\n                ))}\n              </div>\n            )}\n            {comparisonDriverId && deltaComparisonData.length > 0 ? (\n              <BaseLineChart\n                data={deltaComparisonData}\n                lines={[\n                  {\n                    dataKey: 'deltaSeconds',\n                    name: ' time vs comparison',\n                    stroke: STATUS_COLORS.amber,\n                    dot: false,\n                  },\n                ]}\n                yTickFormatter={(value) => formatSecondsDifference(value as number)}\n                tooltipContent={<DeltaTooltipContent />}\n                referenceLines={[\n                  { y: 0, stroke: BRAND_COLORS.muted, strokeDasharray: '4 4' },\n                  ...pitReferenceLines,\n                ]}\n                overlays={chartOverlays}\n                className=\"h-full\"\n                enableSeriesHighlight\n                dimmedOpacity={1}\n              />\n            ) : (\n              <div className=\"flex h-full items-center justify-center text-sm text-gray-500 dark:text-gray-400\">\n                Additional comparison data is not available for this driver pairing.\n              </div>\n            )}\n          </div>\n        </ChartCard>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport {\n  ResponsiveContainer,\n  BarChart,\n  Bar,\n  CartesianGrid,\n  XAxis,\n  YAxis,\n  Tooltip,\n  Legend,\n  ReferenceLine,\n  Cell,\n} from 'recharts';\nimport type {\n  TooltipProps,\n  XAxisProps,\n  YAxisProps,\n  CartesianGridProps,\n} from 'recharts';\n\nimport { BRAND_COLORS } from '../../theme/colors';\n\nconst AXIS_TICK_STYLE = {\n  fill: BRAND_COLORS.mutedStrong,\n  fontSize: 12,\n} as const;\n\ntype HoveredBar = { key: string; index: number } | null;\n\nexport interface BarConfig<T extends Record<string, unknown> = Record<string, unknown>> {\n  dataKey: keyof T & string;\n  name?: string;\n  fill: string;\n  radius?: number | [number, number, number, number];\n  barSize?: number;\n  stackId?: string;\n  isAnimationActive?: boolean;\n  label?: any;\n  getFill?: (entry: T, index: number) => string;\n}\n\nexport interface ReferenceLineBarConfig {\n  y: number;\n  stroke?: string;\n  strokeDasharray?: string;\n  label?: any;\n}\n\nexport interface BaseBarChartProps<T extends Record<string, unknown> = Record<string, unknown>> {\n  data: T[];\n  bars: BarConfig<T>[];\n  xKey?: keyof T & string;\n  xAxisProps?: Partial<XAxisProps>;\n  yAxisProps?: Partial<YAxisProps>;\n  xTickFormatter?: (value: any, index: number) => string | number;\n  yTickFormatter?: (value: number, index: number) => string | number;\n  tooltipContent?: React.ReactNode | ((props: TooltipProps<number, string>) => React.ReactNode);\n  tooltipProps?: Partial<TooltipProps<number, string>>;\n  legend?: boolean;\n  referenceLines?: ReferenceLineBarConfig[];\n  cartesianGrid?: boolean;\n  cartesianGridProps?: Partial<CartesianGridProps>;\n  margin?: { top?: number; right?: number; bottom?: number; left?: number };\n  className?: string;\n  height?: number | string;\n  ariaLabel?: string;\n}\n\nexport function BaseBarChart<T extends Record<string, unknown>>({\n  data,\n  bars,\n  xKey = 'name' as keyof T & string,\n  xAxisProps,\n  yAxisProps,\n  xTickFormatter,\n  yTickFormatter,\n  tooltipContent,\n  tooltipProps,\n  legend,\n  referenceLines,\n  cartesianGrid = true,\n  cartesianGridProps,\n  margin,\n  className,\n  height = '100%',\n  ariaLabel,\n}: BaseBarChartProps<T>): React.ReactElement {\n  const [hovered, setHovered] = React.useState<HoveredBar>(null);\n\n  const mergedMargin = React.useMemo(\n    () => ({\n      top: 16,\n      right: 24,\n      bottom: 16,\n      left: 0,\n      ...margin,\n    }),\n    [margin]\n  );\n\n  const handleMouseLeaveChart = React.useCallback(() => {\n    setHovered(null);\n  }, []);\n\n  const handleCellMouseEnter = React.useCallback((event: React.MouseEvent<SVGRectElement>) => {\n    const { barKey, barIndex } = event.currentTarget.dataset;\n    if (!barKey || barIndex === undefined) {\n      return;\n    }\n    setHovered({ key: barKey, index: Number(barIndex) });\n  }, []);\n\n  const handleCellMouseLeave = React.useCallback((event: React.MouseEvent<SVGRectElement>) => {\n    const { barKey, barIndex } = event.currentTarget.dataset;\n    if (!barKey || barIndex === undefined) {\n      setHovered(null);\n      return;\n    }\n    const index = Number(barIndex);\n    setHovered((prev) => (prev?.key === barKey && prev.index === index ? null : prev));\n  }, []);\n\n  const tooltipRenderer = React.useCallback(\n    (props: TooltipProps<number, string>) => {\n      if (typeof tooltipContent === 'function') {\n        return (tooltipContent as (p: TooltipProps<number, string>) => React.ReactNode)(props);\n      }\n\n      if (tooltipContent !== undefined) {\n        return tooltipContent;\n      }\n\n      if (!props.active || !props.payload?.length) {\n        return null;\n      }\n\n      const payload = props.payload[0];\n      return (\n        <div className=\"rounded-md border border-gray-200 bg-white px-3 py-2 text-xs text-gray-700 shadow-lg dark:border-gray-700 dark:bg-gray-900 dark:text-gray-200\">\n          {props.label !== undefined && (\n            <div className=\"font-semibold text-gray-900 dark:text-gray-100\">{props.label}</div>\n          )}\n          <div className=\"mt-1\">{payload.value}</div>\n        </div>\n      );\n    },\n    [tooltipContent]\n  );\n\n  const tooltipWrapperStyle = React.useMemo(\n    () => ({\n      pointerEvents: 'none' as const,\n      ...(tooltipProps?.wrapperStyle as React.CSSProperties),\n    }),\n    [tooltipProps?.wrapperStyle]\n  );\n\n  const resolvedXAxisTickFormatter = React.useCallback(\n    (value: any, index: number): string => {\n      const formatter =\n        xTickFormatter ??\n        (xAxisProps?.tickFormatter as\n          | ((val: any, idx: number) => string | number | undefined)\n          | undefined);\n\n      const formatted = formatter ? formatter(value, index) : value;\n      if (typeof formatted === 'string') return formatted;\n      if (typeof formatted === 'number') return formatted.toString();\n      if (typeof value === 'string') return value;\n      if (typeof value === 'number') return value.toString();\n      return '';\n    },\n    [xAxisProps?.tickFormatter, xTickFormatter]\n  );\n\n  const resolvedYAxisTickFormatter = React.useCallback(\n    (value: any, index: number): string => {\n      const formatter =\n        yTickFormatter ??\n        (yAxisProps?.tickFormatter as\n          | ((val: any, idx: number) => string | number | undefined)\n          | undefined);\n\n      const formatted = formatter ? formatter(value, index) : value;\n      if (typeof formatted === 'string') return formatted;\n      if (typeof formatted === 'number') return formatted.toString();\n      if (typeof value === 'string') return value;\n      if (typeof value === 'number') return value.toString();\n      return '';\n    },\n    [yAxisProps?.tickFormatter, yTickFormatter]\n  );\n\n  return (\n    <div className={className} role=\"img\" aria-label={ariaLabel} style={{ width: '100%', height }}>\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\n        <BarChart data={data} margin={mergedMargin} onMouseLeave={handleMouseLeaveChart}>\n          {cartesianGrid && (\n            <CartesianGrid strokeDasharray=\"3 3\" strokeOpacity={0.15} {...cartesianGridProps} />\n          )}\n          <XAxis\n            dataKey={xKey as string}\n            tick={{ ...AXIS_TICK_STYLE, ...(xAxisProps?.tick as any) }}\n            tickLine={false}\n            {...xAxisProps}\n            tickFormatter={resolvedXAxisTickFormatter}\n          />\n          <YAxis\n            tick={{ ...AXIS_TICK_STYLE, ...(yAxisProps?.tick as any) }}\n            tickLine={false}\n            width={yAxisProps?.width ?? 80}\n            {...yAxisProps}\n            tickFormatter={resolvedYAxisTickFormatter}\n          />\n          <Tooltip\n            {...tooltipProps}\n            cursor={false}\n            content={tooltipRenderer}\n            wrapperStyle={tooltipWrapperStyle}\n          />\n          {legend && <Legend />}\n          {referenceLines?.map((ref, index) => (\n            <ReferenceLine key={`bar-ref-line-${index}`} {...ref} />\n          ))}\n          {bars.map((bar) => (\n            <Bar\n              key={bar.dataKey}\n              dataKey={bar.dataKey as string}\n              name={bar.name}\n              fill={bar.fill}\n              radius={bar.radius ?? 4}\n              barSize={bar.barSize}\n              stackId={bar.stackId}\n              isAnimationActive={bar.isAnimationActive ?? false}\n              label={bar.label}\n            >\n              {data.map((entry, index) => {\n                const defaultFill = bar.getFill ? bar.getFill(entry, index) : bar.fill;\n                const isActive = hovered?.key === (bar.dataKey as string) && hovered.index === index;\n                const opacity = hovered ? (isActive ? 1 : 0.35) : 0.85;\n                return (\n                  <Cell\n                    key={`cell-${bar.dataKey}-${index}`}\n                    data-bar-key={bar.dataKey as string}\n                    data-bar-index={index}\n                    fill={defaultFill}\n                    style={{\n                      cursor: 'pointer',\n                      opacity,\n                      transition: 'opacity 150ms ease',\n                    }}\n                    onMouseEnter={handleCellMouseEnter}\n                    onMouseLeave={handleCellMouseLeave}\n                  />\n                );\n              })}\n            </Bar>\n          ))}\n        </BarChart>\n      </ResponsiveContainer>\n    </div>\n  );\n}\n\nexport default BaseBarChart;\n","import React, { useMemo } from 'react';\nimport type { TooltipProps } from 'recharts';\nimport { ChartCard } from '../../charts/ChartCard';\nimport { BaseLineChart, type LineConfig, type ReferenceLineConfig } from '../../charts/BaseLineChart';\nimport { BaseBarChart } from '../../charts/BaseBarChart';\nimport { BRAND_COLORS, STATUS_COLORS } from '../../../theme/colors';\n\ntype StintSegment = {\n  startLap: number;\n  endLap: number;\n  color: string;\n};\n\ninterface StrategyTabProps {\n  averageLapSeconds: number | null;\n  compoundLineSetup: { data: any[] };\n  stintLines: LineConfig[];\n  stintSegments: StintSegment[];\n  compoundAverages: any[];\n  formatSecondsValue: (seconds?: number | null) => string;\n  StintLapTooltip: React.FC<TooltipProps<number, string>>;\n  CompoundBarTooltip: React.FC<TooltipProps<number, string>>;\n  pitReferenceLines?: ReferenceLineConfig[];\n}\n\nexport const StrategyTab: React.FC<StrategyTabProps> = ({\n  averageLapSeconds,\n  compoundLineSetup,\n  stintLines,\n  stintSegments,\n  compoundAverages,\n  formatSecondsValue,\n  StintLapTooltip,\n  CompoundBarTooltip,\n  pitReferenceLines = [],\n}) => {\n  const combinedReferenceLines = useMemo(() => {\n    const pitLines = pitReferenceLines ?? [];\n    if (averageLapSeconds === null) {\n      return pitLines;\n    }\n    return [\n      ...pitLines,\n      {\n        y: averageLapSeconds,\n        stroke: STATUS_COLORS.neutral,\n        strokeDasharray: '4 4',\n        label: { value: 'Avg', fill: BRAND_COLORS.mutedStrong, position: 'right' },\n      } as ReferenceLineConfig,\n    ];\n  }, [averageLapSeconds, pitReferenceLines]);\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-6\">\n        <ChartCard\n          title=\"Lap Pace by Tire Stint\"\n          description=\"Colored bands indicate tire stints. Dots show lap times for each stint start.\"\n          headerSlot={\n            averageLapSeconds !== null ? (\n              <div className=\"text-right\">\n                <div className=\"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400\">Average Lap</div>\n                <div className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n                  {formatSecondsValue(averageLapSeconds)}\n                </div>\n              </div>\n            ) : null\n          }\n          bodyClassName=\"px-6 py-4\"\n        >\n          <div className=\"h-96 w-full\">\n            {compoundLineSetup.data.length > 0 ? (\n              <BaseLineChart\n                data={compoundLineSetup.data}\n                lines={stintLines}\n                autoDomainPadding={{ axis: 'y', padding: 10, clampToZero: false }}\n                yTickFormatter={(value) => formatSecondsValue(value as number)}\n                tooltipContent={<StintLapTooltip />}\n                referenceLines={combinedReferenceLines}\n                referenceAreas={stintSegments.map((segment) => ({\n                  x1: segment.startLap - 0.5,\n                  x2: segment.endLap + 0.5,\n                  fill: segment.color,\n                  fillOpacity: 0.08,\n                  strokeOpacity: 0,\n                }))}\n                className=\"h-full\"\n              />\n            ) : (\n              <div className=\"flex h-full items-center justify-center text-sm text-gray-500 dark:text-gray-400\">\n                Lap data not available to display stints.\n              </div>\n            )}\n          </div>\n        </ChartCard>\n\n        <ChartCard\n          title=\"Average Lap by Tire Compound\"\n          description=\"Average lap time recorded on each tire compound.\"\n          bodyClassName=\"px-6 py-4\"\n        >\n          <div className=\"h-96 w-full\">\n            {compoundAverages.length > 0 ? (\n              <BaseBarChart\n                data={compoundAverages}\n                bars={[\n                  {\n                    dataKey: 'averageSeconds',\n                    name: 'Average Lap',\n                    fill: STATUS_COLORS.info,\n                    barSize: 32,\n                    getFill: (entry: any) => entry.color,\n                  },\n                ]}\n                xKey=\"compoundLabel\"\n                xAxisProps={{ dataKey: 'compoundLabel' }}\n                yTickFormatter={(value) => formatSecondsValue(value as number)}\n                tooltipContent={(props) => <CompoundBarTooltip {...props} />}\n                legend={false}\n                className=\"h-full\"\n              />\n            ) : (\n              <div className=\"flex h-full items-center justify-center text-sm text-gray-500 dark:text-gray-400\">\n                No average lap data available for tire compounds.\n              </div>\n            )}\n          </div>\n        </ChartCard>\n      </div>\n    </div>\n  );\n};\n","import React, { useMemo, useCallback, useState } from 'react';\nimport type { TooltipProps } from 'recharts';\nimport { ChartCard } from '../../charts/ChartCard';\nimport { BaseLineChart } from '../../charts/BaseLineChart';\nimport { LapData } from '../types';\nimport { buildPitReferenceLines } from '../utils';\n\ninterface PaceGraphsTabProps {\n  driverName: string;\n  lapData: LapData[];\n  sessionDrivers: any[];\n  formatSecondsValue: (seconds?: number | null) => string;\n  getTeamColorHex: (team?: string | null) => string;\n  pitLaps: number[];\n  primaryDriverId?: string | number | null;\n}\n\nexport const PaceGraphsTab: React.FC<PaceGraphsTabProps> = ({\n  driverName,\n  lapData,\n  sessionDrivers,\n  formatSecondsValue,\n  getTeamColorHex,\n  pitLaps,\n  primaryDriverId = null,\n}) => {\n  const [hoveredSeries, setHoveredSeries] = useState<string | null>(null);\n  const pitLapSet = useMemo(() => new Set(pitLaps), [pitLaps]);\n\n  const paceSeries = useMemo(\n    () =>\n      lapData.map((lap) => ({\n        lap: lap.lap_number,\n        lapSeconds: lap.lap_time_ms != null ? lap.lap_time_ms / 1000 : null,\n        sector1Seconds: lap.sector1_ms != null ? lap.sector1_ms / 1000 : null,\n        sector2Seconds: lap.sector2_ms != null ? lap.sector2_ms / 1000 : null,\n        sector3Seconds: lap.sector3_ms != null ? lap.sector3_ms / 1000 : null,\n        pitStop:\n          typeof lap.lap_number === 'number' && pitLapSet.has(lap.lap_number),\n      })),\n    [lapData, pitLapSet]\n  );\n\n  const paceLines = useMemo(\n    () => [\n      { dataKey: 'lapSeconds' as const, name: 'Lap', stroke: '#f97316' },\n      { dataKey: 'sector1Seconds' as const, name: 'Sector 1', stroke: '#3b82f6' },\n      { dataKey: 'sector2Seconds' as const, name: 'Sector 2', stroke: '#10b981' },\n      { dataKey: 'sector3Seconds' as const, name: 'Sector 3', stroke: '#a855f7' },\n    ],\n    []\n  );\n\n  const normalizedPrimaryName = useMemo(\n    () => (driverName ? driverName.trim().toLowerCase() : null),\n    [driverName]\n  );\n\n  const driverMetadata = useMemo(() => {\n    return sessionDrivers.map((driver: any, index: number) => {\n      const rawId =\n        driver?.id ?? driver?.driver_id ?? driver?.driverId ?? driver?.member_id ?? driver?.driverNumber;\n      const id = String(rawId ?? driver?.name ?? `driver-${index}`);\n      const name =\n        driver?.name ??\n        driver?.driverName ??\n        driver?.json_driver_name ??\n        driver?.mapping_driver_name ??\n        driver?.additional_data?.participantData?.name ??\n        `Driver ${index + 1}`;\n      const team =\n        driver?.team ??\n        driver?.json_team_name ??\n        driver?.additional_data?.participantData?.team ??\n        driver?.additional_data?.teamName ??\n        '';\n      const stroke = getTeamColorHex(team) || '#94a3b8';\n      const laps = Array.isArray(driver?.lap_times) ? driver.lap_times : [];\n\n      const normalizedName = name ? String(name).trim().toLowerCase() : null;\n      const stringPrimaryId = primaryDriverId != null ? String(primaryDriverId) : null;\n\n      const isPrimary =\n        (stringPrimaryId != null && stringPrimaryId === String(rawId ?? id)) ||\n        (normalizedPrimaryName != null && normalizedName === normalizedPrimaryName);\n\n      return {\n        id,\n        rawId: rawId ?? id,\n        name,\n        stroke,\n        laps,\n        strokeWidth: isPrimary ? 3 : 1.5,\n        strokeOpacity: isPrimary ? 1 : 0.35,\n      };\n    });\n  }, [sessionDrivers, getTeamColorHex, primaryDriverId, normalizedPrimaryName]);\n\n  const maxLapNumber = useMemo(() => {\n    const driverLapMax = lapData.reduce<number>(\n      (acc, lap) => Math.max(acc, lap?.lap_number ?? 0),\n      0\n    );\n    const sessionDriverMax = driverMetadata.reduce<number>((acc, driver) => {\n      const lapsArray = Array.isArray(driver.laps) ? driver.laps : [];\n      const lastLap = lapsArray.reduce<number>(\n        (lapAcc, lap) =>\n          Math.max(\n            lapAcc,\n            Number(lap?.lap_number ?? lap?.lapNumber ?? 0)\n          ),\n        0\n      );\n      return Math.max(acc, lastLap);\n    }, 0);\n    return Math.max(driverLapMax, sessionDriverMax);\n  }, [driverMetadata, lapData]);\n\n  const positionSeries = useMemo(() => {\n    if (!maxLapNumber || maxLapNumber <= 0) {\n      return [];\n    }\n\n    const series = [];\n    for (let lapNumber = 1; lapNumber <= maxLapNumber; lapNumber += 1) {\n      const entry: Record<string, number | null> & { lap: number } = {\n        lap: lapNumber,\n      };\n      driverMetadata.forEach((driver) => {\n        const lapEntry = driver.laps.find(\n          (lap: any) => (lap?.lap_number ?? lap?.lapNumber) === lapNumber\n        );\n        const position =\n          lapEntry?.track_position ??\n          lapEntry?.trackPosition ??\n          lapEntry?.position ??\n          lapEntry?.racePosition ??\n          null;\n        entry[driver.id] =\n          position != null && !Number.isNaN(Number(position)) ? Number(position) : null;\n      });\n      series.push(entry);\n    }\n    return series;\n  }, [driverMetadata, maxLapNumber]);\n\n  const positionLines = useMemo(\n    () =>\n      driverMetadata.map((driver) => ({\n        dataKey: driver.id,\n        name: driver.name,\n        stroke: driver.stroke || '#94a3b8',\n        strokeWidth: driver.strokeWidth ?? 2,\n        strokeOpacity: driver.strokeOpacity ?? 1,\n        dot: false,\n        activeDot: driver.strokeOpacity === 1 ? { r: 4 } : false,\n      })),\n    [driverMetadata]\n  );\n\n  const primaryDriverKey = useMemo(() => {\n    return driverMetadata.find((driver) => driver.strokeOpacity === 1)?.id ?? null;\n  }, [driverMetadata]);\n\n  const pitReferenceLines = useMemo(() => buildPitReferenceLines(pitLaps), [pitLaps]);\n\n  const renderPaceTooltip = useCallback(\n    ({ active, payload, label }: TooltipProps<number, string>) => {\n      if (!active || !payload || payload.length === 0) {\n        return null;\n      }\n\n      const entries = payload.filter((item) => item?.value != null);\n      if (entries.length === 0) {\n        return null;\n      }\n\n      return (\n        <div className=\"rounded-lg border border-white/20 bg-white/90 px-3 py-2 text-xs text-slate-800 shadow-lg backdrop-blur dark:border-white/10 dark:bg-slate-900/80 dark:text-slate-200\">\n          <div className=\"font-semibold text-slate-900 dark:text-white\">Lap {label}</div>\n          <div className=\"mt-1 space-y-1\">\n            {entries.map((entry) => (\n              <div key={entry.dataKey} className=\"flex items-center justify-between gap-3\">\n                <span className=\"text-slate-600 dark:text-slate-300\">{entry.name}</span>\n                <span className=\"font-semibold text-slate-900 dark:text-white\">\n                  {formatSecondsValue(typeof entry.value === 'number' ? entry.value : null)}\n                </span>\n              </div>\n            ))}\n          </div>\n        </div>\n      );\n    },\n    [formatSecondsValue]\n  );\n\n  const renderPositionTooltip = useCallback(\n    ({ active, payload, label }: TooltipProps<number, string>) => {\n      if (!active || !payload || payload.length === 0) {\n        return null;\n      }\n\n      const targetEntry =\n        (hoveredSeries && payload.find((item) => item.dataKey === hoveredSeries)) ||\n        (primaryDriverKey && payload.find((item) => item.dataKey === primaryDriverKey)) ||\n        payload.find((item) => item.value != null) ||\n        payload[0];\n\n      if (!targetEntry || (primaryDriverKey && targetEntry.dataKey !== primaryDriverKey)) {\n        return null;\n      }\n\n      const driver = driverMetadata.find((metadata) => metadata.id === targetEntry.dataKey);\n      const driverNameLabel = driver?.name ?? String(targetEntry.dataKey);\n      const position = targetEntry.value != null ? `P${targetEntry.value}` : 'No data';\n\n      return (\n        <div className=\"rounded-lg border border-white/20 bg-white/90 px-3 py-2 text-xs text-slate-800 shadow-lg backdrop-blur dark:border-white/10 dark:bg-slate-900/80 dark:text-slate-200\">\n          <div className=\"font-semibold text-slate-900 dark:text-white\">{driverNameLabel}</div>\n          <div className=\"text-slate-600 dark:text-slate-300\">\n            Lap {label}: {position}\n          </div>\n        </div>\n      );\n    },\n    [driverMetadata, hoveredSeries, primaryDriverKey]\n  );\n\n  return (\n    <div className=\"space-y-6\">\n      <ChartCard\n        title=\"Pace by Lap\"\n        description={`${driverName}'s lap and sector pace across the session.`}\n      >\n        <div className=\"h-80\">\n          <BaseLineChart\n            data={paceSeries}\n            lines={paceLines}\n            tooltipContent={renderPaceTooltip}\n            yTickFormatter={(value) => formatSecondsValue(typeof value === 'number' ? value : null)}\n            referenceLines={pitReferenceLines}\n            legend\n            enableSeriesHighlight\n            dimmedOpacity={1}\n          />\n        </div>\n      </ChartCard>\n\n      <ChartCard\n        title=\"Position by Lap\"\n        description=\"Track position trends for every driver in the session.\"\n      >\n        <div className=\"h-96\">\n          <BaseLineChart\n            data={positionSeries}\n            lines={positionLines}\n            tooltipContent={renderPositionTooltip}\n            yAxisProps={{\n              type: 'number',\n              allowDecimals: false,\n              domain: ['dataMin', 'dataMax'],\n              reversed: true,\n              tickFormatter: (value: number) => `P${value}`,\n            }}\n            referenceLines={pitReferenceLines}\n            legend={false}\n            enableSeriesHighlight\n            dimmedOpacity={1}\n            onSeriesHoverStart={setHoveredSeries}\n            onSeriesHoverEnd={() => setHoveredSeries(null)}\n          />\n        </div>\n      </ChartCard>\n    </div>\n  );\n};\n\nexport default PaceGraphsTab;\n\n","import React, { useState, useEffect, useMemo, useCallback, useRef } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { BarChart3, TrendingUp, Award, LineChart } from 'lucide-react';\nimport type { TooltipProps } from 'recharts';\nimport { DEFAULT_OVERLAY_STYLES, type LineConfig } from './charts/BaseLineChart';\nimport { F123DataService } from '../services/F123DataService';\nimport { useDriverRaceData } from './DriverRaceAnalysis/hooks/useDriverRaceData';\nimport { useLapAnalytics } from './DriverRaceAnalysis/hooks/useLapAnalytics';\nimport { useStintAnalytics } from './DriverRaceAnalysis/hooks/useStintAnalytics';\nimport { useRaceStats } from './DriverRaceAnalysis/hooks/useRaceStats';\nimport { DriverRaceAnalysisProps, LapStatusType, LapData } from './DriverRaceAnalysis/types';\nimport {\n  formatSecondsValue,\n  formatSecondsDifference,\n  getCompoundKey,\n  getCompoundDisplayName,\n  isPitStopFlag,\n  buildPitReferenceLines,\n} from './DriverRaceAnalysis/utils';\nimport { BRAND_COLORS, STATUS_COLORS } from '../theme/colors';\nimport { OverviewTab } from './DriverRaceAnalysis/tabs/OverviewTab';\nimport { PaceTab as ComparisonTab } from './DriverRaceAnalysis/tabs/PaceTab';\nimport { StrategyTab } from './DriverRaceAnalysis/tabs/StrategyTab';\nimport { PaceGraphsTab } from './DriverRaceAnalysis/tabs/PaceGraphsTab';\nimport { DashboardTable, type DashboardTableColumn } from './layout/DashboardTable';\nimport { motion } from 'framer-motion';\n\ntype AnalyticsTab = 'overview' | 'pace' | 'comparison' | 'strategy';\n\nexport const DriverRaceAnalysis: React.FC<DriverRaceAnalysisProps> = ({ driverId, raceId, initialSessionType }) => {\n  const { raceData, sessions, defaultSessionId, loading, error } = useDriverRaceData(driverId, raceId);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const tabFromUrl = searchParams.get('tab') as AnalyticsTab | null;\n  const [selectedSessionId, setSelectedSessionId] = useState<string | null>(null);\n  const hasAppliedInitialSession = useRef(false);\n  const [activeTab, setActiveTab] = useState<AnalyticsTab>(\n    tabFromUrl && ['overview', 'pace', 'comparison', 'strategy'].includes(tabFromUrl) ? tabFromUrl : 'overview'\n  );\n  const [comparisonDriverId, setComparisonDriverId] = useState<string | null>(null);\n\n  // Handle tab change - update both state and URL\n  const handleTabChange = useCallback((tab: AnalyticsTab) => {\n    setActiveTab(tab);\n    setSearchParams(prev => {\n      const newParams = new URLSearchParams(prev);\n      newParams.set('tab', tab);\n      return newParams;\n    });\n  }, [setSearchParams]);\n\n  // Restore tab from URL on mount\n  useEffect(() => {\n    if (tabFromUrl && ['overview', 'pace', 'comparison', 'strategy'].includes(tabFromUrl)) {\n      setActiveTab(tabFromUrl);\n    }\n  }, [tabFromUrl]);\n\n  const determineSessionKind = useCallback((sessionType: number): 'practice' | 'qualifying' | 'race' => {\n    if (sessionType === 10) {\n      return 'race';\n    }\n    if (sessionType >= 5 && sessionType <= 9) {\n      return 'qualifying';\n    }\n    return 'practice';\n  }, []);\n\n  useEffect(() => {\n    if (sessions.length === 0) {\n      return;\n    }\n\n    const sessionIds = new Set(sessions.map((session) => session.sessionId));\n    const selectedIsValid = selectedSessionId ? sessionIds.has(selectedSessionId) : false;\n\n    if (selectedIsValid) {\n      return;\n    }\n\n    let nextSessionId: string | null = null;\n\n    if (!hasAppliedInitialSession.current && initialSessionType) {\n      const matchingSession = sessions.find(\n        (session) => determineSessionKind(session.sessionType) === initialSessionType\n      );\n\n      if (matchingSession?.sessionId) {\n        nextSessionId = matchingSession.sessionId;\n        hasAppliedInitialSession.current = true;\n      }\n    }\n\n    if (!nextSessionId && defaultSessionId && sessionIds.has(defaultSessionId)) {\n      nextSessionId = defaultSessionId;\n    }\n\n    if (!nextSessionId) {\n      nextSessionId = sessions[0]?.sessionId ?? null;\n    }\n\n    if (nextSessionId && nextSessionId !== selectedSessionId) {\n      setSelectedSessionId(nextSessionId);\n    }\n  }, [sessions, selectedSessionId, initialSessionType, defaultSessionId, determineSessionKind]);\n\n  const selectedSession = useMemo(\n    () => sessions.find((session) => session.sessionId === selectedSessionId) || null,\n    [sessions, selectedSessionId]\n  );\n\n  const driver = selectedSession?.driver ?? null;\n  const lapData = selectedSession?.lapData ?? [];\n  const sessionDrivers = selectedSession?.sessionDrivers ?? [];\n  const sessionLabel = selectedSession?.sessionName || selectedSession?.sessionTypeName || 'Session';\n  const sessionKind = selectedSession ? determineSessionKind(selectedSession.sessionType) : null;\n\n  const getTeamColor = (team: string) => F123DataService.getTeamColor(team);\n  const getTeamColorHex = (team?: string | null) => F123DataService.getTeamColorHex(team ?? '');\n  const getTireCompoundColor = (compound?: string) => F123DataService.getTireCompoundColor(compound);\n  const getTireCompoundText = (compound?: string) => F123DataService.getTireCompoundText(compound);\n\n  const pitLapNumbers = useMemo(\n    () =>\n      lapData\n        .filter((lap) =>\n          isPitStopFlag(\n            (lap as any)?.pit_stop ??\n              (lap as any)?.pitStop ??\n              (lap as any)?.pit ??\n              (lap as any)?.isPitStop\n          )\n        )\n        .map((lap) => lap.lap_number)\n        .filter((lap): lap is number => typeof lap === 'number' && Number.isFinite(lap) && lap > 0),\n    [lapData]\n  );\n\n  const pitReferenceLines = useMemo(\n    () => buildPitReferenceLines(pitLapNumbers),\n    [pitLapNumbers]\n  );\n\n  const getDriverDisplayName = (driverResult: any): string => {\n    const candidateNames = [\n      driverResult?.mappedUserName,\n      driverResult?.mapped_user_name,\n      driverResult?.mappedDriverName,\n      driverResult?.mapped_driver_name,\n      driverResult?.driver_name,\n      driverResult?.json_driver_name,\n      driverResult?.mapping_driver_name,\n      driverResult?.name,\n      driverResult?.additional_data?.participantData?.name,\n      driverResult?.additionalData?.participantData?.name,\n      driverResult?.additional_data?.participantData?.driverName,\n      driverResult?.additionalData?.participantData?.driverName,\n    ];\n\n    for (const rawName of candidateNames) {\n      if (typeof rawName === 'string') {\n        const trimmed = rawName.trim();\n        if (trimmed.length > 0) {\n          return trimmed;\n        }\n      }\n    }\n\n    return 'Unknown Driver';\n  };\n\n  const comparisonOptions = useMemo(() => {\n    if (!sessionDrivers || sessionDrivers.length === 0) {\n      return [] as Array<{ id: string; name: string; position: number | null }>;\n    }\n\n    const filtered = sessionDrivers.filter((result: any) => result && result.id && result.id !== driver?.id);\n\n    return filtered\n      .sort((a: any, b: any) => (Number(a?.position ?? 999) - Number(b?.position ?? 999)))\n      .map((result: any) => ({\n        id: result.id as string,\n        name: getDriverDisplayName(result),\n        position: result?.position != null ? Number(result.position) : null,\n      }));\n  }, [sessionDrivers, driver]);\n\n  const comparisonDriver = useMemo(() => {\n    if (!comparisonDriverId) return null;\n    return sessionDrivers.find((result: any) => result && result.id === comparisonDriverId) || null;\n  }, [sessionDrivers, comparisonDriverId]);\n\n  const comparisonDriverName = useMemo(() => {\n    if (!comparisonDriver) return null;\n    return getDriverDisplayName(comparisonDriver);\n  }, [comparisonDriver]);\n\n  useEffect(() => {\n    if (!driver || sessionDrivers.length === 0) {\n      if (comparisonDriverId !== null) {\n        setComparisonDriverId(null);\n      }\n      return;\n    }\n\n    const availableDrivers = sessionDrivers.filter((result: any) => result && result.id && result.id !== driver.id);\n\n    if (availableDrivers.length === 0) {\n      if (comparisonDriverId !== null) {\n        setComparisonDriverId(null);\n      }\n      return;\n    }\n\n    const isCurrentValid = comparisonDriverId\n      ? availableDrivers.some((result: any) => result.id === comparisonDriverId)\n      : false;\n\n    if (isCurrentValid) {\n      return;\n    }\n\n    const sortedDrivers = [...availableDrivers].sort(\n      (a: any, b: any) => Number(a?.position ?? 999) - Number(b?.position ?? 999)\n    );\n\n    const leaderEntry = sortedDrivers.find((result: any) => Number(result?.position ?? 999) === 1 && result?.id);\n    const defaultId = leaderEntry?.id && leaderEntry.id !== driver.id ? leaderEntry.id : sortedDrivers[0]?.id ?? null;\n\n    setComparisonDriverId(defaultId ?? null);\n  }, [driver, sessionDrivers, selectedSessionId, comparisonDriverId]);\n\n  const { lapComparisonData, deltaComparisonData, statusOverlays, statusLegend } = useLapAnalytics({ lapData, comparisonDriver });\n  const { stintChartData, stintSegments, stintStartLapInfo, compoundLineSetup, compoundAverages } =\n    useStintAnalytics(lapData);\n  const raceStats = useRaceStats({ lapData, driver, sessionDrivers });\n\n  const createStintDotRenderer = useCallback(\n    (compoundKey: string) =>\n      (props: any) => {\n        const { cx, cy, payload } = props;\n        const lapNumber = payload?.lap;\n        const info = lapNumber != null ? stintStartLapInfo.get(lapNumber) : undefined;\n        if (!info || info.compoundKey !== compoundKey) {\n          return <g key={`stint-dot-placeholder-${compoundKey}-${lapNumber ?? 'na'}`} />;\n        }\n        const x = typeof cx === 'number' ? cx : 0;\n        const y = typeof cy === 'number' ? cy : 0;\n        const initial = info.label ? info.label.charAt(0).toUpperCase() : compoundKey.charAt(0);\n        const icon =\n          F123DataService.getTireCompoundIcon(payload?.tireCompound || info.label || info.compoundKey) ||\n          F123DataService.getTireCompoundIcon(initial) ||\n          null;\n        const iconSize = 20;\n        const halfSize = iconSize / 2;\n\n        if (icon) {\n          return (\n            <g\n              key={`stint-dot-icon-${compoundKey}-${lapNumber ?? 'na'}`}\n              pointerEvents=\"none\"\n            >\n              <image\n                href={icon}\n                x={x - halfSize}\n                y={y - halfSize}\n                width={iconSize}\n                height={iconSize}\n                preserveAspectRatio=\"xMidYMid meet\"\n              />\n            </g>\n          );\n        }\n\n        return (\n          <text\n            key={`stint-dot-text-${compoundKey}-${lapNumber ?? 'na'}`}\n            x={x}\n            y={y}\n            textAnchor=\"middle\"\n            dominantBaseline=\"middle\"\n            alignmentBaseline=\"middle\"\n            fontSize={12}\n            fontWeight={700}\n            fill={F123DataService.getTireCompoundColor(info.compoundKey)}\n          >\n            {initial}\n          </text>\n        );\n      },\n    [stintStartLapInfo]\n  );\n\n  const stintLines = useMemo<LineConfig[]>(() => {\n    return compoundLineSetup.lines.map((line) => ({\n      ...line,\n      dot: createStintDotRenderer(line.dataKey),\n      connectNulls: true,\n    }));\n  }, [compoundLineSetup.lines, createStintDotRenderer]);\n\n  const formatSecondsValue = (seconds?: number | null): string => {\n    if (seconds === undefined || seconds === null) {\n      return '--:--.---';\n    }\n    return F123DataService.formatTimeFromMs(Math.round(seconds * 1000));\n  };\n\n  const formatSecondsDifference = (seconds?: number | null): string => {\n    if (seconds === undefined || seconds === null) {\n      return '--:--.---';\n    }\n    const sign = seconds > 0 ? '+' : seconds < 0 ? '-' : '';\n    const absolute = Math.abs(seconds);\n    if (absolute >= 60) {\n      return `${sign}${F123DataService.formatTimeFromMs(Math.round(absolute * 1000))}`;\n    }\n    return `${sign}${absolute.toFixed(3)}s`;\n  };\n\n  const LapTimeTooltipContent: React.FC<TooltipProps<number, string>> = ({ active, payload, label }) => {\n    if (!active || !payload || payload.length === 0) {\n      return null;\n    }\n\n    return (\n      <div className=\"rounded-md border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-xs shadow-lg\">\n        <div className=\"mb-1 font-semibold text-gray-900 dark:text-gray-100\">Lap {label}</div>\n        {payload.map((entry) => {\n          if (!entry) return null;\n          const msKey =\n            entry.dataKey === 'targetLapSeconds'\n              ? 'targetLapMs'\n              : entry.dataKey === 'comparisonLapSeconds'\n                ? 'comparisonLapMs'\n                : null;\n          const rawMs = msKey ? (entry.payload as any)[msKey] : null;\n          const formatted = rawMs !== null && rawMs !== undefined\n            ? F123DataService.formatTimeFromMs(Math.round(rawMs))\n            : entry.value !== null && entry.value !== undefined\n              ? `${(entry.value as number).toFixed(3)}s`\n              : '--:--.---';\n\n          return (\n            <div key={String(entry.dataKey)} className=\"flex items-center gap-2 text-gray-700 dark:text-gray-200\">\n              <span\n                className=\"inline-flex h-2.5 w-2.5 rounded-full\"\n                style={{ backgroundColor: entry.color || STATUS_COLORS.info }}\n              ></span>\n              <span>{entry.name}: {formatted}</span>\n            </div>\n          );\n        })}\n      </div>\n    );\n  };\n\n  const DeltaTooltipContent: React.FC<TooltipProps<number, string>> = ({ active, payload, label }) => {\n    if (!active || !payload || payload.length === 0) {\n      return null;\n    }\n\n    const entry = payload[0];\n    if (!entry || entry.value === undefined || entry.value === null) {\n      return null;\n    }\n\n    const formatted = formatSecondsDifference(entry.value as number);\n\n    return (\n      <div className=\"rounded-md border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-xs shadow-lg\">\n        <div className=\"mb-1 font-semibold text-gray-900 dark:text-gray-100\">Lap {label}</div>\n        <div className=\"text-gray-700 dark:text-gray-200\">{driver?.name || 'Driver'} vs {comparisonDriverName || 'Comparison'}</div>\n        <div className=\"mt-1 font-medium text-gray-900 dark:text-gray-100\"> {formatted}</div>\n      </div>\n    );\n  };\n\n  const StintLapTooltip: React.FC<TooltipProps<number, string>> = ({ active, payload, label }) => {\n    if (!active || !payload || payload.length === 0) {\n      return null;\n    }\n\n    const entry = payload[0];\n    if (!entry) return null;\n\n    const lapTimeSeconds = entry.value as number | null;\n    const compound = (entry.payload as any)?.tireCompound || 'Unknown';\n    const formattedLap = lapTimeSeconds !== null && lapTimeSeconds !== undefined\n      ? formatSecondsValue(lapTimeSeconds)\n      : '--:--.---';\n\n    return (\n      <div className=\"rounded-md border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-xs shadow-lg\">\n        <div className=\"mb-1 font-semibold text-gray-900 dark:text-gray-100\">Lap {label}</div>\n        <div className=\"text-gray-700 dark:text-gray-200\">Lap Time: {formattedLap}</div>\n        <div className=\"text-gray-700 dark:text-gray-200\">Compound: {compound}</div>\n      </div>\n    );\n  };\n\n  const CompoundBarTooltip: React.FC<TooltipProps<number, string>> = ({ active, payload }) => {\n    if (!active || !payload || payload.length === 0) {\n      return null;\n    }\n\n    const entry = payload[0];\n    if (!entry) return null;\n\n    const compoundLabel = (entry.payload as any)?.compoundLabel || 'Unknown';\n    const lapCount = (entry.payload as any)?.lapCount || null;\n    const averageSeconds = entry.value as number | null;\n    const formatted = averageSeconds !== null ? formatSecondsValue(averageSeconds) : '--:--.---';\n    const color = (entry.payload as any)?.color;\n\n    return (\n      <div className=\"rounded-md border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-xs shadow-lg\">\n        <div className=\"font-semibold text-gray-900 dark:text-gray-100\">{compoundLabel}</div>\n        <div className=\"mt-1 flex items-center gap-2 text-gray-700 dark:text-gray-200\">\n          {color && (\n            <span\n              className=\"inline-flex h-2.5 w-2.5 rounded-full\"\n              style={{ backgroundColor: color }}\n            ></span>\n          )}\n          <span>Average Lap: {formatted}</span>\n        </div>\n        {lapCount !== null && (\n          <div className=\"mt-1 text-gray-600 dark:text-gray-300\">Stint: {lapCount}</div>\n        )}\n      </div>\n    );\n  };\n\n  // Calculate statistics for Overview tab (must be before any conditional returns)\n  const averageLapSeconds = useMemo(() => {\n    if (!raceStats?.avgLap) return null;\n    return raceStats.avgLap > 0 ? raceStats.avgLap / 1000 : null;\n  }, [raceStats]);\n\n  const chartOverlays = useMemo(\n    () =>\n      statusOverlays.map((segment, index) => ({\n        key: `overlay-${segment.startLap}-${segment.endLap}-${index}`,\n        x1: segment.startLap - 0.5,\n        x2: segment.endLap + 0.5,\n        statuses: segment.statuses,\n      })),\n    [statusOverlays]\n  );\n\n  const overlayLegendItems = useMemo(\n    () =>\n      statusLegend.map((status) => ({\n        status,\n        label:\n          status === 'safetyCar'\n            ? 'Safety Car'\n            : status === 'virtualSafetyCar'\n            ? 'Virtual Safety Car'\n            : status === 'yellowFlag'\n            ? 'Yellow Flag'\n            : 'Rain',\n        color: DEFAULT_OVERLAY_STYLES[status]?.color ?? STATUS_COLORS.neutral,\n        pattern: DEFAULT_OVERLAY_STYLES[status]?.pattern,\n      })),\n    [statusLegend]\n  );\n\n  const hexToRgba = (hex: string, alpha: number): string => {\n    if (!hex) {\n      return `rgba(156, 163, 175, ${alpha})`;\n    }\n\n    const trimmed = hex.trim();\n    if (trimmed.startsWith('rgba')) {\n      return trimmed.replace(/rgba\\(([^)]+)\\)/, (_match, contents) => {\n        const parts = contents.split(',').map((part: string) => part.trim());\n        parts[3] = alpha.toString();\n        return `rgba(${parts.join(', ')})`;\n      });\n    }\n    if (trimmed.startsWith('rgb')) {\n      return trimmed.replace(/rgb\\(([^)]+)\\)/, (_match, contents) => `rgba(${contents}, ${alpha})`);\n    }\n\n    let normalized = trimmed.replace('#', '');\n    if (normalized.length === 3) {\n      normalized = normalized\n        .split('')\n        .map((char) => char + char)\n        .join('');\n    }\n\n    const intVal = parseInt(normalized, 16);\n    const r = (intVal >> 16) & 255;\n    const g = (intVal >> 8) & 255;\n    const b = intVal & 255;\n\n    return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n  };\n\n  const formatGapTime = (ms?: number | null): string => {\n    if (ms === undefined || ms === null) return '--.---';\n    return F123DataService.formatGapTimeFromMs(ms);\n  };\n\n  const formatSectorTime = (ms?: number | null): string => {\n    if (ms === undefined || ms === null) return '--.---';\n    return F123DataService.formatSectorTimeFromMs(ms);\n  };\n\n  const deltaByLap = useMemo(() => {\n    const map = new Map<number, number | null>();\n    if (lapData.length === 0) {\n      return map;\n    }\n\n    let previousLap: LapData | null = null;\n    for (const lap of lapData) {\n      if (!previousLap || previousLap.lap_time_ms == null || lap.lap_time_ms == null) {\n        map.set(lap.lap_number, null);\n      } else {\n        map.set(lap.lap_number, lap.lap_time_ms - previousLap.lap_time_ms);\n      }\n      previousLap = lap;\n    }\n\n    return map;\n  }, [lapData]);\n\n  const lapTableHeaderPadding = 'px-3 py-3 2xl:px-4 2xl:py-4';\n  const lapTableCellPadding = 'px-3 py-3 2xl:px-4 2xl:py-4';\n\n  const lapTableColumns = useMemo<DashboardTableColumn<LapData>[]>(() => [\n    {\n      key: 'lap_number',\n      label: 'Lap',\n      headerClassName: `${lapTableHeaderPadding} w-16`,\n      className: `${lapTableCellPadding} w-16 text-lg font-semibold text-slate-900 dark:text-white`,\n      render: (_: unknown, row) => row.lap_number ?? '',\n    },\n    {\n      key: 'lap_time_ms',\n      label: 'Lap Time',\n      headerClassName: lapTableHeaderPadding,\n      className: `${lapTableCellPadding} text-lg`,\n      render: (_: unknown, row) => {\n        const isPersonalBest = Boolean(\n          raceStats?.fastestLap && row.lap_time_ms && raceStats.fastestLap === row.lap_time_ms\n        );\n        const isSessionFastest = Boolean(\n          raceStats?.sessionFastestLap && row.lap_time_ms && raceStats.sessionFastestLap === row.lap_time_ms\n        );\n        \n        let className = 'text-slate-900 dark:text-white';\n        if (isSessionFastest) {\n          className = 'text-purple-600 dark:text-purple-400 font-semibold'; // Session fastest - purple\n        } else if (isPersonalBest) {\n          className = 'text-green-600 dark:text-green-400 font-semibold'; // Personal best - green\n        }\n\n        return (\n          <span className={className}>\n            {row.lap_time_ms != null ? F123DataService.formatTimeFromMs(row.lap_time_ms) : '--:--.---'}\n          </span>\n        );\n      },\n    },\n    {\n      key: 'delta',\n      label: 'Delta',\n      headerClassName: lapTableHeaderPadding,\n      className: `${lapTableCellPadding} text-lg font-medium`,\n      render: (_: unknown, row) => {\n        const delta = deltaByLap.get(row.lap_number) ?? null;\n        if (delta === null) {\n          return <span className=\"text-slate-400\">--.---</span>;\n        }\n\n        const className =\n          delta > 0\n            ? 'text-red-500'\n            : delta < 0\n              ? 'text-green-500'\n              : 'text-gray-500 dark:text-gray-400';\n        const sign = delta > 0 ? '+' : delta < 0 ? '-' : '';\n        const formatted = formatGapTime(Math.abs(delta));\n\n        return <span className={className}>{`${sign}${formatted}`}</span>;\n      },\n    },\n    {\n      key: 'track_position',\n      label: 'Pos',\n      headerClassName: `${lapTableHeaderPadding} w-16`,\n      className: `${lapTableCellPadding} w-16 text-lg text-slate-900 dark:text-white`,\n      render: (_: unknown, row) => row.track_position ?? '',\n    },\n    {\n      key: 'gap_to_leader_ms',\n      label: 'Gap',\n      headerClassName: lapTableHeaderPadding,\n      className: `${lapTableCellPadding} text-lg text-slate-900 dark:text-white`,\n      render: (_: unknown, row) => {\n        if (row.track_position === 1) {\n          return 'Leader';\n        }\n        if (row.gap_to_leader_ms && row.gap_to_leader_ms > 0) {\n          return formatGapTime(row.gap_to_leader_ms);\n        }\n        return '--.---';\n      },\n    },\n    {\n      key: 'gap_to_position_ahead_ms',\n      label: 'Interval',\n      headerClassName: lapTableHeaderPadding,\n      className: `${lapTableCellPadding} text-lg text-slate-900 dark:text-white`,\n      render: (_: unknown, row) => {\n        if (row.gap_to_position_ahead_ms && row.gap_to_position_ahead_ms > 0) {\n          return formatGapTime(row.gap_to_position_ahead_ms);\n        }\n        return '--.---';\n      },\n    },\n    {\n      key: 'tire_compound',\n      label: 'Tire',\n      headerClassName: lapTableHeaderPadding,\n      className: `${lapTableCellPadding} text-base`,\n      render: (compound: string | undefined, row) => {\n        if (!compound) {\n          return <span className=\"text-lg text-gray-400 dark:text-gray-500\">--</span>;\n        }\n\n        const icon = F123DataService.getTireCompoundIcon(compound);\n        const label = F123DataService.getTireCompoundText(compound);\n        return (\n          <div className=\"flex items-center justify-center gap-2 text-base text-gray-700 dark:text-gray-200\">\n            {icon ? (\n              <img src={icon} alt={`${label} tire`} className=\"h-5 w-5\" />\n            ) : (\n              <span className={`font-medium ${getTireCompoundColor(compound)}`}>{label}</span>\n            )}\n           </div>\n        );\n      },\n    },\n    {\n      key: 'sector1_ms',\n      label: 'S1',\n      headerClassName: lapTableHeaderPadding,\n      className: `${lapTableCellPadding} text-lg font-medium`,\n      render: (value: number | undefined) => {\n        const isBest = Boolean(\n          raceStats?.bestSector1 != null && value != null && raceStats.bestSector1 === value\n        );\n        return (\n          <span className={isBest ? 'text-green-500' : 'text-slate-900 dark:text-white'}>\n            {formatSectorTime(value)}\n          </span>\n        );\n      },\n    },\n    {\n      key: 'sector2_ms',\n      label: 'S2',\n      headerClassName: lapTableHeaderPadding,\n      className: `${lapTableCellPadding} text-lg font-medium`,\n      render: (value: number | undefined) => {\n        const isBest = Boolean(\n          raceStats?.bestSector2 != null && value != null && raceStats.bestSector2 === value\n        );\n        return (\n          <span className={isBest ? 'text-green-500' : 'text-slate-900 dark:text-white'}>\n            {formatSectorTime(value)}\n          </span>\n        );\n      },\n    },\n    {\n      key: 'sector3_ms',\n      label: 'S3',\n      headerClassName: lapTableHeaderPadding,\n      className: `${lapTableCellPadding} text-lg font-medium`,\n      render: (value: number | undefined) => {\n        const isBest = Boolean(\n          raceStats?.bestSector3 != null && value != null && raceStats.bestSector3 === value\n        );\n        return (\n          <span className={isBest ? 'text-green-500' : 'text-slate-900 dark:text-white'}>\n            {formatSectorTime(value)}\n          </span>\n        );\n      },\n    },\n    {\n      key: 'status',\n      label: 'Status',\n      headerClassName: lapTableHeaderPadding,\n      className: `${lapTableCellPadding} text-center`,\n      render: (_: unknown, row) => {\n        const badges: React.ReactNode[] = [];\n\n        if (row.pit_stop) {\n          badges.push(\n            <span key=\"pit\" className=\"px-2 py-0.5 rounded bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs font-semibold\">\n              PIT\n            </span>\n          );\n        }\n\n        if (row.max_safety_car_status && row.max_safety_car_status !== 'NO_SAFETY_CAR') {\n          badges.push(\n            <span key=\"sc\" className=\"px-2 py-0.5 rounded bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 text-xs font-semibold\">\n              {row.max_safety_car_status === 'SAFETY_CAR'\n                ? 'SC'\n                : row.max_safety_car_status === 'VIRTUAL_SAFETY_CAR'\n                  ? 'VSC'\n                  : row.max_safety_car_status}\n            </span>\n          );\n        }\n\n        if (row.vehicle_fia_flags && row.vehicle_fia_flags !== 'None') {\n          badges.push(\n            <span key=\"flag\" className=\"px-2 py-0.5 rounded bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 text-xs font-semibold\">\n              {row.vehicle_fia_flags}\n            </span>\n          );\n        }\n\n        if (badges.length === 0) {\n          return <span className=\"text-lg text-gray-400 dark:text-gray-500\">-</span>;\n        }\n\n        return <div className=\"flex flex-col items-center space-y-1\">{badges}</div>;\n      },\n    },\n  ], [deltaByLap, formatGapTime, formatSectorTime, getTireCompoundColor, raceStats]);\n\n  const driverNumberLabel = driver?.number ?? '--';\n  const driverNameLabel = driver?.name ?? 'Driver data unavailable';\n  const driverTeamLabel = driver?.team ?? 'Unknown Team';\n  const driverPositionLabel =\n    driver?.racePosition ?? (driver as any)?.position ?? '--';\n  const fastestLapDisplay =\n    raceStats?.fastestLap && raceStats.fastestLap > 0\n      ? F123DataService.formatTimeFromMs(raceStats.fastestLap)\n      : '--:--.---';\n  const driverTimeLabel =\n    sessionKind === 'race'\n      ? driver?.raceTime ?? '--:--.---'\n      : fastestLapDisplay;\n  const teamColorHex = getTeamColorHex(driverTeamLabel);\n  const fallbackGlow = 'rgba(255,255,255,0.28)';\n  const glowGradient = teamColorHex\n    ? teamColorHex.trim().startsWith('#')\n      ? `radial-gradient(circle at top, ${teamColorHex}55, transparent 68%)`\n      : `radial-gradient(circle at top, ${teamColorHex}, transparent 68%)`\n    : `radial-gradient(circle at top, ${fallbackGlow}, transparent 68%)`;\n  const eventName = raceData?.eventName || raceData?.track?.name || raceData?.race?.name || 'Event';\n\n  const handleSelectSession = useCallback(\n    (sessionId: string | null) => {\n      setSelectedSessionId(sessionId);\n                  setComparisonDriverId(null);\n    },\n    []\n  );\n\n  const easing: [number, number, number, number] = [0.22, 1, 0.36, 1];\n\n                    return (\n    <div className=\"relative -mt-24 -ml-[calc(50vw-50%)] -mr-[calc(50vw-50%)] w-screen overflow-hidden\">\n      <div className=\"pointer-events-none absolute inset-0\">\n         <div\n          className=\"absolute inset-x-0 top-0 h-[520px] blur-[160px]\"\n          style={{ background: glowGradient }}\n        />\n        </div>\n        \n      <motion.div\n        className=\"relative z-10 mx-auto max-w-[1600px] space-y-8 px-6 pt-40 pb-16 text-slate-900 dark:text-slate-100 lg:px-10\"\n        initial={{ opacity: 0, y: 32 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.6, ease: easing }}\n      >\n        <motion.header\n          className=\"flex flex-col items-center justify-center space-y-4 text-center\"\n          initial={{ opacity: 0, y: 16 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5, ease: easing, delay: 0.1 }}\n        >\n          <p className=\"text-xs font-semibold uppercase tracking-[0.45em] text-slate-500 dark:text-slate-400\">\n            {driverNameLabel}\n          </p>\n          <h1 className=\"text-4xl font-black uppercase tracking-[0.18em] text-slate-900 dark:text-white sm:text-5xl\">\n            Race Analysis\n          </h1>\n          <span className=\"text-sm font-medium uppercase tracking-[0.3em] text-slate-500 dark:text-slate-400\">\n            {eventName}\n          </span>\n        </motion.header>\n\n        <motion.section\n          className=\"space-y-6\"\n          initial={{ opacity: 0, y: 24 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5, ease: easing, delay: 0.18 }}\n        >\n          <motion.nav\n            className=\"flex flex-col gap-4 border-b border-slate-200 pb-2 dark:border-slate-800 md:flex-row md:items-center md:justify-between\"\n            aria-label=\"Tabs\"\n            initial={{ opacity: 0, y: 12 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.45, ease: easing, delay: 0.22 }}\n          >\n            <div className=\"flex flex-wrap gap-3 sm:gap-4 lg:gap-6\">\n            <button\n              onClick={() => handleTabChange('overview')}\n              className={`pt-4 pb-2 px-1 border-b-2 font-medium text-base transition-colors ${\n                activeTab === 'overview'\n                  ? 'border-red-600 text-red-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-400 hover:border-gray-300'\n              }`}\n            >\n          <div className=\"flex items-center space-x-2\">\n                <BarChart3 className=\"w-4 h-4\" />\n                <span>Overview</span>\n          </div>\n            </button>\n            <button\n              onClick={() => handleTabChange('pace')}\n              className={`pt-4 pb-2 px-1 border-b-2 font-medium text-base transition-colors ${\n                activeTab === 'pace'\n                  ? 'border-red-600 text-red-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-400 hover:border-gray-300'\n              }`}\n            >\n          <div className=\"flex items-center space-x-2\">\n                <LineChart className=\"w-4 h-4\" />\n                <span>Pace</span>\n          </div>\n            </button>\n            <button\n              onClick={() => handleTabChange('comparison')}\n              className={`pt-4 pb-2 px-1 border-b-2 font-medium text-base transition-colors ${\n                activeTab === 'comparison'\n                  ? 'border-red-600 text-red-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-400 hover:border-gray-300'\n              }`}\n            >\n          <div className=\"flex items-center space-x-2\">\n                <TrendingUp className=\"w-4 h-4\" />\n                <span>Comparison</span>\n          </div>\n            </button>\n            <button\n              onClick={() => handleTabChange('strategy')}\n              className={`pt-4 pb-2 px-1 border-b-2 font-medium text-base transition-colors ${\n                activeTab === 'strategy'\n                  ? 'border-red-600 text-red-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-400 hover:border-gray-300'\n              }`}\n            >\n          <div className=\"flex items-center space-x-2\">\n                <Award className=\"w-4 h-4\" />\n                <span>Strategy</span>\n        </div>\n            </button>\n      </div>\n            <div className=\"w-full md:w-auto\">\n               {sessions.length > 1 ? (\n                  <select\n                  className=\"rounded-xl border border-slate-200 bg-white px-3 py-1.5 text-sm font-medium text-slate-700 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:focus:border-blue-400 dark:focus:ring-blue-400/40\"\n                   value={selectedSessionId ?? ''}\n                   onChange={(event) => handleSelectSession(event.target.value || null)}\n                 >\n                  {[...sessions]\n                    .filter((session) => !!session?.sessionId)\n                    .sort((a, b) => {\n                      const order: Record<'race' | 'qualifying' | 'practice', number> = { race: 0, qualifying: 1, practice: 2 };\n                      const kindA = determineSessionKind(a.sessionType);\n                      const kindB = determineSessionKind(b.sessionType);\n                      if (order[kindA] !== order[kindB]) {\n                        return order[kindA] - order[kindB];\n                      }\n                      if (a.sessionType !== b.sessionType) {\n                        return b.sessionType - a.sessionType;\n                      }\n                      return 0;\n                    })\n                    .map((session) => (\n                      <option key={session.sessionId} value={session.sessionId} disabled={!session.driver}>\n                        {session.sessionName || session.sessionTypeName || 'Session'}\n                        </option>\n                    ))}\n                </select>\n              ) : (\n                <span className=\"inline-flex items-center justify-center rounded-full border border-slate-200 px-3 py-1 text-sm font-medium text-slate-600 dark:border-slate-700 dark:text-slate-300\">\n                  Session: {sessionLabel}\n                </span>\n                    )}\n                  </div>\n          </motion.nav>\n\n          <motion.div\n            key={activeTab}\n            initial={{ opacity: 0, y: 12 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -12 }}\n            transition={{ duration: 0.4, ease: easing }}\n            className=\"space-y-6\"\n          >\n            {activeTab === 'overview' && (\n              <OverviewTab\n                raceStats={raceStats}\n                sessionLabel={sessionLabel}\n                sessionKind={sessionKind}\n                formatGapTime={formatGapTime}\n                formatSectorTime={formatSectorTime}\n                getTireCompoundColor={getTireCompoundColor}\n              />\n            )}\n            {activeTab === 'pace' && (\n              <PaceGraphsTab\n                driverName={driver?.name ?? 'Driver'}\n                lapData={lapData}\n                sessionDrivers={sessionDrivers}\n                formatSecondsValue={formatSecondsValue}\n                getTeamColorHex={getTeamColorHex}\n                pitLaps={pitLapNumbers}\n                primaryDriverId={\n                  driver\n                    ? (driver as any)?.id ??\n                      (driver as any)?.driver_id ??\n                      (driver as any)?.driverId ??\n                      (driver as any)?.member_id ??\n                      null\n                    : null\n                }\n              />\n          )}\n            {activeTab === 'comparison' && (\n              <ComparisonTab\n                driverName={driver?.name ?? 'Driver'}\n                comparisonDriverName={comparisonDriverName}\n                comparisonDriverId={comparisonDriverId}\n                onSelectComparisonDriver={setComparisonDriverId}\n                comparisonOptions={comparisonOptions}\n                lapComparisonData={lapComparisonData}\n                deltaComparisonData={deltaComparisonData}\n                formatSecondsValue={formatSecondsValue}\n                formatSecondsDifference={formatSecondsDifference}\n                overlayLegendItems={overlayLegendItems}\n                chartOverlays={chartOverlays}\n                LapTimeTooltipContent={LapTimeTooltipContent}\n                DeltaTooltipContent={DeltaTooltipContent}\n                hexToRgba={hexToRgba}\n                pitReferenceLines={pitReferenceLines}\n              />\n          )}\n          {activeTab === 'strategy' && (\n              <StrategyTab\n                averageLapSeconds={averageLapSeconds}\n                compoundLineSetup={compoundLineSetup}\n                stintLines={stintLines}\n                stintSegments={stintSegments}\n                compoundAverages={compoundAverages}\n                formatSecondsValue={formatSecondsValue}\n                StintLapTooltip={StintLapTooltip}\n                CompoundBarTooltip={CompoundBarTooltip}\n                pitReferenceLines={pitReferenceLines}\n              />\n            )}\n          </motion.div>\n\n          <motion.div\n            className=\"space-y-4\"\n            initial={{ opacity: 0, y: 28 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.55, ease: easing, delay: 0.26 }}\n          >\n            <motion.div\n              className=\"flex items-center justify-between text-slate-900 dark:text-slate-100\"\n              initial={{ opacity: 0, y: 12 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.45, ease: easing, delay: 0.32 }}\n            >\n              <h3 className=\"text-lg font-semibold\">Lap Times</h3>\n              {lapData.length > 0 && (\n                <span className=\"text-sm text-slate-500 dark:text-slate-400\">{lapData.length} laps recorded</span>\n                    )}\n                  </motion.div>\n            <motion.div\n              initial={{ opacity: 0, y: 18 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.5, ease: easing, delay: 0.36 }}\n            >\n              <DashboardTable\n                columns={lapTableColumns}\n                rows={lapData}\n                rowKey={(row) => row.lap_number}\n                emptyMessage=\"No lap data available\"\n              />\n            </motion.div>\n          </motion.div>\n        </motion.section>\n      </motion.div>\n    </div>\n  );\n};\n"],"names":["BarChart3","createLucideIcon","LineChart","BarChart","generateCategoricalChart","Bar","XAxis","YAxis","formatAxisMap","DEFAULT_STATE","useDriverRaceData","driverId","raceId","state","setState","useState","useEffect","abortController","prev","apiUrl","getApiUrl","fetchOptions","raceMetadataResponse","raceResponse","raceMetadata","raceMetadataResult","errorText","raceDataResult","sessionsFromResponse","canonicalIdentifiers","deriveCanonicalDriverIdentifiers","sessionsData","session","index","sessionTypeRaw","sessionType","sessionTypeName","F123DataService","sessionIdRaw","sessionId","sessionName","sessionResults","driverResult","result","doesResultMatchDriver","transformedDriver","lapDataWithGaps","sessionDrivers","transformDriverResult","enrichedLapData","enrichedSessionDrivers","buildLapDataWithGaps","hasDriverName","sessionNames","s","defaultSession","error","additionalData","parseAdditionalData","sessionResultId","normalizeIdentifier","mappedUserId","displayName","_a","normalizedResultId","canonicalDriverId","_b","_c","mapResultStatus","raw","status","driver","sortedDriverLaps","a","b","cumulativeLapTimes","cumulativeTime","lap","allDriversCumulative","otherDriver","otherLapTimes","sortedOtherLaps","otherCumulative","otherCumulativeTime","lapNumber","thisDriverCumulative","leaderCumulative","otherTime","positionAheadCumulative","thisPosition","otherLapAtThisLap","l","gapToLeader","gapToAhead","sessions","driverIdStr","match","findDriverResultMatch","extractedSessionResultId","extractSessionResultId","driverName","logger","identifiers","resultSessionId","resultDriverName","value","lowercase","normalized","normalizedTarget","results","sanitizeLapTimeMs","numeric","parseLapNumber","getCompoundKey","compound","text","getCompoundDisplayName","compoundKey","getTireCompoundHex","STATUS_COLORS","isPitStopFlag","buildPitReferenceLines","lapNumbers","useLapAnalytics","lapData","comparisonDriver","effectiveLapData","effectiveComparisonDriver","lapComparisonData","useMemo","targetMap","comparisonLapTimes","comparisonMap","targetCumulative","comparisonCumulative","targetLap","comparisonLap","targetMs","comparisonMs","entry","deltaComparisonData","statusOverlays","statusLegend","overlays","statusesPresent","sortedLaps","currentStatusesKey","currentStatuses","currentStartLap","finalizeSegment","endLap","statusesForLap","deriveLapStatuses","key","lastLapNumber","statuses","safetyStatus","isRainLap","potentialWeatherSources","_d","source","visualCompound","_e","_f","useStintAnalytics","stintChartData","lapTimeSeconds","tireText","stintSegments","segments","currentCompound","currentColor","startLap","previousLap","i","color","stintStartLapInfo","info","segment","compoundLineSetup","order","seen","data","record","lines","label","compoundAverages","groups","existing","total","count","useRaceStats","validLaps","lapTimes","fastestLap","slowestLap","sessionFastestLap","fastestLapDriver","d","fastestTime","avgLap","sum","time","variance","consistencyPercent","totalTime","gapToLeaderMs","driverGap","pitStops","tireCompounds","gridPosition","finishPosition","positionsGained","bestSector1","ms","bestSector2","bestSector3","scLaps","vscLaps","yellowFlags","CARD_CLASS","TITLE_CLASS","LABEL_CLASS","VALUE_CLASS","OverviewTab","raceStats","sessionLabel","sessionKind","formatGapTime","formatSectorTime","getTireCompoundColor","jsxs","jsx","TrendingUp","Clock","Target","idx","icon","Flag","Zap","AlertTriangle","ChartCard","title","description","headerSlot","children","className","bodyClassName","clsx","PaceTab","comparisonDriverName","comparisonDriverId","onSelectComparisonDriver","comparisonOptions","overlayLegendItems","chartOverlays","formatSecondsValue","formatSecondsDifference","LapTimeTooltipContent","DeltaTooltipContent","hexToRgba","pitReferenceLines","event","option","item","BaseLineChart","BRAND_COLORS","AXIS_TICK_STYLE","BaseBarChart","bars","xKey","xAxisProps","yAxisProps","xTickFormatter","yTickFormatter","tooltipContent","tooltipProps","legend","referenceLines","cartesianGrid","cartesianGridProps","margin","height","ariaLabel","hovered","setHovered","React","mergedMargin","handleMouseLeaveChart","handleCellMouseEnter","barKey","barIndex","handleCellMouseLeave","tooltipRenderer","props","payload","tooltipWrapperStyle","resolvedXAxisTickFormatter","formatter","formatted","resolvedYAxisTickFormatter","ResponsiveContainer","CartesianGrid","Tooltip","Legend","ref","ReferenceLine","bar","defaultFill","isActive","opacity","Cell","StrategyTab","averageLapSeconds","stintLines","StintLapTooltip","CompoundBarTooltip","combinedReferenceLines","pitLines","PaceGraphsTab","getTeamColorHex","pitLaps","primaryDriverId","hoveredSeries","setHoveredSeries","pitLapSet","paceSeries","paceLines","normalizedPrimaryName","driverMetadata","rawId","id","name","team","stroke","laps","normalizedName","stringPrimaryId","isPrimary","maxLapNumber","driverLapMax","acc","sessionDriverMax","lastLap","lapAcc","positionSeries","series","lapEntry","position","positionLines","primaryDriverKey","renderPaceTooltip","useCallback","active","entries","renderPositionTooltip","targetEntry","metadata","driverNameLabel","DriverRaceAnalysis","initialSessionType","raceData","defaultSessionId","loading","searchParams","setSearchParams","useSearchParams","tabFromUrl","selectedSessionId","setSelectedSessionId","hasAppliedInitialSession","useRef","activeTab","setActiveTab","setComparisonDriverId","handleTabChange","tab","newParams","determineSessionKind","sessionIds","nextSessionId","matchingSession","selectedSession","pitLapNumbers","getDriverDisplayName","candidateNames","_h","_g","rawName","trimmed","availableDrivers","sortedDrivers","leaderEntry","defaultId","createStintDotRenderer","cx","cy","x","y","initial","iconSize","halfSize","line","seconds","sign","absolute","msKey","rawMs","formattedLap","compoundLabel","lapCount","averageSeconds","DEFAULT_OVERLAY_STYLES","hex","alpha","_match","contents","parts","part","char","intVal","r","g","deltaByLap","map","lapTableHeaderPadding","lapTableCellPadding","lapTableColumns","_","row","isPersonalBest","isSessionFastest","delta","isBest","badges","driverTeamLabel","fastestLapDisplay","teamColorHex","glowGradient","eventName","handleSelectSession","easing","motion","Award","kindA","kindB","ComparisonTab","DashboardTable"],"mappings":"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","x_google_ignoreList":[0,1,2]}