import { Pool } from 'pg';
import { RepositoryBase, TransactionContext } from './database/repositoryBase';
import { Driver, DriverData, DriverMapping, DriverMappingData, Member, MemberData, Race, RaceData, Season, SeasonData, SessionResult, Track, TrackData } from './database/types';
import { AppRepositories, DriverRepository, RaceRepository, SeasonRepository, SessionRepository, TrackRepository, UDPRepository } from './database/repositories';
export declare class DatabaseService extends RepositoryBase {
    private readonly poolInstance;
    private initialized;
    private initializationPromise;
    private readonly initializer;
    readonly seasons: SeasonRepository;
    readonly drivers: DriverRepository;
    readonly tracks: TrackRepository;
    readonly races: RaceRepository;
    readonly sessionsRepo: SessionRepository;
    readonly udpRepo: UDPRepository;
    createSeason: (data: SeasonData) => Promise<string>;
    getAllSeasons: () => Promise<Season[]>;
    getSeasonById: (id: string) => Promise<Season | null>;
    updateSeason: (id: string, data: Partial<SeasonData>) => Promise<void>;
    deleteSeason: (id: string) => Promise<void>;
    deactivateAllOtherSeasons: (currentSeasonId: string) => Promise<void>;
    setCurrentSeason: (seasonId: string) => Promise<void>;
    getActiveSeason: () => Promise<Season | null>;
    getSeasonAnalysis: (seasonId: string) => Promise<any>;
    getHistoricInsights: () => Promise<any>;
    getSeasonsForHistory: () => Promise<any[]>;
    getPreviousRaceResults: (seasonId: string) => Promise<any>;
    getDriversBySeason: (seasonId: string) => Promise<Driver[]>;
    getAllDrivers: () => Promise<Driver[]>;
    getAllMembers: () => Promise<Member[]>;
    createMember: (data: MemberData) => Promise<string>;
    getMemberById: (id: string) => Promise<Member | null>;
    updateMember: (id: string, data: Partial<MemberData>) => Promise<void>;
    deleteMember: (id: string) => Promise<void>;
    getMemberCareerProfile: (memberId: string) => Promise<any>;
    getMemberSeasonStats: (memberId: string, seasonId: string) => Promise<any>;
    getMemberRaceHistory: (memberId: string, seasonId?: string) => Promise<any[]>;
    createDriver: (data: DriverData) => Promise<string>;
    updateDriver: (id: string, data: Partial<DriverData>) => Promise<void>;
    getDriverById: (id: string) => Promise<Driver | null>;
    deleteDriver: (id: string) => Promise<void>;
    getDriverBySteamId: (steamId: string) => Promise<Driver | null>;
    addDriverToSeason: (seasonId: string, driverId: string) => Promise<void>;
    removeDriverFromSeason: (seasonId: string, driverId: string) => Promise<void>;
    updateSeasonParticipant: (driverId: string, data: {
        team?: string;
        number?: number;
    }) => Promise<void>;
    getDriverCareerProfile: (driverId: string) => Promise<any>;
    getDriverSeasonStats: (driverId: string, seasonId: string) => Promise<any>;
    getSeasonStandings: (seasonId: string) => Promise<Array<{
        id: string;
        name: string;
        team: string | null;
        number: number | null;
        points: number;
        wins: number;
        podiums: number;
        position: number;
    }>>;
    getDriverRaceHistory: (driverId: string, seasonId?: string) => Promise<any[]>;
    createTrack: (data: TrackData) => Promise<string>;
    getAllTracks: () => Promise<Track[]>;
    getTrackById: (id: string) => Promise<Track | null>;
    findOrCreateTrack: (trackName: string, lengthKm?: number) => Promise<string>;
    getTracksBySeason: (seasonId: string) => Promise<Track[]>;
    createTrackAndAddToSeason: (data: TrackData, seasonId: string) => Promise<string>;
    removeTrackFromSeason: (seasonId: string, trackId: string) => Promise<void>;
    createRace: (data: RaceData) => Promise<string>;
    getRacesBySeason: (seasonId: string) => Promise<Race[]>;
    getRaceById: (raceId: string) => Promise<any | null>;
    addRaceToSeason: (data: RaceData) => Promise<string>;
    removeRaceFromSeason: (raceId: string) => Promise<void>;
    getEventsBySeason: (seasonId: string) => Promise<any[]>;
    addEventToSeason: (seasonId: string, eventData: any) => Promise<string>;
    updateEventInSeason: (eventId: string, eventData: any) => Promise<void>;
    updateEventOrder: (seasonId: string, orderedEventIds: string[]) => Promise<void>;
    removeEventFromSeason: (eventId: string) => Promise<void>;
    findActiveEventByTrack: (trackName: string) => Promise<string | null>;
    getCurrentEventForSeason: (seasonId: string) => Promise<string | null>;
    getSeasonIdFromEvent: (eventId: string) => Promise<string>;
    getNextOrderIndex: (seasonId: string) => Promise<number>;
    importSessionResults: (raceId: string, results: SessionResult[]) => Promise<{
        resultsCount: number;
        lapTimesCount: number;
    }>;
    getSessionResultsByRace: (raceId: string) => Promise<SessionResult[]>;
    storeF123SessionResults: (raceId: string, sessionType: number, driverResults: any[]) => Promise<void>;
    getMemberCareerStats: (memberId: string) => Promise<any>;
    importRaceResults: (raceId: string, data: SessionResult[] | {
        results?: any[];
    }) => Promise<{
        resultsCount: number;
        lapTimesCount: number;
    }>;
    createSessionResult: (raceId: string, sessionType: number, sessionName: string, sessionUID: bigint | null, additionalData?: any) => Promise<string>;
    getSessionByUID: (sessionUID: bigint) => Promise<{
        id: string;
        sessionName: string;
        trackName: string;
        raceDate: string;
        raceId: string;
    } | null>;
    deleteDriverSessionResults: (sessionResultId: string) => Promise<void>;
    storeDriverSessionResults: (sessionResultId: string, driverResults: any[]) => Promise<Map<number, string>>;
    storeLapTimes: (driverSessionResultId: string, raceId: string, lapData: any[]) => Promise<void>;
    getCompletedSessions: (raceId: string) => Promise<any[]>;
    getDriverSessionResults: (sessionResultId: string, includeLapTimes?: boolean) => Promise<any[]>;
    deleteOriginalSessionResults: (sessionResultId: string) => Promise<void>;
    storeOriginalSessionResults: (sessionResultId: string, driverResults: any[]) => Promise<void>;
    getPenaltiesForDriverResult: (driverSessionResultId: string) => Promise<any[]>;
    getPenaltiesForSession: (sessionResultId: string) => Promise<any[]>;
    addPenalty: (driverSessionResultId: string, penaltySeconds: number, reason: string, editedBy: string) => Promise<any>;
    updateDriverUserMapping: (driverSessionResultId: string, userId: string | null) => Promise<Array<{
        driverSessionResultId: string;
        sessionResultId: string;
        oldUserId: string | null;
        newUserId: string | null;
    }>>;
    removePenalty: (driverSessionResultId: string, penaltyId: string) => Promise<void>;
    recalculatePositions: (sessionResultId: string) => Promise<void>;
    changePosition: (sessionResultId: string, driverId: string, newPosition: number, reason: string, editedBy: string) => Promise<void>;
    resetDriverToOriginal: (sessionResultId: string, driverId: string) => Promise<void>;
    getEditHistory: (sessionResultId: string) => Promise<any[]>;
    getEditHistoryForDriver: (driverSessionResultId: string) => Promise<any[]>;
    revertEdit: (editId: string) => Promise<void>;
    addUDPParticipant: (data: any) => Promise<void>;
    addUDPSessionResult: (data: any) => Promise<void>;
    addUDPTyreStint: (data: any) => Promise<void>;
    addUDPLapHistory: (data: any) => Promise<void>;
    batchAddUDPLapHistory: (lapHistoryArray: any[]) => Promise<void>;
    getUDPSessionResults: () => Promise<any[]>;
    getUDPLapHistory: (driverId?: string) => Promise<any[]>;
    getUDPParticipantsBySession: (sessionUid: bigint) => Promise<any[]>;
    getUDPSessionResultsBySession: (sessionUid: bigint) => Promise<any[]>;
    getUDPLapHistoryByDriver: (driverId: string, sessionUid?: bigint) => Promise<any[]>;
    getUDPTyreStintsByDriver: (driverId: string, sessionUid?: bigint) => Promise<any[]>;
    readonly repositories: AppRepositories;
    constructor(poolInstance: Pool);
    protected transformSeasonToCamelCase(dbRow: any): any;
    protected transformDriverToCamelCase(dbRow: any): Driver;
    protected transformRaceToCamelCase(dbRow: any): any;
    private initializeTables;
    ensureInitialized(): Promise<void>;
    protected executeQuery(query: string, params?: any[]): Promise<any[]>;
    protected executeUpdate(query: string, params?: any[]): Promise<void>;
    /**
     * Public method to execute SQL queries
     * Use this instead of accessing private db property
     */
    query(sql: string, params?: any[]): Promise<any>;
    withTransaction<T>(fn: (tx: TransactionContext) => Promise<T>): Promise<T>;
    createDriverMapping(data: DriverMappingData): Promise<string>;
    getDriverMappingsBySeason(seasonId: string): Promise<DriverMapping[]>;
    updateDriverMapping(id: string, data: Partial<DriverMappingData>): Promise<void>;
    deleteDriverMapping(id: string): Promise<void>;
    getDriverMappings(seasonId: string): Promise<DriverMapping[]>;
    getSessionTypeName(sessionType: number): string;
    close(): Promise<void>;
}
//# sourceMappingURL=DatabaseService.d.ts.map